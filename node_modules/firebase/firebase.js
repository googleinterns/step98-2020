!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return d&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(v&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g&&v&&b(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n,r=o(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r,i=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<w.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var e,n,r;t&&(n=(e=t.split("=")).shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w,E;(f="undefined"!=typeof self?self:void 0).fetch||(p="URLSearchParams"in f,d="Symbol"in f&&"iterator"in Symbol,v="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(t){return!1}}(),y="FormData"in f,(g="ArrayBuffer"in f)&&(m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<m.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},d&&(s.prototype[Symbol.iterator]=s.prototype.entries),w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},E=[301,302,303,307,308],l.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},f.Headers=s,f.Request=c,f.Response=l,f.fetch=function(n,i){return new Promise(function(r,t){var e=new c(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e,n=t.split(":"),r=n.shift().trim();r&&(e=n.join(":").trim(),i.append(r,e))}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new l(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&v&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},f.fetch.polyfill=!0);var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e){return t(e={exports:{}},e.exports),e.exports}function S(t){return t&&t.Math==Math&&t}function C(t){try{return!!t()}catch(t){return!0}}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t){return V?j.createElement(t):{}}function k(t){if(!N(t))throw TypeError(String(t)+" is not an object");return t}function R(t,e){if(!N(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!N(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function O(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function P(e,n){try{G(M,e,n)}catch(t){M[e]=n}return n}function D(t,e){return Q.call(t,e)}function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+X).toString(36)}function L(t){return D(Z,t)||(J&&D(tt,t)?Z[t]=tt[t]:Z[t]=et("Symbol."+t)),Z[t]}var M=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof T&&T)||Function("return this")(),F=!1,U=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j=M.document,V=N(j)&&N(j.createElement),q=!U&&!C(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),B=Object.defineProperty,W={f:U?B:function(t,e,n){if(k(t),e=R(e,!0),k(n),q)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},G=U?function(t,e,n){return W.f(t,e,O(1,n))}:function(t,e,n){return t[e]=n,t},H="__core-js_shared__",z=M[H]||P(H,{}),K=I(function(t){(t.exports=function(t,e){return z[t]||(z[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q={}.hasOwnProperty,Y=0,X=Math.random(),J=!!Object.getOwnPropertySymbols&&!C(function(){return!String(Symbol())}),$=J&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Z=K("wks"),tt=M.Symbol,et=$?tt:tt&&tt.withoutSetter||x,nt={};nt[L("toStringTag")]="z";var rt="[object z]"===String(nt),it=Function.toString;"function"!=typeof z.inspectSource&&(z.inspectSource=function(t){return it.call(t)});function ot(t){return gt[t]||(gt[t]=x(t))}var st,at,ut,ct,ht,lt,ft,pt,dt=z.inspectSource,vt=M.WeakMap,yt="function"==typeof vt&&/native code/.test(dt(vt)),gt=K("keys"),mt={},bt=M.WeakMap;ft=yt?(st=new bt,at=st.get,ut=st.has,ct=st.set,ht=function(t,e){return ct.call(st,t,e),e},lt=function(t){return at.call(st,t)||{}},function(t){return ut.call(st,t)}):(pt=ot("state"),mt[pt]=!0,ht=function(t,e){return G(t,pt,e),e},lt=function(t){return D(t,pt)?t[pt]:{}},function(t){return D(t,pt)});function _t(t){return Tt.call(t).slice(8,-1)}var wt={set:ht,get:lt,has:ft,enforce:function(t){return ft(t)?lt(t):ht(t,{})},getterFor:function(n){return function(t){var e;if(!N(t)||(e=lt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Et=I(function(t){var e=wt.get,a=wt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||D(n,"name")||G(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:G(t,e,n)):o?t[e]=n:P(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||dt(this)})}),Tt={}.toString,It=L("toStringTag"),St="Arguments"==_t(function(){return arguments}()),Ct=rt?_t:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),It))?n:St?_t(e):"Object"==(r=_t(e))&&"function"==typeof e.callee?"Arguments":r},Nt=rt?{}.toString:function(){return"[object "+Ct(this)+"]"};rt||Et(Object.prototype,"toString",Nt,{unsafe:!0});function At(t){return isNaN(t=+t)?0:(0<t?Ht:Gt)(t)}function kt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Rt(a){return function(t,e){var n,r,i=String(kt(t)),o=At(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function Ot(t){return Jt(kt(t))}function Pt(t){return"function"==typeof t?t:void 0}function Dt(t,e){return arguments.length<2?Pt(te[t])||Pt(M[t]):te[t]&&te[t][e]||M[t]&&M[t][e]}function xt(t){return 0<t?ee(At(t),9007199254740991):0}function Lt(c){return function(t,e,n){var r,i,o,s=Ot(t),a=xt(s.length),u=(r=a,(i=At(n))<0?ne(i+r,0):re(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function Mt(t,e){var n,r=Ot(t),i=0,o=[];for(n in r)!D(mt,n)&&D(r,n)&&o.push(n);for(;e.length>i;)D(r,n=e[i++])&&(~ie(o,n)||o.push(n));return o}function Ft(t,e){for(var n=ce(e),r=W.f,i=Zt.f,o=0;o<n.length;o++){var s=n[o];D(t,s)||r(t,s,i(e,s))}}function Ut(t,e){var n=fe[le(t)];return n==de||n!=pe&&("function"==typeof e?C(e):!!e)}function jt(t,e){var n,r,i,o,s=t.target,a=t.global,u=t.stat,c=a?M:u?M[s]||P(s,{}):(M[s]||{}).prototype;if(c)for(n in e){if(i=e[n],r=t.noTargetGet?(o=ye(c,n))&&o.value:c[n],!ve(a?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;Ft(i,r)}(t.sham||r&&r.sham)&&G(i,"sham",!0),Et(c,n,i,t)}}function Vt(t){return Object(kt(t))}var qt,Bt,Wt,Gt=Math.ceil,Ht=Math.floor,zt={codeAt:Rt(!1),charAt:Rt(!0)},Kt={}.propertyIsEnumerable,Qt=Object.getOwnPropertyDescriptor,Yt={f:Qt&&!Kt.call({1:2},1)?function(t){var e=Qt(this,t);return!!e&&e.enumerable}:Kt},Xt="".split,Jt=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==_t(t)?Xt.call(t,""):Object(t)}:Object,$t=Object.getOwnPropertyDescriptor,Zt={f:U?$t:function(t,e){if(t=Ot(t),e=R(e,!0),q)try{return $t(t,e)}catch(t){}if(D(t,e))return O(!Yt.f.call(t,e),t[e])}},te=M,ee=Math.min,ne=Math.max,re=Math.min,ie={includes:Lt(!0),indexOf:Lt(!1)}.indexOf,oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],se=oe.concat("length","prototype"),ae={f:Object.getOwnPropertyNames||function(t){return Mt(t,se)}},ue={f:Object.getOwnPropertySymbols},ce=Dt("Reflect","ownKeys")||function(t){var e=ae.f(k(t)),n=ue.f;return n?e.concat(n(t)):e},he=/#|\.prototype\./,le=Ut.normalize=function(t){return String(t).replace(he,".").toLowerCase()},fe=Ut.data={},pe=Ut.NATIVE="N",de=Ut.POLYFILL="P",ve=Ut,ye=Zt.f,ge=!C(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),me=ot("IE_PROTO"),be=Object.prototype,_e=ge?Object.getPrototypeOf:function(t){return t=Vt(t),D(t,me)?t[me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?be:null},we=L("iterator"),Ee=!1;[].keys&&("next"in(Wt=[].keys())?(Bt=_e(_e(Wt)))!==Object.prototype&&(qt=Bt):Ee=!0),null==qt&&(qt={}),D(qt,we)||G(qt,we,function(){return this});function Te(){}function Ie(t){return"<script>"+t+"</"+Oe+">"}var Se,Ce={IteratorPrototype:qt,BUGGY_SAFARI_ITERATORS:Ee},Ne=Object.keys||function(t){return Mt(t,oe)},Ae=U?Object.defineProperties:function(t,e){k(t);for(var n,r=Ne(e),i=r.length,o=0;o<i;)W.f(t,n=r[o++],e[n]);return t},ke=Dt("document","documentElement"),Re="prototype",Oe="script",Pe=ot("IE_PROTO"),De=function(){try{Se=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;De=Se?function(t){t.write(Ie("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Se):((e=A("iframe")).style.display="none",ke.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ie("document.F=Object")),t.close(),t.F);for(var n=oe.length;n--;)delete De[Re][oe[n]];return De()};mt[Pe]=!0;function xe(t,e,n){t&&!D(t=n?t:t.prototype,Ve)&&je(t,Ve,{configurable:!0,value:e})}function Le(){return this}function Me(){return this}function Fe(t,e,n,r,i,o,s){var a,u,c;function h(t){if(t===i&&m)return m;if(!He&&t in y)return y[t];switch(t){case"keys":case Ke:case Qe:return function(){return new n(this,t)}}return function(){return new n(this)}}u=r,c=e+" Iterator",(a=n).prototype=Ue(Be,{next:O(1,u)}),xe(a,c,!1),qe[c]=Le;var l,f,p,d=e+" Iterator",v=!1,y=t.prototype,g=y[ze]||y["@@iterator"]||i&&y[i],m=!He&&g||h(i),b="Array"==e&&y.entries||g;if(b&&(l=_e(b.call(new t)),Ge!==Object.prototype&&l.next&&(_e(l)!==Ge&&(We?We(l,Ge):"function"!=typeof l[ze]&&G(l,ze,Me)),xe(l,d,!0))),i==Ke&&g&&g.name!==Ke&&(v=!0,m=function(){return g.call(this)}),y[ze]!==m&&G(y,ze,m),qe[e]=m,i)if(f={values:h(Ke),keys:o?m:h("keys"),entries:h(Qe)},s)for(p in f)!He&&!v&&p in y||Et(y,p,f[p]);else jt({target:e,proto:!0,forced:He||v},f);return f}var Ue=Object.create||function(t,e){var n;return null!==t?(Te[Re]=k(t),n=new Te,Te[Re]=null,n[Pe]=t):n=De(),void 0===e?n:Ae(n,e)},je=W.f,Ve=L("toStringTag"),qe={},Be=Ce.IteratorPrototype,We=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return k(t),function(t){if(!N(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ge=Ce.IteratorPrototype,He=Ce.BUGGY_SAFARI_ITERATORS,ze=L("iterator"),Ke="values",Qe="entries",Ye=zt.charAt,Xe="String Iterator",Je=wt.set,$e=wt.getterFor(Xe);Fe(String,"String",function(t){Je(this,{type:Xe,string:String(t),index:0})},function(){var t,e=$e(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ye(n,r),e.index+=t.length,{value:t,done:!1})});var Ze={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tn=L("unscopables"),en=Array.prototype;null==en[tn]&&W.f(en,tn,{configurable:!0,value:Ue(null)});function nn(t){en[tn][t]=!0}var rn="Array Iterator",on=wt.set,sn=wt.getterFor(rn),an=Fe(Array,"Array",function(t,e){on(this,{type:rn,target:Ot(t),index:0,kind:e})},function(){var t=sn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");qe.Arguments=qe.Array,nn("keys"),nn("values"),nn("entries");var un=L("iterator"),cn=L("toStringTag"),hn=an.values;for(var ln in Ze){var fn=M[ln],pn=fn&&fn.prototype;if(pn){if(pn[un]!==hn)try{G(pn,un,hn)}catch(Au){pn[un]=hn}if(pn[cn]||G(pn,cn,ln),Ze[ln])for(var dn in an)if(pn[dn]!==an[dn])try{G(pn,dn,an[dn])}catch(Au){pn[dn]=an[dn]}}}function vn(t,e,n){for(var r in e)Et(t,r,e[r],n);return t}function yn(t){var e=Dt(t),n=W.f;U&&e&&!e[In]&&n(e,In,{configurable:!0,get:function(){return this}})}function gn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function mn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function bn(t){return void 0!==t&&(qe.Array===t||Cn[Sn]===t)}function _n(r,i,t){if(gn(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function wn(t){if(null!=t)return t[Nn]||t["@@iterator"]||qe[Ct(t)]}function En(e,t,n,r){try{return r?t(k(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&k(i.call(e)),t}}var Tn=M.Promise,In=L("species"),Sn=L("iterator"),Cn=Array.prototype,Nn=L("iterator"),An=I(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=_n(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=wn(t)))throw TypeError("Target is not iterable");if(bn(s)){for(a=0,u=xt(t.length);a<u;a++)if((c=r?f(k(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=En(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),kn=L("iterator"),Rn=!1;try{var On=0,Pn={next:function(){return{done:!!On++}},return:function(){Rn=!0}};Pn[kn]=function(){return this},Array.from(Pn,function(){throw 2})}catch(Au){}function Dn(t,e){if(!e&&!Rn)return!1;var n=!1;try{var r={};r[kn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function xn(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[Bn])?e:gn(n)}function Ln(t){var e;$n.hasOwnProperty(t)&&(e=$n[t],delete $n[t],e())}function Mn(t){return function(){Ln(t)}}function Fn(t){Ln(t.data)}function Un(t){M.postMessage(t+"",Hn.protocol+"//"+Hn.host)}var jn,Vn,qn,Bn=L("species"),Wn=Dt("navigator","userAgent")||"",Gn=/(iphone|ipod|ipad).*applewebkit/i.test(Wn),Hn=M.location,zn=M.setImmediate,Kn=M.clearImmediate,Qn=M.process,Yn=M.MessageChannel,Xn=M.Dispatch,Jn=0,$n={},Zn="onreadystatechange";zn&&Kn||(zn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return $n[++Jn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},jn(Jn),Jn},Kn=function(t){delete $n[t]},"process"==_t(Qn)?jn=function(t){Qn.nextTick(Mn(t))}:Xn&&Xn.now?jn=function(t){Xn.now(Mn(t))}:Yn&&!Gn?(qn=(Vn=new Yn).port2,Vn.port1.onmessage=Fn,jn=_n(qn.postMessage,qn,1)):!M.addEventListener||"function"!=typeof postMessage||M.importScripts||C(Un)||"file:"===Hn.protocol?jn=Zn in A("script")?function(t){ke.appendChild(A("script"))[Zn]=function(){ke.removeChild(this),Ln(t)}}:function(t){setTimeout(Mn(t),0)}:(jn=Un,M.addEventListener("message",Fn,!1)));var tr,er,nr,rr,ir,or,sr,ar,ur={set:zn,clear:Kn},cr=Zt.f,hr=ur.set,lr=M.MutationObserver||M.WebKitMutationObserver,fr=M.process,pr=M.Promise,dr="process"==_t(fr),vr=cr(M,"queueMicrotask"),yr=vr&&vr.value;yr||(tr=function(){var t,e;for(dr&&(t=fr.domain)&&t.exit();er;){e=er.fn,er=er.next;try{e()}catch(t){throw er?rr():nr=void 0,t}}nr=void 0,t&&t.enter()},rr=dr?function(){fr.nextTick(tr)}:lr&&!Gn?(ir=!0,or=document.createTextNode(""),new lr(tr).observe(or,{characterData:!0}),function(){or.data=ir=!ir}):pr&&pr.resolve?(sr=pr.resolve(void 0),ar=sr.then,function(){ar.call(sr,tr)}):function(){hr.call(M,tr)});function gr(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=gn(n),this.reject=gn(r)}function mr(t,e){if(k(t),N(e)&&e.constructor===t)return e;var n=Tr.f(t);return(0,n.resolve)(e),n.promise}function br(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var _r,wr,Er=yr||function(t){var e={fn:t,next:void 0};nr&&(nr.next=e),er||(er=e,rr()),nr=e},Tr={f:function(t){return new gr(t)}},Ir=M.process,Sr=Ir&&Ir.versions,Cr=Sr&&Sr.v8;Cr?wr=(_r=Cr.split("."))[0]+_r[1]:Wn&&(!(_r=Wn.match(/Edge\/(\d+)/))||74<=_r[1])&&(_r=Wn.match(/Chrome\/(\d+)/))&&(wr=_r[1]);function Nr(t){var e;return!(!N(t)||"function"!=typeof(e=t.then))&&e}function Ar(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Er(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&ri(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Gr("Promise-chain cycle")):(i=Nr(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&ei(l,f)}))}function kr(t,e,n){var r,i;Jr?((r=Hr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},(i=M["on"+t])?i(r):t===$r&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Rr(e,n,r,i){return function(t){e(n,r,t,i)}}function Or(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Ar(t,e,!0))}var Pr,Dr,xr,Lr,Mr=wr&&+wr,Fr=ur.set,Ur=L("species"),jr="Promise",Vr=wt.get,qr=wt.set,Br=wt.getterFor(jr),Wr=Tn,Gr=M.TypeError,Hr=M.document,zr=M.process,Kr=Dt("fetch"),Qr=Tr.f,Yr=Qr,Xr="process"==_t(zr),Jr=!!(Hr&&Hr.createEvent&&M.dispatchEvent),$r="unhandledrejection",Zr=ve(jr,function(){if(!(dt(Wr)!==String(Wr))){if(66===Mr)return!0;if(!Xr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Mr&&/native code/.test(Wr))return!1;function t(t){t(function(){},function(){})}var e=Wr.resolve(1);return(e.constructor={})[Ur]=t,!(e.then(function(){})instanceof t)}),ti=Zr||!Dn(function(t){Wr.all(t).catch(function(){})}),ei=function(n,r){Fr.call(M,function(){var t,e=r.value;if(ni(r)&&(t=br(function(){Xr?zr.emit("unhandledRejection",e,n):kr($r,n,e)}),r.rejection=Xr||ni(r)?2:1,t.error))throw t.value})},ni=function(t){return 1!==t.rejection&&!t.parent},ri=function(t,e){Fr.call(M,function(){Xr?zr.emit("rejectionHandled",t):kr("rejectionhandled",t,e.value)})},ii=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw Gr("Promise can't be resolved itself");var i=Nr(t);i?Er(function(){var e={done:!1};try{i.call(t,Rr(ii,n,e,r),Rr(Or,n,e,r))}catch(t){Or(n,e,t,r)}}):(r.value=t,r.state=1,Ar(n,r,!1))}catch(t){Or(n,{done:!1},t,r)}}};Zr&&(Wr=function(t){mn(this,Wr,jr),gn(t),Pr.call(this);var e=Vr(this);try{t(Rr(ii,this,e),Rr(Or,this,e))}catch(t){Or(this,e,t)}},(Pr=function(){qr(this,{type:jr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=vn(Wr.prototype,{then:function(t,e){var n=Br(this),r=Qr(xn(this,Wr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Xr?zr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ar(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Dr=function(){var t=new Pr,e=Vr(t);this.promise=t,this.resolve=Rr(ii,t,e),this.reject=Rr(Or,t,e)},Tr.f=Qr=function(t){return t===Wr||t===xr?new Dr:Yr(t)},"function"==typeof Tn&&(Lr=Tn.prototype.then,Et(Tn.prototype,"then",function(t,e){var n=this;return new Wr(function(t,e){Lr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Kr&&jt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return mr(Wr,Kr.apply(M,arguments))}}))),jt({global:!0,wrap:!0,forced:Zr},{Promise:Wr}),xe(Wr,jr,!1),yn(jr),xr=Dt(jr),jt({target:jr,stat:!0,forced:Zr},{reject:function(t){var e=Qr(this);return e.reject.call(void 0,t),e.promise}}),jt({target:jr,stat:!0,forced:Zr},{resolve:function(t){return mr(this,t)}}),jt({target:jr,stat:!0,forced:ti},{all:function(t){var a=this,e=Qr(a),u=e.resolve,c=e.reject,n=br(function(){var r=gn(a.resolve),i=[],o=0,s=1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Qr(n),i=r.reject,e=br(function(){var e=gn(n.resolve);An(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),jt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Tr.f(a),u=e.resolve,n=e.reject,r=br(function(){var r=gn(a.resolve),i=[],o=0,s=1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var oi=!!Tn&&C(function(){Tn.prototype.finally.call({then:function(){}},function(){})});jt({target:"Promise",proto:!0,real:!0,forced:oi},{finally:function(e){var n=xn(this,Dt("Promise")),t="function"==typeof e;return this.then(t?function(t){return mr(n,e()).then(function(){return t})}:e,t?function(t){return mr(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Tn||Tn.prototype.finally||Et(Tn.prototype,"finally",Dt("Promise").prototype.finally);te.Promise;var si=wt.set,ai=wt.getterFor("AggregateError"),ui=function(t,e){var n=this;if(!(n instanceof ui))return new ui(t,e);We&&(n=We(new Error(e),_e(n)));var r=[];return An(t,r.push,r),U?si(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&G(n,"message",String(e)),n};ui.prototype=Ue(Error.prototype,{constructor:O(5,ui),message:O(5,""),name:O(5,"AggregateError")}),U&&W.f(ui.prototype,"errors",{get:function(){return ai(this).errors},configurable:!0}),jt({global:!0},{AggregateError:ui}),jt({target:"Promise",stat:!0},{try:function(t){var e=Tr.f(this),n=br(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var ci="No one promise resolved";jt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Tr.f(u),c=e.resolve,h=e.reject,n=br(function(){var r=gn(u.resolve),i=[],o=0,s=1,a=!1;An(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(Dt("AggregateError"))(i,ci)))})}),--s||h(new(Dt("AggregateError"))(i,ci))});return n.error&&h(n.value),e.promise}});function hi(t,e){var n;return di(t)&&("function"==typeof(n=t.constructor)&&(n===Array||di(n.prototype))||N(n)&&null===(n=n[vi]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function li(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=Vt(t),a=Jt(s),u=_n(e,n,3),c=xt(a.length),h=0,l=r||hi,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:yi.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function fi(t){throw t}function pi(t,e){if(D(bi,t))return bi[t];var n=[][t],r=!!D(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=D(e,0)?e[0]:fi,o=D(e,1)?e[1]:void 0;return bi[t]=!!n&&!C(function(){if(r&&!U)return 1;var t={length:-1};r?mi(t,1,{enumerable:!0,get:fi}):t[1]=1,n.call(t,i,o)})}var di=Array.isArray||function(t){return"Array"==_t(t)},vi=L("species"),yi=[].push,gi={forEach:li(0),map:li(1),filter:li(2),some:li(3),every:li(4),find:li(5),findIndex:li(6)},mi=Object.defineProperty,bi={},_i=gi.find,wi="find",Ei=!0,Ti=pi(wi);wi in[]&&Array(1)[wi](function(){Ei=!1}),jt({target:"Array",proto:!0,forced:Ei||!Ti},{find:function(t,e){return _i(this,t,1<arguments.length?e:void 0)}}),nn(wi);function Ii(t,e,n){return _n(Si,M[t].prototype[e],n)}var Si=Function.call,Ci=(Ii("Array","find"),gi.findIndex),Ni="findIndex",Ai=!0,ki=pi(Ni);Ni in[]&&Array(1)[Ni](function(){Ai=!1}),jt({target:"Array",proto:!0,forced:Ai||!ki},{findIndex:function(t,e){return Ci(this,t,1<arguments.length?e:void 0)}}),nn(Ni);function Ri(t,e,n){var r=R(e);r in t?W.f(t,r,O(0,n)):t[r]=n}Ii("Array","findIndex");var Oi=!Dn(function(t){Array.from(t)});jt({target:"Array",stat:!0,forced:Oi},{from:function(t,e,n){var r,i,o,s,a,u,c=Vt(t),h="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,p=void 0!==f,d=wn(c),v=0;if(p&&(f=_n(f,2<l?n:void 0,2)),null==d||h==Array&&bn(d))for(i=new h(r=xt(c.length));v<r;v++)u=p?f(c[v],v):c[v],Ri(i,v,u);else for(a=(s=d.call(c)).next,i=new h;!(o=a.call(s)).done;v++)u=p?En(s,f,[o.value,v],!0):o.value,Ri(i,v,u);return i.length=v,i}});te.Array.from;var Pi,Di,xi=gi.some,Li=!!(Di=[]["some"])&&C(function(){Di.call(null,Pi||function(){throw 1},1)}),Mi=pi("some");jt({target:"Array",proto:!0,forced:!Li||!Mi},{some:function(t,e){return xi(this,t,1<arguments.length?e:void 0)}});Ii("Array","some");function Fi(t){return N(t)&&D(Ji,Ct(t))}var Ui,ji="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Vi=W.f,qi=M.Int8Array,Bi=qi&&qi.prototype,Wi=M.Uint8ClampedArray,Gi=Wi&&Wi.prototype,Hi=qi&&_e(qi),zi=Bi&&_e(Bi),Ki=Object.prototype,Qi=(Ki.isPrototypeOf,L("toStringTag")),Yi=x("TYPED_ARRAY_TAG"),Xi=ji&&!!We&&"Opera"!==Ct(M.opera),Ji={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Ui in Ji)M[Ui]||(Xi=!1);if((!Xi||"function"!=typeof Hi||Hi===Function.prototype)&&(Hi=function(){throw TypeError("Incorrect invocation")},Xi))for(Ui in Ji)M[Ui]&&We(M[Ui],Hi);if((!Xi||!zi||zi===Ki)&&(zi=Hi.prototype,Xi))for(Ui in Ji)M[Ui]&&We(M[Ui].prototype,zi);if(Xi&&_e(Gi)!==zi&&We(Gi,zi),U&&!D(zi,Qi))for(Ui in Vi(zi,Qi,{get:function(){return N(this)?this[Yi]:void 0}}),Ji)M[Ui]&&G(M[Ui],Yi,Ui);function $i(){return ro.call(so(this))}var Zi=function(t){if(Fi(t))return t;throw TypeError("Target is not a typed array")},to=function(t,e,n){if(U){if(n)for(var r in Ji){var i=M[r];i&&D(i.prototype,t)&&delete i.prototype[t]}zi[t]&&!n||Et(zi,t,!n&&Xi&&Bi[t]||e)}},eo=L("iterator"),no=M.Uint8Array,ro=an.values,io=an.keys,oo=an.entries,so=Zi,ao=to,uo=no&&no.prototype[eo],co=!!uo&&("values"==uo.name||null==uo.name);ao("entries",function(){return oo.call(so(this))}),ao("keys",function(){return io.call(so(this))}),ao("values",$i,!co),ao(eo,$i,!co);var ho=Object.assign,lo=Object.defineProperty,fo=!ho||C(function(){if(U&&1!==ho({b:1},ho(lo({},"a",{enumerable:!0,get:function(){lo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ho({},t)[n]||Ne(ho({},e)).join("")!=r})?function(t,e){for(var n=Vt(t),r=arguments.length,i=1,o=ue.f,s=Yt.f;i<r;)for(var a,u=Jt(arguments[i++]),c=o?Ne(u).concat(o(u)):Ne(u),h=c.length,l=0;l<h;)a=c[l++],U&&!s.call(u,a)||(n[a]=u[a]);return n}:ho;jt({target:"Object",stat:!0,forced:Object.assign!==fo},{assign:fo});te.Object.assign;function po(a){return function(t){for(var e,n=Ot(t),r=Ne(n),i=r.length,o=0,s=[];o<i;)e=r[o++],U&&!vo.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var vo=Yt.f,yo={entries:po(!0),values:po(!1)},go=yo.entries;jt({target:"Object",stat:!0},{entries:function(t){return go(t)}});te.Object.entries;var mo=yo.values;jt({target:"Object",stat:!0},{values:function(t){return mo(t)}});te.Object.values;function bo(t){if(N(e=t)&&(void 0!==(n=e[wo])?n:"RegExp"==_t(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function _o(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Eo]=!1,"/./"[e](n)}catch(t){}}return!1}var wo=L("match"),Eo=L("match");jt({target:"String",proto:!0,forced:!_o("includes")},{includes:function(t,e){return!!~String(kt(this)).indexOf(bo(t),1<arguments.length?e:void 0)}});Ii("String","includes");var To,Io=Zt.f,So="".startsWith,Co=Math.min,No=_o("startsWith"),Ao=!(No||(!(To=Io(String.prototype,"startsWith"))||To.writable));jt({target:"String",proto:!0,forced:!Ao&&!No},{startsWith:function(t,e){var n=String(kt(this));bo(t);var r=xt(Co(1<arguments.length?e:void 0,n.length)),i=String(t);return So?So.call(n,i,r):n.slice(r,r+i.length)===i}});Ii("String","startsWith");jt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(kt(this)),n="",r=At(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Ii("String","repeat");var ko,Ro=L("species"),Oo=L("isConcatSpreadable"),Po=9007199254740991,Do="Maximum allowed index exceeded",xo=51<=Mr||!C(function(){var t=[];return t[Oo]=!1,t.concat()[0]!==t}),Lo=(ko="concat",51<=Mr||!C(function(){var t=[];return(t.constructor={})[Ro]=function(){return{foo:1}},1!==t[ko](Boolean).foo}));jt({target:"Array",proto:!0,forced:!xo||!Lo},{concat:function(t){for(var e,n,r,i=Vt(this),o=hi(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!N(t))return!1;var e=t[Oo];return void 0!==e?!!e:di(t)}(r=-1===a?i:arguments[a])){if(n=xt(r.length),Po<s+n)throw TypeError(Do);for(e=0;e<n;e++,s++)e in r&&Ri(o,s,r[e])}else{if(Po<=s)throw TypeError(Do);Ri(o,s++,r)}return o.length=s,o}});function Mo(t){var e=te.Symbol||(te.Symbol={});D(e,t)||Ko(e,t,{value:zo.f(t)})}function Fo(t,e){var n=us[t]=Ue(ns[Jo]);return Zo(n,{type:Xo,tag:t,description:e}),U||(n.description=e),n}function Uo(e,t){k(e);var n=Ot(t),r=Ne(n).concat(bs(n));return Qo(r,function(t){U&&!ms.call(n,t)||gs(e,t,n[t])}),e}function jo(t,e){var n=Ot(t),r=R(e,!0);if(n!==es||!D(us,r)||D(cs,r)){var i=is(n,r);return!i||!D(us,r)||D(n,Yo)&&n[Yo][r]||(i.enumerable=!0),i}}function Vo(t){var e=ss(Ot(t)),n=[];return Qo(e,function(t){D(us,t)||D(mt,t)||n.push(t)}),n}var qo,Bo=ae.f,Wo={}.toString,Go="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ho={f:function(t){return Go&&"[object Window]"==Wo.call(t)?function(t){try{return Bo(t)}catch(t){return Go.slice()}}(t):Bo(Ot(t))}},zo={f:L},Ko=W.f,Qo=gi.forEach,Yo=ot("hidden"),Xo="Symbol",Jo="prototype",$o=L("toPrimitive"),Zo=wt.set,ts=wt.getterFor(Xo),es=Object[Jo],ns=M.Symbol,rs=Dt("JSON","stringify"),is=Zt.f,os=W.f,ss=Ho.f,as=Yt.f,us=K("symbols"),cs=K("op-symbols"),hs=K("string-to-symbol-registry"),ls=K("symbol-to-string-registry"),fs=K("wks"),ps=M.QObject,ds=!ps||!ps[Jo]||!ps[Jo].findChild,vs=U&&C(function(){return 7!=Ue(os({},"a",{get:function(){return os(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=is(es,e);r&&delete es[e],os(t,e,n),r&&t!==es&&os(es,e,r)}:os,ys=$?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof ns},gs=function(t,e,n){t===es&&gs(cs,e,n),k(t);var r=R(e,!0);return k(n),D(us,r)?(n.enumerable?(D(t,Yo)&&t[Yo][r]&&(t[Yo][r]=!1),n=Ue(n,{enumerable:O(0,!1)})):(D(t,Yo)||os(t,Yo,O(1,{})),t[Yo][r]=!0),vs(t,r,n)):os(t,r,n)},ms=function(t){var e=R(t,!0),n=as.call(this,e);return!(this===es&&D(us,e)&&!D(cs,e))&&(!(n||!D(this,e)||!D(us,e)||D(this,Yo)&&this[Yo][e])||n)},bs=function(t){var e=t===es,n=ss(e?cs:Ot(t)),r=[];return Qo(n,function(t){!D(us,t)||e&&!D(es,t)||r.push(us[t])}),r};J||(Et((ns=function(t){if(this instanceof ns)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=x(e),r=function(t){this===es&&r.call(cs,t),D(this,Yo)&&D(this[Yo],n)&&(this[Yo][n]=!1),vs(this,n,O(1,t))};return U&&ds&&vs(es,n,{configurable:!0,set:r}),Fo(n,e)})[Jo],"toString",function(){return ts(this).tag}),Et(ns,"withoutSetter",function(t){return Fo(x(t),t)}),Yt.f=ms,W.f=gs,Zt.f=jo,ae.f=Ho.f=Vo,ue.f=bs,zo.f=function(t){return Fo(L(t),t)},U&&(os(ns[Jo],"description",{configurable:!0,get:function(){return ts(this).description}}),Et(es,"propertyIsEnumerable",ms,{unsafe:!0}))),jt({global:!0,wrap:!0,forced:!J,sham:!J},{Symbol:ns}),Qo(Ne(fs),function(t){Mo(t)}),jt({target:Xo,stat:!0,forced:!J},{for:function(t){var e=String(t);if(D(hs,e))return hs[e];var n=ns(e);return hs[e]=n,ls[n]=e,n},keyFor:function(t){if(!ys(t))throw TypeError(t+" is not a symbol");if(D(ls,t))return ls[t]},useSetter:function(){ds=!0},useSimple:function(){ds=!1}}),jt({target:"Object",stat:!0,forced:!J,sham:!U},{create:function(t,e){return void 0===e?Ue(t):Uo(Ue(t),e)},defineProperty:gs,defineProperties:Uo,getOwnPropertyDescriptor:jo}),jt({target:"Object",stat:!0,forced:!J},{getOwnPropertyNames:Vo,getOwnPropertySymbols:bs}),jt({target:"Object",stat:!0,forced:C(function(){ue.f(1)})},{getOwnPropertySymbols:function(t){return ue.f(Vt(t))}}),rs&&(qo=!J||C(function(){var t=ns();return"[null]"!=rs([t])||"{}"!=rs({a:t})||"{}"!=rs(Object(t))}),jt({target:"JSON",stat:!0,forced:qo},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((N(r=e)||void 0!==t)&&!ys(t))return di(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ys(e))return e}),i[1]=e,rs.apply(null,i)}})),ns[Jo][$o]||G(ns[Jo],$o,ns[Jo].valueOf),xe(ns,Xo),mt[Yo]=!0,Mo("asyncIterator");var _s,ws,Es,Ts,Is,Ss,Cs=W.f,Ns=M.Symbol;!U||"function"!=typeof Ns||"description"in Ns.prototype&&void 0===Ns().description||(_s={},Ft(ws=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof ws?new Ns(e):void 0===e?Ns():Ns(e);return""===e&&(_s[n]=!0),n},Ns),(Es=ws.prototype=Ns.prototype).constructor=ws,Ts=Es.toString,Is="Symbol(test)"==String(Ns("test")),Ss=/^Symbol\((.*)\)[^)]+$/,Cs(Es,"description",{configurable:!0,get:function(){var t=N(this)?this.valueOf():this,e=Ts.call(t);if(D(_s,t))return"";var n=Is?e.slice(7,-1):e.replace(Ss,"$1");return""===n?void 0:n}}),jt({global:!0,forced:!0},{Symbol:ws})),Mo("hasInstance"),Mo("isConcatSpreadable"),Mo("iterator"),Mo("match"),Mo("matchAll"),Mo("replace"),Mo("search"),Mo("species"),Mo("split"),Mo("toPrimitive"),Mo("toStringTag"),Mo("unscopables"),xe(Math,"Math",!0),xe(M.JSON,"JSON",!0);te.Symbol;Mo("asyncDispose"),Mo("dispose"),Mo("observable"),Mo("patternMatch"),Mo("replaceAll");zo.f("iterator");function As(u,t,e){function n(t){var n=p[t];Et(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!N(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,s,a,c=-1!==u.indexOf("Map"),h=-1!==u.indexOf("Weak"),l=c?"set":"add",f=M[u],p=f&&f.prototype,d=f,v={};return ve(u,"function"!=typeof f||!(h||p.forEach&&!C(function(){(new f).entries().next()})))?(d=e.getConstructor(t,u,c,l),Os.REQUIRED=!0):ve(u,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=C(function(){r.has(1)}),s=Dn(function(t){new f(t)}),a=!h&&C(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),s||(((d=t(function(t,e){mn(t,d,u);var n,r,i,o,s,a=(n=new f,r=t,i=d,We&&"function"==typeof(o=r.constructor)&&o!==i&&N(s=o.prototype)&&s!==i.prototype&&We(n,s),n);return null!=e&&An(e,a[l],a,c),a})).prototype=p).constructor=d),(o||a)&&(n("delete"),n("has"),c&&n("get")),(a||i)&&n(l),h&&p.clear&&delete p.clear),v[u]=d,jt({global:!0,forced:d!=f},v),xe(d,u),h||e.setStrong(d,u,c),d}function ks(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return gn(this),(r=void 0!==u)&&gn(u),null==t?new this:(i=[],r?(o=0,s=_n(u,2<a?n:void 0,2),An(t,function(t){i.push(s(t,o++))})):An(t,i.push,i),new this(i))}var Rs=!C(function(){return Object.isExtensible(Object.preventExtensions({}))}),Os=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=W.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!N(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!D(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!D(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Rs&&s.REQUIRED&&o(t)&&!D(t,r)&&n(t),t}};mt[r]=!0}),Ps=(Os.REQUIRED,Os.fastKey,Os.getWeakData,Os.onFreeze,W.f),Ds=Os.fastKey,xs=wt.set,Ls=wt.getterFor,Ms={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=a(t),s=u(t,e);return s?s.value=n:(o.last=s={index:i=Ds(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),U?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){mn(t,s,n),xs(t,{type:n,index:Ue(null),first:void 0,last:void 0,size:0}),U||(t.size=0),null!=e&&An(e,t[i],t,r)}),a=Ls(n),u=function(t,e){var n,r=a(t),i=Ds(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return vn(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,U?t.size=0:this.size=0},delete:function(t){var e,n,r=a(this),i=u(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),U?r.size--:this.size--),!!i},forEach:function(t,e){for(var n,r=a(this),i=_n(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),vn(s.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),U&&Ps(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Ls(e),o=Ls(r);Fe(t,e,function(t,e){xs(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),yn(e)}};As("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ms),te.Map;jt({target:"Map",stat:!0},{from:ks});function Fs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}jt({target:"Map",stat:!0},{of:Fs});function Us(){for(var t,e=k(this),n=gn(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}jt({target:"Map",proto:!0,real:!0,forced:F},{deleteAll:function(){return Us.apply(this,arguments)}});function js(t){return Map.prototype.entries.call(t)}jt({target:"Map",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return!An(r,function(t,e){if(!i(e,t,n))return An.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop(e)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{findKey:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;gn(n);var i=gn(r.has),o=gn(r.get),s=gn(r.set);return An(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});jt({target:"Map",proto:!0,real:!0,forced:F},{includes:function(i){return An(js(k(this)),function(t,e){if((n=e)===(r=i)||n!=n&&r!=r)return An.stop();var n,r},void 0,!0,!0).stopped}}),jt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;gn(e);var r=gn(n.set);return An(t,function(t){r.call(n,e(t),t)}),n}}),jt({target:"Map",proto:!0,real:!0,forced:F},{keyOf:function(n){return An(js(k(this)),function(t,e){if(e===n)return An.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapKeys:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapValues:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Map"))),s=gn(o.set);return An(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{merge:function(t){for(var e=k(this),n=gn(e.set),r=0;r<arguments.length;)An(arguments[r++],n,e,!0);return e}}),jt({target:"Map",proto:!0,real:!0,forced:F},{reduce:function(n,t){var r=k(this),e=js(r),i=arguments.length<2,o=i?void 0:t;if(gn(n),An(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=js(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t,e){if(i(e,t,n))return An.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{update:function(t,e,n){var r=k(this),i=arguments.length;gn(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):gn(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}});function Vs(t,e,n){var r,i=k(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}jt({target:"Map",proto:!0,real:!0,forced:F},{upsert:Vs}),jt({target:"Map",proto:!0,real:!0,forced:F},{updateOrInsert:Vs});As("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ms),te.Set;jt({target:"Set",stat:!0},{from:ks}),jt({target:"Set",stat:!0},{of:Fs});jt({target:"Set",proto:!0,real:!0,forced:F},{addAll:function(){return function(){for(var t=k(this),e=gn(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{deleteAll:function(){return Us.apply(this,arguments)}});function qs(t){return Set.prototype.values.call(t)}jt({target:"Set",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return!An(r,function(t){if(!i(t,t,n))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{difference:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e),r=gn(n.delete);return An(t,function(t){r.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Set"))),s=gn(o.add);return An(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t){if(i(t,t,n))return An.stop(t)},void 0,!1,!0).result}}),jt({target:"Set",proto:!0,real:!0,forced:F},{intersection:function(t){var e=k(this),n=new(xn(e,Dt("Set"))),r=gn(e.has),i=gn(n.add);return An(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isDisjointFrom:function(t){var e=k(this),n=gn(e.has);return!An(t,function(t){if(!0===n.call(e,t))return An.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSubsetOf:function(t){var e=function(t){var e=wn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return k(e.call(t))}(this),n=k(t),r=n.has;return"function"!=typeof r&&(n=new(Dt("Set"))(t),r=gn(n.has)),!An(e,function(t){if(!1===r.call(n,t))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSupersetOf:function(t){var e=k(this),n=gn(e.has);return!An(t,function(t){if(!1===n.call(e,t))return An.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{join:function(t){var e=k(this),n=qs(e),r=void 0===t?",":String(t),i=[];return An(n,i.push,i,!1,!0),i.join(r)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{map:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3),o=new(xn(n,Dt("Set"))),s=gn(o.add);return An(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{reduce:function(e,t){var n=k(this),r=qs(n),i=arguments.length<2,o=i?void 0:t;if(gn(e),An(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=qs(n),i=_n(t,1<arguments.length?e:void 0,3);return An(r,function(t){if(i(t,t,n))return An.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{symmetricDifference:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e),r=gn(n.delete),i=gn(n.add);return An(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{union:function(t){var e=k(this),n=new(xn(e,Dt("Set")))(e);return An(t,gn(n.add),n),n}});var Bs=Math.floor;jt({target:"Number",stat:!0},{isInteger:function(t){return!N(t)&&isFinite(t)&&Bs(t)===t}});te.Number.isInteger;var Ws=function(t,e){return(Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Gs(t,e){function n(){this.constructor=t}Ws(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Hs=function(){return(Hs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function zs(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Ks(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Qs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Xs(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ys(arguments[e]));return t}function Js(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function $s(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Zs(t){try{return ra.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ta={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ea=function(t,e){if(!t)throw na(e)},na=function(t){return new Error("Firebase Database ("+ta.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},ra={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,h,l=o<<2|s>>4;r.push(l),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(h=a<<6&192|u,r.push(h)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ia(t){return oa(void 0,t)}function oa(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=oa(t[n],e[n]));return t}var sa=(aa.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},aa);function aa(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function ua(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ca(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ua())}function ha(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function la(){return!0===ta.NODE_ADMIN}var fa,pa="FirebaseError",da=(Gs(va,fa=Error),va);function va(t,e){var n=fa.call(this,e)||this;return n.code=t,n.name=pa,Object.setPrototypeOf(n,va.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,ya.prototype.create),n}var ya=(ga.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(ma,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new da(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},ga);function ga(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var ma=/\{\$([^}]+)}/g;function ba(t){return JSON.parse(t)}function _a(t){return JSON.stringify(t)}function wa(t){var e={},n={},r={},i="";try{var o=t.split("."),e=ba(Zs(o[0])||""),n=ba(Zs(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Ea(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ta(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Ia(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sa(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var Ca=(Na.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Na.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Na.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Na.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Na);function Na(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Aa(t,e){var n=new ka(t,e);return n.subscribe.bind(n)}var ka=(Ra.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Ra.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Ra.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Ra.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Oa),void 0===r.error&&(r.error=Oa),void 0===r.complete&&(r.complete=Oa);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},Ra.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Ra.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Ra.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Ra.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Ra);function Ra(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Oa(){}function Pa(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Da(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function xa(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Da(t,e,r)+"must be a valid function.")}function La(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Da(t,e,r)+"must be a valid context object.")}function Ma(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Fa=(Ua.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Ua.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Ua.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Ua);function Ua(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ja="[DEFAULT]",Va=(qa.prototype.get=function(t){void 0===t&&(t=ja);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new sa;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},qa.prototype.getImmediate=function(t){var e=Hs({identifier:ja,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},qa.prototype.getComponent=function(){return this.component},qa.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ja)}catch(t){}try{for(var r=Qs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ys(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},qa.prototype.clearInstance=function(t){void 0===t&&(t=ja),this.instancesDeferred.delete(t),this.instances.delete(t)},qa.prototype.delete=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},qa.prototype.isComponentSet=function(){return null!=this.component},qa.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ja?void 0:e),this.instances.set(t,n)),n||null},qa.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ja},qa);function qa(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Ba,Wa=(Ga.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ga.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ga.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Va(t,this);return this.providers.set(t,e),e},Ga.prototype.getProviders=function(){return Array.from(this.providers.values())},Ga);function Ga(t){this.name=t,this.providers=new Map}function Ha(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var za,Ka,Qa=[];(Ka=za=za||{})[Ka.DEBUG=0]="DEBUG",Ka[Ka.VERBOSE=1]="VERBOSE",Ka[Ka.INFO=2]="INFO",Ka[Ka.WARN=3]="WARN",Ka[Ka.ERROR=4]="ERROR",Ka[Ka.SILENT=5]="SILENT";function Ya(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Za[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ha(["["+i+"]  "+t.name+":"],n))}}var Xa,Ja={debug:za.DEBUG,verbose:za.VERBOSE,info:za.INFO,warn:za.WARN,error:za.ERROR,silent:za.SILENT},$a=za.INFO,Za=((Ba={})[za.DEBUG]="log",Ba[za.VERBOSE]="log",Ba[za.INFO]="info",Ba[za.WARN]="warn",Ba[za.ERROR]="error",Ba),tu=(Object.defineProperty(eu.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in za))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),eu.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ja[t]:t},Object.defineProperty(eu.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(eu.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),eu.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ha([this,za.DEBUG],t)),this._logHandler.apply(this,Ha([this,za.DEBUG],t))},eu.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ha([this,za.VERBOSE],t)),this._logHandler.apply(this,Ha([this,za.VERBOSE],t))},eu.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ha([this,za.INFO],t)),this._logHandler.apply(this,Ha([this,za.INFO],t))},eu.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ha([this,za.WARN],t)),this._logHandler.apply(this,Ha([this,za.WARN],t))},eu.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ha([this,za.ERROR],t)),this._logHandler.apply(this,Ha([this,za.ERROR],t))},eu);function eu(t){this.name=t,this._logLevel=$a,this._logHandler=Ya,this._userLogHandler=null,Qa.push(this)}function nu(e){Qa.forEach(function(t){t.setLogLevel(e)})}var ru,iu=((Xa={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Xa["bad-app-name"]="Illegal App name: '{$appName}",Xa["duplicate-app"]="Firebase App named '{$appName}' already exists",Xa["app-deleted"]="Firebase App named '{$appName}' already deleted",Xa["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Xa["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Xa),ou=new ya("app","Firebase",iu),su="@firebase/app",au="[DEFAULT]",uu=((ru={})[su]="fire-core",ru["@firebase/analytics"]="fire-analytics",ru["@firebase/auth"]="fire-auth",ru["@firebase/database"]="fire-rtdb",ru["@firebase/functions"]="fire-fn",ru["@firebase/installations"]="fire-iid",ru["@firebase/messaging"]="fire-fcm",ru["@firebase/performance"]="fire-perf",ru["@firebase/remote-config"]="fire-rc",ru["@firebase/storage"]="fire-gcs",ru["@firebase/firestore"]="fire-fst",ru["fire-js"]="fire-js",ru["firebase-wrapper"]="fire-js-all",ru),cu=new tu("@firebase/app"),hu=(Object.defineProperty(lu.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(lu.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(lu.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),lu.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},lu.prototype._getService=function(t,e){return void 0===e&&(e=au),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},lu.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=au),this.container.getProvider(t).clearInstance(e)},lu.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){cu.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},lu.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},lu.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ou.create("app-deleted",{appName:this.name_})},lu);function lu(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ia(t),this.container=new Wa(e.name),this._addComponent(new Fa("app",function(){return o},"PUBLIC"));try{for(var s=Qs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}hu.prototype.name&&hu.prototype.options||hu.prototype.delete||console.log("dc");var fu="7.15.4";function pu(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=au);var r=n.name;if("string"!=typeof r||!r)throw ou.create("bad-app-name",{appName:String(r)});if(Ea(c,r))throw ou.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=uu[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void cu.warn(a.join(" "))}p(new Fa(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:nu,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ou.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Qa;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Ja[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:za[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:fu,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!Ea(c,t=t||au))throw ou.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r,i=n.name;if(h.has(i))return cu.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw ou.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&oa(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=Qs(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var du,vu=function t(){var e=pu(hu);return e.INTERNAL=Hs(Hs({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){oa(e,t)},createSubscribe:Aa,ErrorFactory:ya,deepExtend:oa}),e}(),yu=(gu.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},gu);function gu(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(cu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(du=self.firebase.SDK_VERSION)&&0<=du.indexOf("LITE")&&cu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var mu=vu.initializeApp;vu.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&cu.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),mu.apply(void 0,t)};var bu,_u,zl=vu;(bu=zl).INTERNAL.registerComponent(new Fa("platform-logger",function(t){return new yu(t)},"PRIVATE")),bu.registerVersion(su,"0.6.6",_u),bu.registerVersion("fire-js","");zl.registerVersion("firebase","7.15.4","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},s.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Oa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Oa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==n(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function a(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=I+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(I.length),t.message,t.serverResponse):null}e(w,Error),w.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.v()};var T,I="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function O(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}T=N("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(R,k),R.prototype.name="AssertionError",P.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function H(t){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var K,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){K=ot;break t}}K=""}function st(t){return nt(K,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===It&&e||"",this.b=Tt}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===Tt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(wt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(It,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Tt={},It={};function St(t,e){this.a=t===Rt&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Rt,t))}var kt={},Rt={};function Ot(){this.a="",this.b=Dt}function Pt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Dt?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Ot.prototype.ra=!0,Ot.prototype.qa=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Ot;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=s;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Gt=Wt||Bt,Ht=st("Gecko")&&!(nt(K.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),zt=nt(K.toLowerCase(),"webkit")&&!st("Edge");function Kt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Vt=K,Ht?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):zt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){var Xt=Kt();if(null!=Xt&&Xt>parseFloat(Qt)){jt=String(Xt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Jt=l.document&&Bt?Kt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!te&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ft(a.name),'"'),a.type&&(s.push(' type="',Ft(a.type),'"'),lt(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=ae(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):ne(s,a)),2<i.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!d(o)||y(o)&&0<o.nodeType?r(o):U(function(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}(o)?z(o):o,r)}}(o,s,i),s}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e,n=ae(document,"IFRAME");n.style.display="none",t=n,e=new mt(It,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(Lt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function he(t,e){ie||function(){{var t;ie=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(pe)}):function(){var t=pe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||ce())(t):l.setImmediate(t)}}}(),le||(ie(),le=!0),fe.add(t,e)}var le=!1,fe=new x;function pe(){for(var t,e,n;n=e=void 0,n=null,(e=fe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}D(L,t)}le=!1}function de(t,e){if(this.a=ve,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ne(n,ye,t)},function(t){if(!(t instanceof xe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ne(n,ge,t)})}catch(t){Ne(this,ge,t)}}var ve=0,ye=2,ge=3;function me(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}me.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var be=new P(function(){return new me},function(t){t.reset()});function _e(t,e,n){var r=be.get();return r.g=t,r.b=e,r.f=n,r}function we(t){if(t instanceof de)return t;var e=new de(s);return Ne(e,ye,t),e}function Ee(n){return new de(function(t,e){e(n)})}function Te(t,e,n){Ae(t,e,n,null)||he(b(e,t))}function Ie(n){return new de(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Te(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Se(t,e){t.b||t.a!=ye&&t.a!=ge||ke(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ce(t,i,o,s){var e=_e(null,null,null);return e.a=new de(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof xe?r(t):n(e)}catch(t){r(t)}}:r}),Se(e.a.c=t,e),e.a}function Ne(t,e,n){var r,i;t.a==ve&&(t===n&&(e=ge,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ae(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,ke(t),e!=ge||n instanceof xe||(i=n,(r=t).g=!0,he(function(){r.g&&De.call(null,i)}))))}function Ae(t,e,n,r){if(t instanceof de)return Se(t,_e(e||s,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function ke(t){t.h||(t.h=!0,he(t.ec,t))}function Re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ge&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){De.call(null,t)}D(be,e)}function Pe(t,e,n){e==ye?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}de.prototype.then=function(t,e,n){return Ce(this,v(t)?t:null,v(e)?e:null,n)},de.prototype.$goog_Thenable=!0,(t=de.prototype).ma=function(t,e){return(t=_e(t,t,e)).c=!0,Se(this,t),this},t.o=function(t,e){return Ce(this,null,t,e)},t.cancel=function(t){var e;this.a==ve&&(e=new xe(t),he(function(){!function t(e,n){if(e.a==ve)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ve&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Re(r),Oe(r,o,ge,n)))}e.c=null}else Ne(e,ge,n)}(this,e)},this))},t.Yc=function(t){this.a=ve,Ne(this,ye,t)},t.Zc=function(t){this.a=ve,Ne(this,ge,t)},t.ec=function(){for(var t;t=Re(this);)Oe(this,t,this.a,this.i);this.h=!1};var De=ue;function xe(t){k.call(this,t)}function Le(){this.wa,this.na}e(xe,k);var Me=0;function Fe(t){var e;t.wa||(t.wa=!0,t.Ba(),0==Me)||(e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i))}Le.prototype.wa=!(xe.prototype.name="cancel"),Le.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Ue=Object.freeze||function(t){return t},je=!Bt||9<=Number(Jt),Ve=Bt&&!Zt("9"),qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Be(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function We(t,e){if(Be.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Be.prototype.preventDefault=function(){this.defaultPrevented=!0},e(We,Be);var Ge=Ue({2:"touch",3:"pen",4:"mouse"});We.prototype.preventDefault=function(){We.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ve)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},We.prototype.f=function(){return this.a};var He="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ke(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++ze,this.ua=this.Na=!1}function Qe(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Ye(t){this.src=t,this.a={},this.b=0}function Xe(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Ye.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Je(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Ke(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),Ze={};function tn(t,e,n,r,i){if(r&&r.once)nn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?dn(t,e,n,y(r)?!!r.capture:!!r,i):en(t,e,n,!1,r,i)}function en(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=hn(t);if(c||(t[$e]=c=new Ye(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=cn,r=a=je?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)qe||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?vn(t,e,n,y(r)?!!r.capture:!!r,i):en(t,e,n,!0,r,i)}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=fn(n),t&&t[He]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=Je(o=t.a[e],n,r,i))&&(Qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&hn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Je(e,n,r,i)),(n=-1<t?e[t]:null)&&on(n))}function on(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[He]?Xe(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hn(e))?(Xe(n,t),0==n.b&&(n.src=null,e[$e]=null)):Qe(t)))}function sn(t){return t in Ze?Ze[t]:Ze[t]="on"+t}function an(t,e,n,r){var i=!0;if((t=hn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=un(o,r),i=i&&!1!==o)}return i}function un(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&on(t),n.call(r,e)}function cn(t,e){if(t.ua)return!0;if(je)return un(t,new We(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new We(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=an(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=an(r[i],t,!1,e),n=n&&o}return n}function hn(t){return(t=t[$e])instanceof Ye?t:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(e){return v(e)?e:(e[ln]||(e[ln]=function(t){return e.handleEvent(t)}),e[ln])}function pn(){Le.call(this),this.u=new Ye(this),(this.Yb=this).eb=null}function dn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function vn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function yn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&Xe(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function gn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function mn(n){var r=null;return new de(function(t,e){-1==(r=gn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function bn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function wn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function En(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Tn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Tn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(pn,Le),pn.prototype[He]=!0,pn.prototype.addEventListener=function(t,e,n,r){tn(this,t,e,n,r)},pn.prototype.removeEventListener=function(t,e,n,r){rn(this,t,e,n,r)},pn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new Be(t,n):t instanceof Be?t.target=t.target||n:(s=t,lt(t=new Be(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=yn(o,r,!0,t)&&s;if(s=yn(o=t.b=n,r,!0,t)&&s,s=yn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=yn(o=t.b=e[i],r,!1,t)&&s;return s},pn.prototype.Ba=function(){if(pn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qe(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=wn.prototype).V=function(){En(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return En(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Tn(this.b,t)?this.b[t]:e},t.set=function(t,e){Tn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Sn?(this.h=void 0!==e?e:t.h,Cn(this,t.f),this.i=t.i,this.b=t.b,Nn(this,t.l),this.c=t.c,An(this,Kn(t.a)),this.g=t.g):t&&(n=String(t).match(In))?(this.h=!!e,Cn(this,n[1]||"",!0),this.i=Dn(n[2]||""),this.b=Dn(n[3]||"",!0),Nn(this,n[4]),this.c=Dn(n[5]||"",!0),An(this,n[6]||"",!0),this.g=Dn(n[7]||"")):(this.h=!!e,this.a=new qn(null,this.h))}function Cn(t,e,n){t.f=n?Dn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Nn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function An(t,e,n){var r,i;e instanceof qn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Bn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gn(this,e),zn(this,n,t))},r)),r.f=i):(n||(e=xn(e,jn)),t.a=new qn(e,t.h))}function kn(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function On(t){return t instanceof Sn?new Sn(t):new Sn(t,void 0)}function Pn(t,e){var n=new Sn(null,void 0);return Cn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Dn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ln),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ln(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Sn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(xn(e,Mn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(xn(e,Mn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(xn(n,"/"==n.charAt(0)?Un:Fn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",xn(n,Vn)),t.join("")},Sn.prototype.resolve=function(t){var e=new Sn(this),n=!!t.f;n?Cn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)Nn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?An(e,Kn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Mn=/[#\/\?@]/g,Fn=/[#\?:]/g,Un=/[#\?]/g,jn=/[#\?@]/g,Vn=/#/g;function qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Bn(n){n.a||(n.a=new wn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Wn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new qn(null,void 0);t=bn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?zn(n,i,o):n.add(i,o)}return n}function Gn(t,e){Bn(t),e=Qn(t,e),Tn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&En(t)))}function Hn(t,e){return Bn(t),e=Qn(t,e),Tn(t.a.b,e)}function zn(t,e,n){Gn(t,e),0<n.length&&(t.c=null,t.a.set(Qn(t,e),z(n)),t.b+=n.length)}function Kn(t){var e=new qn;return e.c=t.c,t.a&&(e.a=new wn(t.a),e.b=t.b),e}function Qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Yn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),Zn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Xn,t,e),e.join("")}function Xn(){}(t=qn.prototype).add=function(t,e){Bn(this),this.c=null,t=Qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Bn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Bn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Bn(this);var e=[];if("string"==typeof t)Hn(this,t)&&(e=H(e,this.a.get(Qn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return Bn(this),this.c=null,Hn(this,t=Qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},$n=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(t,e){e.push('"',t.replace($n,function(t){var e=Jn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Jn[t]=e),e}),'"')}function tr(){var t=br();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function er(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function nr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function rr(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ir(t){t=t||l.window;try{t.close()}catch(t){}}function or(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),yr(br())==dr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Rt,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Gt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var sr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ar=/^[^@]+@[^@]+$/;function ur(){var e=null;return new de(function(t){"complete"==l.document.readyState?t():(e=function(){t()},nn(window,"load",e))}).o(function(t){throw rn(window,"load",e),t})}function cr(t){return t=t||br(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function hr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function lr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function fr(){return zl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":zl.INTERNAL.hasOwnProperty("node")?"Node":lr()?"Worker":"Browser"}function pr(){var t=fr();return"ReactNative"===t||"Node"===t}var dr="Firefox",vr="Chrome";function yr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?dr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":vr:"Safari"}var gr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function mr(t,e){e=e||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=fr())?r=yr(i=br()):"Worker"===r&&(r=yr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function wr(){try{var t=l.localStorage,e=kr();if(t)return t.setItem(e,"1"),t.removeItem(e),!tr()||!!l.indexedDB}catch(t){return lr()&&!!l.indexedDB}return!1}function Er(){return(Tr()||"chrome-extension:"===Ir()||cr())&&!pr()&&wr()&&!lr()}function Tr(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Sr(t){return!rr(t=t||br())&&yr(t)!=dr}function Cr(t){return void 0===t?null:Yn(t)}function Nr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ar(t){if(null!==t)return JSON.parse(t)}function kr(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=yr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Or(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=fr(),this.b=rr(t)||"ReactNative"===e}function Dr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return _r("fireauth.oauthhelper",l)||_r("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Fr={};function Ur(t){Fr[t]||(Fr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==jr.abcd}catch(t){Mr=!1}function Vr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Br(t){var e={};return qr(e,t),e}function Wr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,Wr(t[n]));return e}function Gr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Qr]),Vr(this,"displayName",t[zr]||null);var n=null;t[Kr]&&(n=new Date(t[Kr]).toUTCString()),Vr(this,"enrollmentTime",n),Vr(this,"factorId",e)}function Hr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Gr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Kr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){Gr.call(this,t),Vr(this,"phoneNumber",t[Yr])}function Jr(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Hr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==$r&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,Vr(this,hi,i),Vr(this,ci,Wr(e))}e(Xr,Gr),Xr.prototype.v=function(){var t=Xr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var $r="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=Rn(t=On(t),fi)||null,n=Rn(t,pi)||null,r=(r=Rn(t,yi)||null)&&mi[r]||null;if(!e||!n||!r)throw new w("argument-error",fi+", "+pi+"and "+yi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,di)||null,languageCode:Rn(t,vi)||null,tenantId:Rn(t,gi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",vi="languageCode",yi="mode",gi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:$r,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new li(t)}catch(t){return null}}function _i(t){var e=t[Si];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ai];var n=r[Ci],r=r[Ni];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new w("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new w("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new w("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new w("missing-android-pkg-name")}}else if(void 0!==r)throw new w("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ii])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ii+" property must be a non null object when specified.");if(void 0!==(e=t[Ti])&&"boolean"!=typeof e)throw new w("argument-error",Ti+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ei])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",Ei+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ei="dynamicLinkDomain",Ti="handleCodeInApp",Ii="iOS",Si="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",ki="bundleId";function Ri(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Oi=null;function Pi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Di(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function xi(t){try{return new Di(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Pi(t))}catch(t){}return null}Di.prototype.S=function(){return this.f},Di.prototype.i=function(){return this.b},Di.prototype.toString=function(){return this.g};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Fi=["client_id","response_type","scope","redirect_uri","state"],Ui={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Fi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Fi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Fi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Mi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function ji(t){for(var e in Ui)if(Ui[e].ea==t)return Ui[e];return null}function Vi(t){var e={};e["facebook.com"]=Hi,e["google.com"]=Ki,e["github.com"]=zi,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return e[n]?new e[n](t):new Gi(t);if(void 0!==t[qi])return new Wi(t)}catch(t){}return null}var qi="idToken",Bi="providerId";function Wi(t){var e,n=t[Bi];if(n||!t[qi]||(e=xi(t[qi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Vr(this,"providerId",n),Vr(this,"isNewUser",e)}function Gi(t){Wi.call(this,t),Vr(this,"profile",Wr((t=Ar(t.rawUserInfo||"{}"))||{}))}function Hi(t){if(Gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(Gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Yi(t){var e=Rn(r=On(t),"link"),n=Rn(On(e),"link"),r=Rn(r,"deep_link_id");return Rn(On(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ji:$i}e(Gi,Wi),e(Hi,Gi),e(zi,Gi),e(Ki,Gi),e(Qi,Gi);var Ji="enroll",$i="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[Ws]){var e=xi(t[Ws]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==I+"user-not-found"?new w("user-mismatch"):t})}function eo(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Wn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Oc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(ji(t)||{}).Ha||null,this.kb=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,Fi),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){co.call(this,"google.com"),this.Aa("profile")}function yo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function Eo(t,e){if(!(e=To(e)))throw new w("argument-error","Invalid email link!");return new bo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=bi(t=Yi(t)))&&t.operation===Zr?t:null}function Io(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new w("internal-error");this.a=t,Vr(this,"providerId","phone"),this.ea="phone",Vr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Io(n)}return null}function Co(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function No(t){try{this.a=t||zl.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new Io({bb:t,ab:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new Io({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return yo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function Oo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Oo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Do(){this.b=null,this.a=[]}Xi.prototype.Fa=function(){return this.a?we(this.a):we(this.b)},Xi.prototype.v=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ia=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.v=function(){},eo.prototype.ia=function(t){return ca(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,ha(t,n)},eo.prototype.c=function(t,e){return to(la(t,no(this)),e)},eo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ia=function(t){return ca(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,ha(t,n)},io.prototype.c=function(t,e){return to(la(t,oo(this)),e)},io.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ia=function(t){return this.Fb=ct(t),this},e(uo,ao),e(co,ao),co.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},co.prototype.Nb=function(){return z(this.a)},co.prototype.credential=function(t,e){var n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!n.idToken&&!n.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,n,this.providerId)},e(ho,co),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(fo,co),Vr(fo,"PROVIDER_ID","github.com"),Vr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),e(vo,co),Vr(vo,"PROVIDER_ID","google.com"),Vr(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(go,ao),Vr(go,"PROVIDER_ID","twitter.com"),Vr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ia=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?za(t,ba,{email:this.a,oobCode:this.f}):za(t,qa,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?za(t,_a,{idToken:e,email:this.a,oobCode:this.f}):za(t,Da,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return to(this.ia(t),e)},bo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Io.prototype.ia=function(t){return t.cb(Co(this))},Io.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,za(t,Wa,n)},Io.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",to(t=za(t,Ga,n),e)},Io.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},No.prototype.cb=function(i,o){var s=this.a.b;return we(o.verify()).then(function(r){if("string"!=typeof r)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(o.type){case"recaptcha":var t=y(i)?i.session:null,e=y(i)?i.phoneNumber:i,n=t&&t.type==Ji?t.Fa().then(function(t){return za(s,La,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==$i?t.Fa().then(function(t){return e=s,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},za(e,Ma,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):za(s,Oa,{phoneNumber:e,recaptchaToken:r});return n.then(function(t){return"function"==typeof o.reset&&o.reset(),t},function(t){throw"function"==typeof o.reset&&o.reset(),t});default:throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},qr(No,{PROVIDER_ID:"phone"}),qr(No,{PHONE_SIGN_IN_METHOD:"phone"}),Oo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Oo.prototype.S=function(){return this.h},Oo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var xo,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Fo(t,e,n){w.call(this,t,n),(t=e||{}).Gb&&Vr(this,"email",t.Gb),t.da&&Vr(this,"phoneNumber",t.da),t.credential&&Vr(this,"credential",t.credential),t.Wb&&Vr(this,"tenantId",t.Wb)}function Uo(t){if(t.code){var e=t.code||"";0==e.indexOf(I)&&(e=e.substring(I.length));var n={credential:ko(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Fo(e,n,t.message)}return null}function jo(){}function Vo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Wo(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Ho(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}e(Mo,w),e(Fo,w),Fo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Fo.prototype.toJSON=function(){return this.v()},jo.prototype.c=null,e(qo,jo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},xo=new qo,e(Wo,jo),Wo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Wo.prototype.b=function(){return{}},(t=Go.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ho(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Ho(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Ho(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zo.prototype.a=null,zo.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),Jo=new Qo("CONFIG",700),$o=new Qo("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(O("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new Ko(""),(ts[""]=es).c=Jo),(e=ts[t])||(e=new Ko(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log($o,e,void 0)}function is(t){this.f=t}function os(t){pn.call(this),this.s=t,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ns("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(is,jo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),e(os,pn);var ss=0;function as(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function us(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){pn.call(this),this.headers=new wn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ls,this.w=this.R=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this,!1)),this.readyState=ss},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,as(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?us(this,!0):cs(this),3==this.readyState&&as(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,us(this,!0))},t.qc=function(t){this.a&&(this.response=t,us(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Xo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&us(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(hs,pn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():xo.a(),e.B=e.D?Vo(e.D):Vo(xo),e.a.onreadystatechange=m(e.Sb,e);try{rs(e.b,Ts(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return rs(e.b,Ts(e,"Error opening Xhr: "+t.message)),void ys(e,t)}t=r||"";var o,s=new wn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)U(t,e,void 0);else for(var n=_n(t),r=bn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=vs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&t instanceof l.FormData,!B(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{_s(e),0<e.g&&(e.w=(o=e.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Ts(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=gn(e.Ka,e.g,e)),rs(e.b,Ts(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Ts(e,"Send error: "+t.message)),ys(e,t)}}function vs(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),bs(t)}function gs(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.B[1]&&4==ws(e)&&2==Es(e))rs(e.b,Ts(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))gn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Ts(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Es(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Es(e)+"]",gs(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.B[0]?s:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function Es(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Ts(t,e){return e+" ["+t.P+" "+t.l+" "+Es(t)+"]"}function Is(t){var e=Ls;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,ks(t)}function Cs(t){if(t.a){if(!t.u)throw new Rs;t.u=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&ks(t)}function As(t){return q(t.g,function(t){return v(t[1])})}function ks(e){var n,r;e.h&&e.a&&As(e)&&(n=e.h,(r=Ds[n])&&(l.clearTimeout(r.a),delete Ds[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,As(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Is?(Ns(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ps(n),Ds[n.a]=n,e.h=n.a)}function Rs(){k.call(this)}function Os(){k.call(this)}function Ps(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ka=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Ts(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Ts(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),hs.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ms(this):this.Hc())},t.Hc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Is.prototype.cancel=function(t){var e;this.a?this.c instanceof Is&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Os,Cs(this),Ss(this,!1,t)))},Is.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},Is.prototype.then=function(t,e,n){var r,i,o=new de(function(t,e){r=t,i=e});return Ns(this,r,function(t){t instanceof Os?o.cancel():i(t)}),o.then(t,e,n)},Is.prototype.$goog_Thenable=!0,e(Rs,k),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",e(Os,k),Os.prototype.message="Deferred was canceled",Os.prototype.name="CanceledError",Ps.prototype.c=function(){throw delete Ds[this.a],this.b};var Ds={};function xs(t){var e,n,r,i,o=document,s=bt(t).toString(),a=ae(document,"SCRIPT"),u={Tb:a,Ka:void 0},c=new Is(u),h=window.setTimeout(function(){Ms(a,!0);var t=new js(Us,"Timeout reached for loading script "+s);Cs(c),Ss(c,!1,t)},5e3);return u.Ka=h,a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(Ms(a,!1,h),Cs(c),Ss(c,!0,null))},a.onerror=function(){Ms(a,!0,h);var t=new js(Fs,"Error while loading script "+s);Cs(c),Ss(c,!1,t)},lt(u={},{type:"text/javascript",charset:"UTF-8"}),ne(a,u),n=t,ft(e=a,"HTMLScriptElement"),e.src=bt(n),null===p&&(p=(n=(n=l.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&f.test(n)?n:""),(n=p)&&e.setAttribute("nonce",n),((i=((r=o)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(a),c}function Ls(){var t;this&&this.Tb&&((t=this.Tb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ka))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Fs=0,Us=1;function js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Vs(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Gs,this.g=ct(t.secureTokenHeaders||Hs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||zs,this.a=ct(t.firebaseHeaders||Ks),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==fr(),!(n=l.XMLHttpRequest||n&&zl.INTERNAL.node&&zl.INTERNAL.node.XMLHttpRequest)&&!lr())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,lr()?this.f=new is(self):pr()?this.f=new Vs(n):this.f=new Wo,this.b=null}e(js,k),e(Vs,jo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Bs,Ws="idToken",Gs=new Pr(3e4,6e4),Hs={"Content-Type":"application/x-www-form-urlencoded"},zs=new Pr(3e4,6e4),Ks={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Xs(t,e,n,r,i,o,s){var a;(t=!((a=yr(a=br())==vr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||lr()?m(t.w,t):(Bs=Bs||new de(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[$s]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ns(t,null,e,void 0)}(xs(_t(Js,{onload:$s})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.s,t)))(e,n,r,i,o,s)}qs.prototype.S=function(){return this.b},qs.prototype.w=function(t,n,e,r,i,o){if(lr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),dn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),vn(a,"ready",function(){s&&clearTimeout(s),Fe(this)}),vn(a,"timeout",function(){s&&clearTimeout(s),Fe(this),n&&n(null)}),ds(a,t,e,r,i)};var Js=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),$s="__fcb"+Math.floor(1e6*Math.random()).toString();function Zs(t,e,n,r,i,o,s){var a=On(e+n);kn(a,"key",t.c),s&&kn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&kn(a,c,i[c]);return new de(function(e,n){Xs(t,a.toString(),function(t){t?t.error?n(Qa(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Yn(Nr(i)),t.a,t.i.get())})}function ta(t){if("string"!=typeof(t=t.email)||!ar.test(t))throw new w("invalid-email")}function ea(t){"email"in t&&ta(t)}function na(t){if(!t[Ws]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ct(t));throw new w("internal-error")}}function ra(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}qs.prototype.s=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.vb=function(){return za(this,xa,{})},qs.prototype.xb=function(t,e){return za(this,Pa,{idToken:t,email:e})},qs.prototype.yb=function(t,e){return za(this,Da,{idToken:t,password:e})};var ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function oa(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function sa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function aa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Hn(t=new qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ua(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Uo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Uo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Uo(t)):t.errorMessage&&(e=Ka(t.errorMessage)),e)throw e;na(t)}function ca(t,e){return e.returnIdpCredential=!0,za(t,Fa,e)}function ha(t,e){return e.returnIdpCredential=!0,za(t,ja,e)}function la(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,za(t,Ua,e)}function fa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=qs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(ia,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),za(this,Pa,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),za(this,Na,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),za(this,Ia,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),za(this,Sa,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),za(this,Ca,t)},t.cb=function(t){return za(this,Ba,t)},t.jb=function(t,e){return za(this,Ra,{oobCode:t,newPassword:e})},t.Pa=function(t){return za(this,da,{oobCode:t})},t.fb=function(t){return za(this,pa,{oobCode:t})};var pa={endpoint:"setAccountInfo",A:fa,Y:"email",C:!0},da={endpoint:"resetPassword",A:fa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},va={endpoint:"signupNewUser",A:function(t){if(ta(t),!t.password)throw new w("weak-password")},G:na,U:!0,C:!0},ya={endpoint:"createAuthUri",C:!0},ga={endpoint:"deleteAccount",M:["idToken"]},ma={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ta,G:na,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ta,G:na,U:!0},wa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:oa,G:na,C:!0,La:!0},Ea={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:oa,G:na,C:!0,La:!0},Ta={endpoint:"getAccountInfo"},Ia={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");ta(t)},Y:"email",C:!0},Sa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");ta(t)},Y:"email",C:!0},Aa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},ka={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Ra={endpoint:"resetPassword",A:fa,Y:"email",C:!0},Oa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Pa={endpoint:"setAccountInfo",M:["idToken"],A:ea,U:!0},Da={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ea(t),!t.password)throw new w("weak-password")},G:na,U:!0},xa={endpoint:"signupNewUser",G:na,U:!0,C:!0},La={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Ma={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Fa={endpoint:"verifyAssertion",A:sa,Wa:aa,G:ua,U:!0,C:!0},Ua={endpoint:"verifyAssertion",A:sa,Wa:aa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw Ka(t.errorMessage);na(t)},U:!0,C:!0},ja={endpoint:"verifyAssertion",A:function(t){if(sa(t),!t.idToken)throw new w("internal-error")},Wa:aa,G:ua,U:!0},Va={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new w("invalid-custom-token")},G:na,U:!0,C:!0},qa={endpoint:"verifyPassword",A:function(t){if(ta(t),!t.password)throw new w("wrong-password")},G:na,U:!0,C:!0},Ba={endpoint:"verifyPhoneNumber",A:ra,G:na,C:!0},Wa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new w("internal-error");ra(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Uo(t);na(t)}},Ga={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ra,G:na,C:!0},Ha={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ws]^!!t.refreshToken)throw new w("internal-error")},C:!0,La:!0};function za(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Ee(new w("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return we(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),Zs(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new w("internal-error");return r[e.Y]})}function Ka(t){return Qa({error:{errors:[{message:t}],code:400,message:t}})}function Qa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new w(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new w(r[i],e);return!e&&t&&(e=Cr(t)),new w("internal-error",e)}function Ya(t){var o;this.b=t,this.a=null,this.nb=(o=this,(Za=Za||new de(function(t,e){function n(){Or(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Or(),e(Error("Network Error"))},timeout:Ja.get()})}var r;_r("gapi.iframes.Iframe")?t():_r("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},we(xs(r=_t(Xa,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw Za=null,t})).then(function(){return new de(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},$a.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Xa=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ja=new Pr(3e4,6e4),$a=new Pr(5e3,15e3),Za=null;function tu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Pn(this.i,"/__/auth/iframe"),kn(this.a,"apiKey",this.g),kn(this.a,"appName",this.h),this.b=null,this.c=[]}function eu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function nu(t){try{return zl.app(t).auth().Ea()}catch(t){return[]}}function ru(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function iu(t){var a=er();return za(t,Aa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=On(a)).f,n=n.b,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?On(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(sr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(er())})}function ou(i){return i.l||(i.l=ur().then(function(){var t,e,n,r;i.s||(t=i.c,e=i.h,n=nu(i.b),(r=new tu(i.u,i.f,i.b)).f=t,r.b=e,r.c=z(n||[]),i.s=r.toString()),i.i=new Ya(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",we(e)}return e.status="ERROR",we(e)})}(i)})),i.l}function su(t){return t.m||(t.w=t.c?mr(t.c,nu(t.b)):null,t.m=new qs(t.f,N(t.h),t.w)),t.m}function au(t,e,n,r,i,o,s,a,u,c,h){return(t=new eu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function uu(t){if(this.a=t||zl.INTERNAL.reactNative&&zl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function cu(t){this.b=t,this.a={},this.f=m(this.c,this)}tu.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):Gn(this.a.a,"v"),this.b?kn(this.a,"eid",this.b):Gn(this.a.a,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):Gn(this.a.a,"fw"),this.a.toString()},eu.prototype.ub=function(t){return this.h=t,this},eu.prototype.toString=function(){var t=Pn(this.s,"/__/auth/handler");if(kn(t,"apiKey",this.m),kn(t,"appName",this.c),kn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=zl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,kn(t,"providerId",this.a.providerId),n=Nr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||kn(t,"customParameters",Cr(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&kn(t,"scopes",e.join(","))),this.l?kn(t,"redirectUrl",this.l):Gn(t.a,"redirectUrl"),this.g?kn(t,"eventId",this.g):Gn(t.a,"eventId"),this.i?kn(t,"v",this.i):Gn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Rn(t,s)&&kn(t,s,this.b[s]);return this.h?kn(t,"tid",this.h):Gn(t.a,"tid"),this.f?kn(t,"eid",this.f):Gn(t.a,"eid"),(s=nu(this.c)).length&&kn(t,"fw",s.join(",")),t.toString()},(t=ru.prototype).Lb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},ou(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new de(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&ir(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new de(function(e){return function t(){mn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return mn(t).then(function(){n(r)})})},t.Ub=function(){var t=br();return!Sr(t)&&!Rr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ee(new w("popup-blocked"));if(s&&!Sr())return this.ka().o(function(t){ir(e),i(t)}),r(),we();this.a||(this.a=iu(su(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw ir(e),i(t),t});return r(),t}).then(function(){Ro(n),s||nr(au(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=iu(su(this)));var i=this;return this.a.then(function(){Ro(e),nr(au(i.u,i.f,i.b,t,e,er(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return ou(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new w("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){G(this.g,function(t){return t==e})},(t=uu.prototype).get=function(t){return we(this.a.getItem(t)).then(function(t){return t&&Ar(t)})},t.set=function(t,e){return we(this.a.setItem(t,Cr(e)))},t.T=function(t){return we(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var hu,lu=[];function fu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function pu(t){this.a=t}function du(t){this.c=t,this.b=!1,this.a=[]}function vu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ee(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new de(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).o(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function gu(){if(!_u())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;lr()&&self?(this.l=(n=lr()?self:null,U(lu,function(t){t.b==n&&(e=t)}),e||(e=new cu(n),lu.push(e)),e),fu(this.l,"keyChanged",function(t,n){return Su(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),fu(this.l,"ping",function(){return we(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?we().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):we(null)).then(function(t){(r.h=t)&&(r.g=new du(new pu(t)),vu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function mu(i){return new de(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new de(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return mu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function bu(t){return t.m||(t.m=mu(t)),t.m}function _u(){try{return l.indexedDB}catch(t){return}}function wu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Tu(t){return new de(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Iu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?vu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):we();var n}function Su(r){return bu(r).then(function(t){var i=wu(Eu(t,!1));return i.getAll?Tu(i.getAll()):new de(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Cu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Nu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=we().then(function(){if(_u()){var e=kr(),n="__sak"+e;return hu=hu||new gu,(i=hu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function Au(){this.a={},this.type="inMemory"}function ku(){if(!function(){var t="Node"==fr();if(!(t=Ru()||t&&zl.INTERNAL.node&&zl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ru()||zl.INTERNAL.node.localStorage,this.type="localStorage"}function Ru(){try{var t=l.localStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ou(){this.type="nullStorage"}function Pu(){if(!function(){var t="Node"==fr();if(!(t=Du()||t&&zl.INTERNAL.node&&zl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Du()||zl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Du(){try{var t=l.sessionStorage,e=kr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){var t={};t.Browser=Fu,t.Node=Uu,t.ReactNative=ju,t.Worker=Vu,this.a=t[fr()]}cu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(we().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},pu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},du.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Tu((t=wu(Eu(i=t,!0))).get(n))}).then(function(t){var e=wu(Eu(i,!0));return t?(t.value=r,Tu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Tu(e.add(t)))}).then(function(){return s.c[n]=r,Iu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Tu(wu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Tu(wu(Eu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Iu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Cu(n=this),function e(){n.f=setTimeout(function(){n.i=Su(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Cu(this)},(t=Nu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e})},(t=Au.prototype).get=function(t){return we(this.a[t])},t.set=function(t,e){return this.a[t]=e,we()},t.T=function(t){return delete this.a[t],we()},t.ba=function(){},t.ha=function(){},(t=ku.prototype).get=function(t){var e=this;return we().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&tn(l.window,"storage",t)},t.ha=function(t){l.window&&rn(l.window,"storage",t)},(t=Ou.prototype).get=function(){return we(null)},t.set=function(){return we()},t.T=function(){return we()},t.ba=function(){},t.ha=function(){},(t=Pu.prototype).get=function(t){var e=this;return we().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Lu,Mu,Fu={F:ku,$a:Pu},Uu={F:ku,$a:Pu},ju={F:uu,$a:Ou},Vu={F:ku,$a:Ou},qu={od:"local",NONE:"none",qd:"session"};function Bu(){var t=!(Rr(br())||!hr()),e=Sr(),n=wr();this.m=t,this.h=e,this.l=n,this.a={},t=Lu=Lu||new xu;try{this.g=!tr()&&Lr()||!l.indexedDB?new t.a.F:new Nu(lr()?new Au:new t.a.F)}catch(t){this.g=new Au,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Au}this.u=new Au,this.f=m(this.Vb,this),this.b={}}function Wu(){return Mu=Mu||new Bu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Hu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function zu(t,e,n){return n=Hu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).T(n)}function Ku(t){t.c&&(clearInterval(t.c),t.c=null)}function Qu(t){this.a=t,this.b=Wu()}(t=Bu.prototype).get=function(t,e){return Gu(this,t.F).get(Hu(t,e))},t.set=function(e,t,n){var r=Hu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Hu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ba(this.f),this.h||(tr()||!Lr())&&l.indexedDB||!this.l||(Ku(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new We({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Hu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ha(this.f),Ku(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ha(this.f):Ku(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))};Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Yu,Xu={name:"authEvent",F:"local"};function Ju(){this.a=Wu()}function $u(t,e){this.b=Zu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Yu&&(Yu=l.Int32Array?new Int32Array(sc):sc),this.reset()}e($u,function(){this.b=-1});for(var Zu=64,tc=Zu-1,ec=[],nc=0;nc<tc;nc++)ec[nc]=0;var rc=H(128,ec);function ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Yu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function oc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ic(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ic(t),i=0)}}t.c=i,t.g+=n}$u.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};var sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ac(){$u.call(this,8,uc)}e(ac,$u);var uc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Ju,this.g=new Qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function hc(t){return new w("invalid-cordova-configuration",t)}function lc(t){var e=new ac;oc(e,t),t=[];var n=8*e.g;e.c<56?oc(e,rc,56-e.c):oc(e,rc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function fc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function pc(a){return a.f||(a.f=a.ka().then(function(){return new de(function(n){function e(r){t=!0,s&&s.cancel(),dc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Ar(Rn(e=On(n),"firebaseError")||null))?E(e):null)?new Oo(t.c,t.b,null,null,e,null,t.S()):new Oo(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),fc(i,n)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Oo("unknown",null,null,null,new w("no-auth-event")),t=!1,s=mn(500).then(function(){return dc(i).then(function(){t||fc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new Do,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function dc(e){var t,n=null;return(t=e.g).b.get(Xu,t.a).then(Po).then(function(t){return n=t,zu((t=e.g).b,Xu,t.a)}).then(function(){return n})}function vc(t){this.a=t,this.b=Wu()}(t=cc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(cr(void 0)?ur().then(function(){return new de(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ee(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw hc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw hc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw hc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw hc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Lb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),we()},t.Jb=function(){return Ee(new w("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ee(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=we().then(function(){return Ro(e),pc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Oo(t,r,null,o,new w("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(br().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!br().toLowerCase().match(/android/))return Ee(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=lc(o),c.sessionId=o;var h=au(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Xu,s.v(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=br(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new de(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||mn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Dr()&&u()},o.addEventListener("resume",u,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return dc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),pc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Oo("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Qa=function(e){G(this.b,function(t){return t==e})};var yc={name:"pendingRedirect",F:"session"};function gc(t){return zu(t.b,yc,t.a)}function mc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Pc,this.B=new Fc,this.g=new vc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=bc(this.D,this.u,this.m,T)}function bc(t,e,n,r){var i=zl.SDK_VERSION||null;return new(cr()?cc:ru)(t,e,n,i,r)}function _c(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function wc(n){n.a.Ub()&&_c(n).o(function(t){var e=new Oo("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.s(e)}),n.a.Qb()||Dc(n.b)}function Ec(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(yc,e.a).then(function(t){return"pending"==t}).then(function(t){t?gc(n.g).then(function(){_c(n).o(function(t){var e=new Oo("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.s(e)})}):wc(n)}).o(function(){wc(n)})}function Tc(t,e){G(t.h,function(t){return t==e})}mc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=bc(this.D,this.u,this.m),this.i={}},mc.prototype.s=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Dc(this.b),e};var Ic=new Pr(2e3,1e4),Sc=new Pr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ac(e,t,n,r,i){var o,s;return(s=e.g).b.set(yc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Nc(t))throw new w("operation-not-supported-in-this-environment");return o=t,gc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new de(function(){}):gc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function kc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Ic.get())}mc.prototype.pa=function(){return this.b.pa()};var Rc={};function Oc(t,e,n){var r=e+":"+n;return Rc[r]||(Rc[r]=new mc(t,e,n)),Rc[r]}function Pc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Dc(t){t.g||(t.g=!0,Mc(t,!1,null,null))}function xc(t){t.g&&!t.i&&Mc(t,!1,null,null)}function Lc(t,e){if(t.b=function(){return we(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Mc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ee(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Lc(t,n):Lc(t,{user:null}),t.f=[],t.c=[]}function Fc(){}function Uc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function jc(t,e){this.a=e,Vr(this,"verificationId",t)}function Vc(t,e,n,r){return new No(t).cb(e,n).then(function(t){return new jc(t,r)})}function qc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Bc(t,e,n){var r=e&&e[Gc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;U(e[Wc]||[],function(t){(t=Hr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Pc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Pc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Mc(this,!0,null,t.a),we()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Mc(e,a,t,null)}).o(function(t){Mc(e,a,null,t)})}(this,t,e):Ee(new w("invalid-auth-event")):(Mc(this,!1,null,null),we())):Ee(new w("invalid-auth-event"))},Pc.prototype.pa=function(){var i=this;return new de(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=mn(Sc.get()).then(function(){n.b||(n.g=!0,Mc(n,!0,null,r))}))})},Fc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),we()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Ee(new w("invalid-auth-event"))):Ee(new w("invalid-auth-event"))},jc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Wc="mfaInfo",Gc="mfaPendingCredential";function Hc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Bc(t,e,n),Vr(this,"resolver",this.b)}function zc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Hc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Kc(){}function Qc(t){Vr(this,"factorId",t.ea),this.a=t}function Yc(t){if(Qc.call(this,t),this.a.ea!=No.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Xc(t,e){for(var n in Be.call(this,t),e)this[n]=e[n]}function Jc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),tn(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[zr]=t.displayName),t.enrollmentTime&&(n[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),$c(this,r)}function $c(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function Zc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function th(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function eh(t){this.c=t,this.b=this.a=null}function nh(t){return t.b&&1e3*t.b.c||0}function rh(t,e){var n=e.refreshToken;t.b=xi(e[Ws]||""),t.a=n}function ih(e,t){return r=e.c,i=t,new de(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Xs(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Qa(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Wn(i).toString(),r.g,r.m.get()):n(new w("internal-error"))}).then(function(t){return e.b=xi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function oh(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function sh(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ah(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=zl.SDK_VERSION?mr(zl.SDK_VERSION):null,this.a=new qs(this.l,N(T),t),this.b=new eh(this.a),dh(this,e[Ws]),rh(this.b,e),Vr(this,"refreshToken",this.b.a),gh(this,n||{}),pn.call(this),this.P=!1,this.s&&Er()&&(this.i=Oc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new Zc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=nh(r.b)-_()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){ch(i,t.c)},this.$=null,this.O=new Jc(this,n),Vr(this,"multiFactor",this.O)}function uh(t,e){t.aa&&rn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&tn(e,"languageCodeChanged",t.za)}function ch(t,e){t.W=e,Ys(t.a,zl.SDK_VERSION?mr(zl.SDK_VERSION,t.W):null)}function hh(t,e){t.$&&rn(t.$,"frameworkChanged",t.ya),(t.$=e)&&tn(e,"frameworkChanged",t.ya)}function lh(e){try{return zl.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function fh(t){t.D||t.B.b||(t.B.start(),rn(t,"tokenChanged",t.Z),tn(t,"tokenChanged",t.Z))}function ph(t){rn(t,"tokenChanged",t.Z),t.B.stop()}function dh(t,e){t.xa=e,Vr(t,"_lat",e)}function vh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ie(e).then(function(){return t})}function yh(t){t.i&&!t.P&&(t.P=!0,Ec(t.i,t))}function gh(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new oh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function mh(){}function bh(t){return we().then(function(){if(t.D)throw new w("app-deleted")})}function _h(t){return V(t.providerData,function(t){return t.providerId})}function wh(t,e){e&&(Eh(t,e.providerId),t.providerData.push(e))}function Eh(t,e){G(t.providerData,function(t){return t.providerId==e})}function Th(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function Ih(e,t){var n,r,i;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new oh((i=t.metadata).a,i.b)):Vr(e,"metadata",new oh),U(t.providerData,function(t){wh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Vr(e,"refreshToken",e.b.a),$c(e.O,t.O.b))}function Sh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,za((e=i).a,Ta,{idToken:n}).then(m(e.Ic,e)).then(function(){return r||Th(i,"isAnonymous",!1),t})})}function Ch(t,e){e[Ws]&&t.xa!=e[Ws]&&(rh(t.b,e),t.dispatchEvent(new Xc("tokenChanged")),dh(t,e[Ws]),Th(t,"refreshToken",t.b.a))}function Nh(t,e){return Sh(t).then(function(){if(B(_h(t),e))return vh(t).then(function(){throw new w("provider-already-linked")})})}function Ah(t,e,n){return Br({user:t,credential:ko(e),additionalUserInfo:e=Vi(e),operationType:n})}function kh(t,e){return Ch(t,e),t.reload().then(function(){return t})}function Rh(n,r,t,e,i){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ee(n.h);var o=ji(t.providerId),s=kr(n.uid+":::"),a=null;(!Sr()||hr())&&n.s&&t.isOAuthProvider&&(a=au(n.s,n.l,n.m,r,t,null,s,zl.SDK_VERSION||null,null,null,n.tenantId));var u=or(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Ph(n),!i)return n.I().then(function(){})}).then(function(){return Cc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new de(function(t,e){n.la(r,null,new w("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=kc(n.i,n,r,u,s)})}).then(function(t){return u&&ir(u),t?Br(t):null}).o(function(t){throw u&&ir(u),t}),Dh(n,e,i)}function Oh(e,t,n,r,i){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ee(e.h);var o=null,s=kr(e.uid+":::");return r=r().then(function(){if(Ph(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,vh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Mh,e.v(),t.a)),t}).then(function(){return Ac(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Fh(e.ga);throw o}).then(function(){if(o)throw o}),Dh(e,r,i)}function Ph(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Dh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Ee(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Xc("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){W(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),lh(n),m(n.hc,n))),e||t})}function xh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ws]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new ah(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&wh(r,Br(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Lh(t){this.a=t,this.b=Wu()}Bc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Wc],delete e[Gc],lt(e,t),n.g(e)})},e(Hc,w),Kc.prototype.ob=function(t,e,n){return e.type==Ji?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:Co(o.a)}),za(s,wa,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),za(i,Ea,t)}));var r,i,o,s,a},e(Qc,Kc),e(Yc,Qc),e(Xc,Be),(t=Jc.prototype).wc=function(t){var e,n;$c(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Hr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Ch(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return za(e,Ha,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return $c(n,e),Ch(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},Zc.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=mn(th(n,t)).then(function(){return e=l.document,n=null,Dr()||!e?we():new de(function(t){n=function(){Dr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Zc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},eh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:nh(this)}},eh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ee(new w("user-token-expired")):t||!this.b||_()>nh(this)-3e4?this.a?ih(this,{grant_type:"refresh_token",refresh_token:this.a}):we(null):we({accessToken:this.b.toString(),refreshToken:this.a})},oh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(ah,pn),ah.prototype.va=function(t){this.oa=t,Qs(this.a,t)},ah.prototype.ja=function(){return this.oa},ah.prototype.Ea=function(){return z(this.W)},ah.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Vr(ah.prototype,"providerId","firebase"),(t=ah.prototype).reload=function(){var t=this;return Dh(this,bh(this).then(function(){return Sh(t).then(function(){return vh(t)}).then(mh)}))},t.mc=function(t){return this.I(t).then(function(t){return new qc(t)})},t.I=function(t){var e=this;return Dh(this,bh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.xa&&(dh(e,t.accessToken),e.dispatchEvent(new Xc("tokenChanged"))),Th(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");gh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)wh(this,n[r]);Th(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Xc("userReloaded",{ed:t}))},t.Jc=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Dh(this,t.c(this.a,this.uid).then(function(t){return Ch(e,t),n=Ah(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Dh(this,Nh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ah(n,t,"link"),kh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Dh(this,Nh(this,"phone").then(function(){return Vc(lh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Dh(this,we().then(function(){return Vc(lh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Dh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.cd=function(e){var n=this;return Dh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ch(n,t),n.reload()}))},t.yb=function(e){var n=this;return Dh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return bh(this);var n=this;return Dh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ch(n,t),Th(n,"displayName",t.displayName||null),Th(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),vh(n)}).then(mh))},t.ad=function(e){var n=this;return Dh(this,Sh(this).then(function(t){return B(_h(n),e)?za(n.a,ma,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(_h(n),function(t){e[t]||Eh(n,t)}),e[No.PROVIDER_ID]||Vr(n,"phoneNumber",null),vh(n)}):vh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Dh(this,this.I().then(function(t){return za(e.a,ga,{idToken:t})}).then(function(){e.dispatchEvent(new Xc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");uh(e,null),hh(e,null),e.N=[],e.D=!0,ph(e),Vr(e,"refreshToken",null),e.i&&Tc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Rh(this,"linkViaPopup",t,function(){return Nh(e,t.providerId).then(function(){return vh(e)})},!1)},t.Lc=function(t){return Rh(this,"reauthViaPopup",t,function(){return we()},!0)},t.Dc=function(t){var e=this;return Oh(this,"linkViaRedirect",t,function(){return Nh(e,t.providerId)},!1)},t.Mc=function(t){return Oh(this,"reauthViaRedirect",t,function(){return we()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return ha(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ah(i,t,"link"),kh(i,t)}).then(function(){return o}),Dh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Dh(this,we().then(function(){return to(la(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ah(i,t,"reauthenticate"),Ch(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Dh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ri(new _i(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Dh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ri(new _i(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Dh(this,t=to(we(t),n.uid).then(function(t){return e=Ah(n,t,"reauthenticate"),Ch(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Mh={name:"redirectUser",F:"session"};function Fh(t){return zu(t.b,Mh,t.a)}function Uh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=qh("local"),r=qh("session"),i=qh("none"),function(n,r,i){var o=Hu(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Ar(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Vh,e.a).then(function(t){return t?qh(t):n})})})}).then(function(t){return e.c=t,jh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(qh("local"),this.a,m(this.g,this))}function jh(t,e){var n,a,r=[];for(n in qu)qu[n]!==e&&r.push(zu(t.b,qh(qu[n]),t.a));return r.push(zu(t.b,Vh,t.a)),a=r,new de(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Te(a[s],b(t,s),o);else n(i)})}Uh.prototype.g=function(){var e=this,n=qh("local");Hh(this,function(){return we().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return jh(e,"local").then(function(){e.c=n})})})};var Vh={name:"persistence",F:"session"};function qh(t){return{name:"authUser",F:t}}function Bh(t,e){return Hh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Wh(t){return Hh(t,function(){return zu(t.b,t.c,t.a)})}function Gh(t,e){return Hh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),xh(t||{})})})}function Hh(t,e){return t.f=t.f.then(e,e),t.f}function zh(t){if(this.l=!1,Vr(this,"settings",new Uc),Vr(this,"app",t),!tl(this).options||!tl(this).options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s,a,u;t=zl.SDK_VERSION?mr(zl.SDK_VERSION):null,this.b=new qs(tl(this).options&&tl(this).options.apiKey,N(T),t),this.P=[],this.m=[],this.O=[],this.$b=zl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=zl.INTERNAL.createSubscribe(m(this.yc,this)),$h(this,null),this.i=new Uh(tl(this).options.apiKey+":"+tl(this).name),this.B=new Lh(tl(this).options.apiKey+":"+tl(this).name),this.Z=il(this,(e=tl(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Mh,t.a).then(function(t){return t&&e&&(t.authDomain=e),xh(t||{})})}(e.B,tl(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),Fh(e.B)});return il(e,t)}(n).then(function(){return Gh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Bh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Wh(n.i)})):null}).then(function(t){$h(n,t||null)}),il(n,r))),this.h=il(this,(i=this).Z.then(function(){return Xh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(qh("local"),t.a,i.oa))})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=tl(o=this).options.authDomain,a=tl(o).options.apiKey,s&&Er()&&(o.Zb=o.Z.then(function(){var t;if(!o.l)return o.a=Oc(s,a,tl(o).name),Ec(o.a,o),el(o)&&yh(el(o)),o.D&&(yh(o.D),(t=o.D).va(o.ja()),uh(t,o),ch(t=o.D,o.N),hh(t,o),o.D=null),o.a})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,pn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function Kh(t){Be.call(this,"languageCodeChanged"),this.g=t}function Qh(t){Be.call(this,"frameworkChanged"),this.c=t}function Yh(t){return t.Zb||Ee(new w("auth-domain-config-required"))}function Xh(t){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var e=Yh(t).then(function(){return t.a.pa()}).then(function(t){return t?Br(t):null});return il(t,e)}function Jh(o,s){var a={};return a.apiKey=tl(o).options.apiKey,a.authDomain=tl(o).options.authDomain,a.appName=tl(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new ah(t,e),n&&(i.ga=n),r&&ch(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return el(o)&&t.uid==el(o).uid?Ih(el(o),t):($h(o,t),yh(t)),o.ca(t)}).then(function(){rl(o)})}function $h(t,e){var n,r;el(t)&&(n=el(t),r=t.Ma,G(n.R,function(t){return t==r}),rn(el(t),"tokenChanged",t.xa),rn(el(t),"userDeleted",t.ya),rn(el(t),"userInvalidated",t.za),ph(el(t))),e&&(e.R.push(t.Ma),tn(e,"tokenChanged",t.xa),tn(e,"userDeleted",t.ya),tn(e,"userInvalidated",t.za),0<t.s&&fh(e)),Vr(t,"currentUser",e),e&&(e.va(t.ja()),uh(e,t),ch(e,t.N),hh(e,t))}function Zh(n,t){var e=null,r=null;return il(n,t.then(function(t){return e=ko(t),r=Vi(t),Jh(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Br({user:el(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function tl(t){return t.app}function el(t){return t.currentUser}function nl(t){return el(t)&&el(t)._lat||null}function rl(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](nl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](nl(t))}}function il(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function ol(){}function sl(){this.a={},this.b=1e12}Uh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in qu)if(qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(fr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!_u()&&"none"!==t)throw n;break;default:if(!wr()&&"none"!==t)throw n}}(e),Hh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,jh(r,e)}).then(function(){if(r.c=qh(e),n)return r.b.set(r.c,n,r.a)}):we()})},e(zh,pn),e(Kh,Be),e(Qh,Be),(t=zh.prototype).tb=function(t){return t=this.i.tb(t),il(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Qs(this.b,this.$),this.dispatchEvent(new Kh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Ys(this.b,zl.SDK_VERSION?mr(zl.SDK_VERSION,this.N):null),this.dispatchEvent(new Qh(this.N))},t.Ea=function(){return z(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:tl(this).options.apiKey,authDomain:tl(this).options.authDomain,appName:tl(this).name,currentUser:el(this)&&el(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return Zh(i,ca(i.b,o))})},t.Vc=function(e){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var n=this,t=ji(e.providerId),r=kr(),i=null;(!Sr()||hr())&&tl(this).options.authDomain&&e.isOAuthProvider&&(i=au(tl(this).options.authDomain,tl(this).options.apiKey,tl(this).name,"signInViaPopup",e,null,r,zl.SDK_VERSION||null,null,null,this.S()));var o=or(i,t&&t.ta,t&&t.sa);return il(this,t=Yh(this).then(function(t){return Cc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new de(function(t,e){n.la("signInViaPopup",null,new w("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=kc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&ir(o),t?Br(t):null}).o(function(t){throw o&&ir(o),t}))},t.Wc=function(t){if(!Er())return Ee(new w("operation-not-supported-in-this-environment"));var e=this;return il(this,Yh(this).then(function(){return Hh(t=e.i,function(){return t.b.set(Vh,t.c.F,t.a)});var t}).then(function(){return Ac(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Xh(this).then(function(t){return e.a&&xc(e.a.b),t}).o(function(t){throw e.a&&xc(e.a.b),t})},t.bd=function(t){if(!t)return Ee(new w("null-user"));if(this.R!=t.tenantId)return Ee(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=tl(this).options.apiKey,n.authDomain=tl(this).options.authDomain,n.appName=tl(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Ws]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new ah(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&ch(i,s),Ih(i,r),i);return il(this,this.h.then(function(){if(tl(e).options.apiKey!=t.l)return c.reload()}).then(function(){return el(e)&&t.uid==el(e).uid?(Ih(el(e),t),e.ca(t)):($h(e,c),yh(c),e.ca(c))}).then(function(){rl(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&xc(t.a.b),el(t)?($h(t,null),Wh(t.i).then(function(){rl(t)})):we()});return il(this,e)},t.Xc=function(){var r=this;return Gh(this.i,tl(this).options.authDomain).then(function(t){if(!r.l){var e,n;if((n=el(r)&&t)&&(n=el(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ih(el(r),t),el(r).I();(el(r)||t)&&($h(r,t),t&&(yh(t),t.ga=r.B),r.a&&Ec(r.a,r),rl(r))}})},t.ca=function(t){return Bh(this.i,t)},t.jc=function(){rl(this),this.ca(el(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return Zh(e,we(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(el(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(el(r))},(e=this).O.push(n),il(e,e.h.then(function(){!e.l&&B(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(nl(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){v(t)?t(el(r)):v(t.next)&&t.next(el(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),v(t)?t(el(r)):v(t.next)&&t.next(el(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return el(e)?el(e).I(t).then(function(t){return{accessToken:t}}):null});return il(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return Zh(n,za(n.b,Va,{token:t}))}).then(function(t){var e=t.user;return Th(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return Zh(n,za(n.b,qa,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return Zh(n,za(n.b,va,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return Zh(e,t.ia(e.b))})},t.Qc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=el(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Zh(n,n.b.vb()).then(function(t){var e=t.user;return Th(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return el(this)&&el(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&el(this)&&fh(el(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&el(this)&&ph(el(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),il(this,this.h.then(function(){e.l||B(e.m,t)&&t(nl(e))}))},t.removeAuthTokenListener=function(e){G(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(qh("local"),t.a,this.oa),this.a&&(Tc(this.a,this),xc(this.a.b)),Promise.resolve()},t.fc=function(t){return il(this,za(this.b,ya,{identifier:t,continueUri:Tr()?er():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!To(t)},t.sb=function(e,n){var r=this;return il(this,we().then(function(){var t=new _i(n);if(!t.c)throw new w("argument-error",Ti+" must be true when sending sign in link to email");return Ri(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return il(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return il(this,this.b.Pa(t).then(function(t){return new Jr(t)}))},t.fb=function(t){return il(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return il(this,we().then(function(){return void 0===t||ut(t)?{}:Ri(new _i(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return il(this,Vc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return il(this,we().then(function(){var t=r||er(),e=Eo(n,t);if(!(t=To(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Ya(e)}))},ol.prototype.render=function(){},ol.prototype.reset=function(){},ol.prototype.getResponse=function(){},ol.prototype.execute=function(){};var al=null;function ul(t,e){return(e=cl(e))&&t.a[e]||null}function cl(t){return(t=void 0===t?1e12:t)?t.toString():null}function hl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():tn(this.f,"click",this.i)}function ll(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function fl(){}function pl(){}sl.prototype.render=function(t,e){return this.a[this.b.toString()]=new hl(t,e),this.b++},sl.prototype.reset=function(t){var e=ul(this,t);t=cl(t),e&&t&&(e.delete(),delete this.a[t])},sl.prototype.getResponse=function(t){return(t=ul(this,t))?t.getResponse():null},sl.prototype.execute=function(t){(t=ul(this,t))&&t.execute()},hl.prototype.getResponse=function(){return ll(this),this.b},hl.prototype.execute=function(){ll(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},hl.prototype.delete=function(){ll(this),this.g=!0,clearTimeout(this.a),this.a=null,rn(this.f,"click",this.i)},Vr(fl,"FACTOR_ID","phone"),pl.prototype.g=function(){return we(al=al||new sl)},pl.prototype.c=function(){};var dl=null;function vl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),gl=new Pr(3e4,6e4);vl.prototype.g=function(i){var o=this;return new de(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},gl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new w("internal-error"))),delete l[o.a]},we(xs(_t(yl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},vl.prototype.c=function(){this.b--};var ml=null;function bl(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?dl=dl||new pl:ml=ml||new vl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[El])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tl],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[_l];this.a[_l]=function(t){var e;Il(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=_r(u,l))&&e(t)};var c=this.a[wl];this.a[wl]=function(){var t;Il(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=_r(c,l))&&t()}}var _l="callback",wl="expired-callback",El="sitekey",Tl="size";function Il(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Sl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function Cl(t){if(t.D)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nl(t,e,n){var r=!1;try{this.b=n||zl.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=zl.SDK_VERSION?mr(zl.SDK_VERSION,o):null,bl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(T),r)}function Al(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=kl.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=kl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=bl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Sl(this,we().then(function(){if(Tr()&&!lr())return ur();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,za(e.s,ka,{})}).then(function(t){e.a[El]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Cl(this);var n=this;return Sl(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Cl(this);var i=this;return Sl(this,this.render().then(function(e){return new de(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Cl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Cl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.u);for(;t=e.firstChild;)e.removeChild(t)}},e(Nl,bl);var kl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Ol(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Pl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Dl(t,e){return{name:t||"",J:"a function",optional:!!e,K:v}}function xl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ll(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Ml(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Fl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Ul(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&v(t.Fa)}function jl(t){return y(t)&&"string"==typeof t.uid}function Vl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!v(t.verify))}}}function ql(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Bl(t,e){for(var n in e){var r=e[n].name;t[r]=Hl(r,t[n],e[n].j)}}function Wl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){Al(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Gl(t,e,n,r){t[e]=Hl(e,n,r)}function Hl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Al(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Bl(zh.prototype,{fb:{name:"applyActionCode",j:[Rl("code")]},Pa:{name:"checkActionCode",j:[Rl("code")]},jb:{name:"confirmPasswordReset",j:[Rl("code"),Rl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Rl("email"),Rl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Rl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Rl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[ql(Pl(),Dl(),"nextOrObserver"),Dl("opt_error",!0),Dl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[ql(Pl(),Dl(),"nextOrObserver"),Dl("opt_error",!0),Dl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Rl("email"),ql(Pl("opt_actionCodeSettings",!0),xl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Rl("email"),Pl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Rl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ll()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ll()]},Rc:{name:"signInWithCustomToken",j:[Rl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Rl("email"),Rl("password")]},Tc:{name:"signInWithEmailLink",j:[Rl("email"),Rl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Rl("phoneNumber"),Vl()]},Vc:{name:"signInWithPopup",j:[Fl()]},Wc:{name:"signInWithRedirect",j:[Fl()]},bd:{name:"updateCurrentUser",j:[ql({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ah)}},xl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Rl("code")]}}),Wl(zh.prototype,{lc:{name:"languageCode",gb:ql(Rl(),xl(),"languageCode")},ti:{name:"tenantId",gb:ql(Rl(),xl(),"tenantId")}}),(zh.Persistence=qu).LOCAL="local",zh.Persistence.SESSION="session",zh.Persistence.NONE="none",Bl(ah.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Ol("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ol("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ll()]},mb:{name:"linkWithCredential",j:[Ll()]},Bc:{name:"linkWithPhoneNumber",j:[Rl("phoneNumber"),Vl()]},Cc:{name:"linkWithPopup",j:[Fl()]},Dc:{name:"linkWithRedirect",j:[Fl()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ll()]},pb:{name:"reauthenticateWithCredential",j:[Ll()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Rl("phoneNumber"),Vl()]},Lc:{name:"reauthenticateWithPopup",j:[Fl()]},Mc:{name:"reauthenticateWithRedirect",j:[Fl()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[ql(Pl("opt_actionCodeSettings",!0),xl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},ad:{name:"unlink",j:[Rl("provider")]},xb:{name:"updateEmail",j:[Rl("email")]},yb:{name:"updatePassword",j:[Rl("password")]},cd:{name:"updatePhoneNumber",j:[Ll("phone")]},zb:{name:"updateProfile",j:[Pl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Rl("email"),ql(Pl("opt_actionCodeSettings",!0),xl(null,!0),"opt_actionCodeSettings",!0)]}}),Bl(sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Bl(ol.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Bl(de.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Wl(Uc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Ol("appVerificationDisabledForTesting")}}),Bl(jc.prototype,{confirm:{name:"confirm",j:[Rl("verificationCode")]}}),Gl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[ql(Rl(),Pl(),"json")]),Gl(wo,"credential",function(t,e){return new bo(t,e)},[Rl("email"),Rl("password")]),Bl(bo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(ho.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Gl(ho,"credential",lo,[ql(Rl(),Pl(),"token")]),Gl(wo,"credentialWithLink",Eo,[Rl("email"),Rl("emailLink")]),Bl(fo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Gl(fo,"credential",po,[ql(Rl(),Pl(),"token")]),Bl(vo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Gl(vo,"credential",yo,[ql(Rl(),ql(Pl(),xl()),"idToken"),ql(Rl(),xl(),"accessToken",!0)]),Bl(go.prototype,{Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Gl(go,"credential",mo,[ql(Rl(),Pl(),"token"),Rl("secret",!0)]),Bl(co.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},credential:{name:"credential",j:[ql(Rl(),ql(Pl(),xl()),"optionsOrIdToken"),ql(Rl(),xl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Bl(io.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(eo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(No,"credential",Ao,[Rl("verificationId"),Rl("verificationCode")]),Bl(No.prototype,{cb:{name:"verifyPhoneNumber",j:[ql(Rl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Ul(t.session,Ji)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ul(t.session,$i)&&jl(t.multiFactorHint):t.session&&t.multiFactorUid?Ul(t.session,$i)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Vl()]}}),Bl(Io.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(w.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(Fo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(Mo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(Hc.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Bl(Bc.prototype,{Pc:{name:"resolveSignIn",j:[Ml()]}}),Bl(Jc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Ml(),Rl("displayName",!0)]},$c:{name:"unenroll",j:[ql({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:jl},Rl(),"multiFactorInfoIdentifier")]}}),Bl(Nl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Gl(li,"parseLink",bi,[Rl("link")]),Gl(fl,"assertion",function(t){return new Yc(t)},[Ll("phone")]),function(){if(void 0===zl||!zl.INTERNAL||!zl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:$r,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:zh,AuthCredential:Zi,Error:w};Gl(t,"EmailAuthProvider",wo,[]),Gl(t,"FacebookAuthProvider",ho,[]),Gl(t,"GithubAuthProvider",fo,[]),Gl(t,"GoogleAuthProvider",vo,[]),Gl(t,"TwitterAuthProvider",go,[]),Gl(t,"OAuthProvider",co,[Rl("providerId")]),Gl(t,"SAMLAuthProvider",uo,[Rl("providerId")]),Gl(t,"PhoneAuthProvider",No,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof zh)}}]),Gl(t,"RecaptchaVerifier",Nl,[ql(Rl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Pl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof zl.app.App)}}]),Gl(t,"ActionCodeURL",li,[]),Gl(t,"PhoneMultiFactorGenerator",fl,[]),zl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new zh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),zl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),zl.registerVersion("@firebase/auth","0.14.7"),zl.INTERNAL.extendNamespace({User:ah})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var wu=(Eu.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),_a(e))},Eu.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:ba(e)},Eu.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Eu.prototype.prefixedName_=function(t){return this.prefix_+t},Eu.prototype.toString=function(){return this.domStorage_.toString()},Eu);function Eu(t){this.domStorage_=t,this.prefix_="firebase:"}var Tu=(Iu.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Iu.prototype.get=function(t){return Ea(this.cache_,t)?this.cache_[t]:null},Iu.prototype.remove=function(t){delete this.cache_[t]},Iu);function Iu(){this.cache_={},this.isInMemoryStorage=!0}function Su(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wu(e)}}catch(t){}return new Tu}function Cu(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ea(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t),n=new Ca;n.update(e);var r=n.digest();return ra.encodeByteArray(r)}function Nu(t,e){ea(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Uu.logLevel=za.VERBOSE,qu=Uu.log.bind(Uu),e&&Fu.set("logging_enabled",!0)):"function"==typeof t?qu=t:(qu=null,Fu.remove("logging_enabled"))}function Au(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Vu.apply(void 0,Xs(t));Uu.error(n)}function ku(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Vu.apply(void 0,Xs(t));throw Uu.error(n),new Error(n)}function Ru(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Vu.apply(void 0,Xs(t));Uu.warn(n)}function Ou(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Pu(t,e){return t===e?0:t<e?-1:1}function Du(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_a(e))}function xu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Lu,Mu=Su("localStorage"),Fu=Su("sessionStorage"),Uu=new tu("@firebase/database"),ju=(Lu=1,function(){return Lu++}),Vu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Vu.apply(null,i):n+="object"==typeof i?_a(i):i,n+=" "}return n},qu=null,Bu=!0,Wu=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Bu&&(Bu=!1,null===qu&&!0===Fu.get("logging_enabled")&&Nu(!0)),qu&&(t=Vu.apply(null,e),qu(t))},Gu=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Wu.apply(void 0,Xs([n],t))}},Hu="[MIN_NAME]",zu="[MAX_NAME]",Ku=function(t,e){if(t===e)return 0;if(t===Hu||e===zu)return-1;if(e===Hu||t===zu)return 1;var n=tc(t),r=tc(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Qu=function(t){if("object"!=typeof t||null===t)return _a(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=_a(e[i]),r+=":",r+=Qu(t[e[i]]);return r+="}"};function Yu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Xu(t){var e,n,r,i;ea(!Ou(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Ju(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw Ru("Exception was thrown by user callback.",t),e},Math.floor(0))}}function $u(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Zu=new RegExp("^-?(0*)\\d{1,10}$"),tc=function(t){if(Zu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},ec=(Object.defineProperty(nc,"Empty",{get:function(){return new nc("")},enumerable:!0,configurable:!0}),nc.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},nc.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},nc.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new nc(this.pieces_,t)},nc.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},nc.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},nc.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},nc.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},nc.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new nc(t,0)},nc.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof nc)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new nc(e,0)},nc.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},nc.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return nc.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},nc.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Ku(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},nc.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},nc.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},nc);function nc(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var rc=(Object.defineProperty(ic,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(ic,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),ic.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Ma(t),this.checkValid_()},ic.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Ma(t),0<this.parts_.length&&--this.byteLength_},ic.prototype.checkValid_=function(){if(this.byteLength_>ic.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+ic.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>ic.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ic.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},ic.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},ic);function ic(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Ma(this.parts_[n]);this.checkValid_()}var oc="firebaseio.com",sc="websocket",ac="long_polling",uc=(cc.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},cc.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},cc.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},cc.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},cc.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mu.set("host:"+this.host,this.internalHost))},cc.prototype.connectionURL=function(t,e){var n;if(ea("string"==typeof t,"typeof type must == string"),ea("object"==typeof e,"typeof params must == object"),t===sc)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==ac)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Yu(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},cc.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},cc.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},cc);function cc(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Mu.get("host:"+t)||this.host}function hc(t){var e=Ec(t),n=e.namespace;"firebase.com"===e.domain&&ku(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||ku("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ru("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new uc(e.host,e.secure,n,r,"",n!==e.subdomain),path:new ec(e.pathString)}}function lc(t){return"string"==typeof t&&0!==t.length&&!Tc.test(t)}function fc(t){return"string"==typeof t&&0!==t.length&&!Ic.test(t)}function pc(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ou(t)||t&&"object"==typeof t&&Ea(t,".sv")}function dc(t,e,n,r,i){i&&void 0===n||Cc(Da(t,e,i),n,r)}function vc(t,e,n,r,i){if(!i||void 0!==n){var o=Da(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Yu(n,function(t,e){var n=new ec(t);if(Cc(o,e,r.child(n)),".priority"===n.getBack()&&!pc(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!lc(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ec.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function yc(t,e,n,r){if(!r||void 0!==n){if(Ou(n))throw new Error(Da(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pc(n))throw new Error(Da(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function gc(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Da(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function mc(t,e,n,r){if(!(r&&void 0===n||lc(n)))throw new Error(Da(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function bc(t,e,n,r){if(!(r&&void 0===n||fc(n)))throw new Error(Da(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function _c(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function wc(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!lc(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!fc(r)))throw new Error(Da(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Ec=function(t){var e,n,r,i,o,s,a="",u="",c="",h="",l="",f=!0,p="https",d=443;return"string"==typeof t&&(0<=(i=t.indexOf("//"))&&(p=t.substring(0,i-1),t=t.substring(i+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),a=t.substring(0,Math.min(e,n)),e<n&&(h=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),r=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Qs(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ru("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(i=a.indexOf(":"))?(f="https"===p||"wss"===p,d=parseInt(a.substring(i+1),10)):i=a.length,"localhost"===(o=a.slice(0,i)).toLowerCase()?u="localhost":o.split(".").length<=2?u=o:(s=a.indexOf("."),c=a.substring(0,s).toLowerCase(),u=a.substring(s+1),l=c),"ns"in r&&(l=r.ns)),{host:a,port:d,domain:u,subdomain:c,secure:f,scheme:p,pathString:h,namespace:l}},Tc=/[\[\].#$\/\u0000-\u001F\u007F]/,Ic=/[\[\].#$\u0000-\u001F\u007F]/,Sc=10485760,Cc=function(n,t,e){var r=e instanceof ec?new rc(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Ou(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Sc/3&&Ma(t)>Sc)throw new Error(n+"contains a string greater than "+Sc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Yu(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!lc(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Cc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Nc=(Ac.prototype.cancel=function(t){Pa("OnDisconnect.cancel",0,1,arguments.length),xa("OnDisconnect.cancel",1,t,!0);var e=new sa;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Ac.prototype.remove=function(t){Pa("OnDisconnect.remove",0,1,arguments.length),_c("OnDisconnect.remove",this.path_),xa("OnDisconnect.remove",1,t,!0);var e=new sa;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Ac.prototype.set=function(t,e){Pa("OnDisconnect.set",1,2,arguments.length),_c("OnDisconnect.set",this.path_),dc("OnDisconnect.set",1,t,this.path_,!1),xa("OnDisconnect.set",2,e,!0);var n=new sa;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Ac.prototype.setWithPriority=function(t,e,n){Pa("OnDisconnect.setWithPriority",2,3,arguments.length),_c("OnDisconnect.setWithPriority",this.path_),dc("OnDisconnect.setWithPriority",1,t,this.path_,!1),yc("OnDisconnect.setWithPriority",2,e,!1),xa("OnDisconnect.setWithPriority",3,n,!0);var r=new sa;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Ac.prototype.update=function(t,e){if(Pa("OnDisconnect.update",1,2,arguments.length),_c("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ru("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vc("OnDisconnect.update",1,t,this.path_,!1),xa("OnDisconnect.update",2,e,!0);var i=new sa;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Ac);function Ac(t,e){this.repo_=t,this.path_=e}var kc=(Rc.prototype.toJSON=function(){return Pa("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Rc);function Rc(t,e){this.committed=t,this.snapshot=e}var Oc,Pc,Dc,xc=(Oc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pc=0,Dc=[],function(t){var e=t===Pc;Pc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Oc.charAt(t%64),t=Math.floor(t/64);ea(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Dc[r];r--)Dc[r]=0;Dc[r]++}else for(r=0;r<12;r++)Dc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Oc.charAt(Dc[r]);return ea(20===i.length,"nextPushId: Length should be 20."),i}),Lc=(Mc.Wrap=function(t,e){return new Mc(t,e)},Mc);function Mc(t,e){this.name=t,this.node=e}var Fc,Uc=(jc.prototype.getCompare=function(){return this.compare.bind(this)},jc.prototype.indexedValueChanged=function(t,e){var n=new Lc(Hu,t),r=new Lc(Hu,e);return 0!==this.compare(n,r)},jc.prototype.minPost=function(){return Lc.MIN},jc);function jc(){}var Vc,qc=(Gs(Bc,Vc=Uc),Object.defineProperty(Bc,"__EMPTY_NODE",{get:function(){return Fc},set:function(t){Fc=t},enumerable:!0,configurable:!0}),Bc.prototype.compare=function(t,e){return Ku(t.name,e.name)},Bc.prototype.isDefinedOn=function(t){throw na("KeyIndex.isDefinedOn not expected to be called.")},Bc.prototype.indexedValueChanged=function(t,e){return!1},Bc.prototype.minPost=function(){return Lc.MIN},Bc.prototype.maxPost=function(){return new Lc(zu,Fc)},Bc.prototype.makePost=function(t,e){return ea("string"==typeof t,"KeyIndex indexValue must always be a string."),new Lc(t,Fc)},Bc.prototype.toString=function(){return".key"},Bc);function Bc(){return null!==Vc&&Vc.apply(this,arguments)||this}var Wc,Gc=new qc;function Hc(t){return"number"==typeof t?"number:"+Xu(t):"string:"+t}var zc,Kc,Qc,Yc,Xc=function(t){var e;t.isLeafNode()?(e=t.val(),ea("string"==typeof e||"number"==typeof e||"object"==typeof e&&Ea(e,".sv"),"Priority must be a string or number.")):ea(t===Wc||t.isEmpty(),"priority of unexpected type."),ea(t===Wc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Jc=(Object.defineProperty($c,"__childrenNodeConstructor",{get:function(){return zc},set:function(t){zc=t},enumerable:!0,configurable:!0}),$c.prototype.isLeafNode=function(){return!0},$c.prototype.getPriority=function(){return this.priorityNode_},$c.prototype.updatePriority=function(t){return new $c(this.value_,t)},$c.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:$c.__childrenNodeConstructor.EMPTY_NODE},$c.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:$c.__childrenNodeConstructor.EMPTY_NODE},$c.prototype.hasChild=function(){return!1},$c.prototype.getPredecessorChildName=function(t,e){return null},$c.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:$c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},$c.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(ea(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,$c.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},$c.prototype.isEmpty=function(){return!1},$c.prototype.numChildren=function(){return 0},$c.prototype.forEachChild=function(t,e){return!1},$c.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},$c.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Hc(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Xu(this.value_):this.value_,this.lazyHash_=Cu(t)),this.lazyHash_},$c.prototype.getValue=function(){return this.value_},$c.prototype.compareTo=function(t){return t===$c.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof $c.__childrenNodeConstructor?-1:(ea(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},$c.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=$c.VALUE_TYPE_ORDER.indexOf(e),i=$c.VALUE_TYPE_ORDER.indexOf(n);return ea(0<=r,"Unknown leaf type: "+e),ea(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},$c.prototype.withIndex=function(){return this},$c.prototype.isIndexed=function(){return!0},$c.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},$c.VALUE_TYPE_ORDER=["object","boolean","number","string"],$c);function $c(t,e){void 0===e&&(e=$c.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ea(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Xc(this.priorityNode_)}function Zc(){return null!==Yc&&Yc.apply(this,arguments)||this}var th=new(Gs(Zc,Yc=Uc),Zc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Ku(t.name,e.name):i},Zc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Zc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Zc.prototype.minPost=function(){return Lc.MIN},Zc.prototype.maxPost=function(){return new Lc(zu,new Jc("[PRIORITY-POST]",Qc))},Zc.prototype.makePost=function(t,e){var n=Kc(t);return new Lc(e,new Jc("[PRIORITY-POST]",n))},Zc.prototype.toString=function(){return".priority"},Zc),eh=(nh.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},nh.prototype.hasNext=function(){return 0<this.nodeStack_.length},nh.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},nh);function nh(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var rh=(ih.prototype.copy=function(t,e,n,r,i){return new ih(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},ih.prototype.count=function(){return this.left.count()+1+this.right.count()},ih.prototype.isEmpty=function(){return!1},ih.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},ih.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},ih.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},ih.prototype.minKey=function(){return this.min_().key},ih.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},ih.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},ih.prototype.removeMin_=function(){if(this.left.isEmpty())return ah.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},ih.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return ah.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},ih.prototype.isRed_=function(){return this.color},ih.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},ih.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},ih.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},ih.prototype.rotateLeft_=function(){var t=this.copy(null,null,ih.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},ih.prototype.rotateRight_=function(){var t=this.copy(null,null,ih.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},ih.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},ih.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},ih.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},ih.RED=!0,ih.BLACK=!1,ih);function ih(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:ih.RED,this.left=null!=r?r:ah.EMPTY_NODE,this.right=null!=i?i:ah.EMPTY_NODE}var oh=(sh.prototype.copy=function(t,e,n,r,i){return this},sh.prototype.insert=function(t,e,n){return new rh(t,e,null)},sh.prototype.remove=function(t,e){return this},sh.prototype.count=function(){return 0},sh.prototype.isEmpty=function(){return!0},sh.prototype.inorderTraversal=function(t){return!1},sh.prototype.reverseTraversal=function(t){return!1},sh.prototype.minKey=function(){return null},sh.prototype.maxKey=function(){return null},sh.prototype.check_=function(){return 0},sh.prototype.isRed_=function(){return!1},sh);function sh(){}var ah=(uh.prototype.insert=function(t,e){return new uh(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,rh.BLACK,null,null))},uh.prototype.remove=function(t){return new uh(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rh.BLACK,null,null))},uh.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},uh.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},uh.prototype.isEmpty=function(){return this.root_.isEmpty()},uh.prototype.count=function(){return this.root_.count()},uh.prototype.minKey=function(){return this.root_.minKey()},uh.prototype.maxKey=function(){return this.root_.maxKey()},uh.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},uh.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},uh.prototype.getIterator=function(t){return new eh(this.root_,null,this.comparator_,!1,t)},uh.prototype.getIteratorFrom=function(t,e){return new eh(this.root_,t,this.comparator_,!1,e)},uh.prototype.getReverseIteratorFrom=function(t,e){return new eh(this.root_,t,this.comparator_,!0,e)},uh.prototype.getReverseIterator=function(t){return new eh(this.root_,null,this.comparator_,!0,t)},uh.EMPTY_NODE=new oh,uh);function uh(t,e){void 0===e&&(e=uh.EMPTY_NODE),this.comparator_=t,this.root_=e}var ch=Math.log(2),hh=(lh.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},lh);function lh(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ch,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var fh,ph,dh=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return s=c[t],a=h?h(s):s,new rh(a,s.node,rh.BLACK,null,null);var r=parseInt(n/2,10)+t,i=l(t,r),o=l(r+1,e),s=c[r],a=h?h(s):s;return new rh(a,s.node,rh.BLACK,i,o)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new rh(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,rh.BLACK):(r(s,rh.BLACK),r(s,rh.RED))}return n}(new hh(c.length));return new ah(e||t,n)},vh={},yh=(Object.defineProperty(gh,"Default",{get:function(){return ea(th,"ChildrenNode.ts has not been loaded"),fh=fh||new gh({".priority":vh},{".priority":th})},enumerable:!0,configurable:!0}),gh.prototype.get=function(t){var e=Ta(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ah?e:null},gh.prototype.hasIndex=function(t){return Ea(this.indexSet_,t.toString())},gh.prototype.addIndex=function(t,e){ea(t!==Gc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Lc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?dh(r,t.getCompare()):vh;var a=t.toString(),u=Hs({},this.indexSet_);u[a]=t;var c=Hs({},this.indexes_);return c[a]=n,new gh(c,u)},gh.prototype.addToIndexes=function(u,c){var h=this;return new gh(Sa(this.indexes_,function(t,e){var n=Ta(h.indexSet_,e);if(ea(n,"Missing index implementation for "+e),t===vh){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(Lc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),dh(r,n.getCompare())}return vh}var s=c.get(u.name),a=t;return s&&(a=a.remove(new Lc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},gh.prototype.removeFromIndexes=function(n,r){return new gh(Sa(this.indexes_,function(t){if(t===vh)return t;var e=r.get(n.name);return e?t.remove(new Lc(n.name,e)):t}),this.indexSet_)},gh);function gh(t,e){this.indexes_=t,this.indexSet_=e}function mh(t,e){return Ku(t.name,e.name)}function bh(t,e){return Ku(t,e)}var _h,wh=(Object.defineProperty(Eh,"EMPTY_NODE",{get:function(){return ph=ph||new Eh(new ah(bh),null,yh.Default)},enumerable:!0,configurable:!0}),Eh.prototype.isLeafNode=function(){return!1},Eh.prototype.getPriority=function(){return this.priorityNode_||ph},Eh.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Eh(this.children_,t,this.indexMap_)},Eh.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ph:e},Eh.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Eh.prototype.hasChild=function(t){return null!==this.children_.get(t)},Eh.prototype.updateImmediateChild=function(t,e){if(ea(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Lc(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?ph:this.priorityNode_;return new Eh(r,o,i)},Eh.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;ea(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Eh.prototype.isEmpty=function(){return this.children_.isEmpty()},Eh.prototype.numChildren=function(){return this.children_.count()},Eh.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(th,function(t,e){r[t]=e.val(n),i++,s&&Eh.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Eh.prototype.hash=function(){var r;return null===this.lazyHash_&&(r="",this.getPriority().isEmpty()||(r+="priority:"+Hc(this.getPriority().val())+":"),this.forEachChild(th,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":Cu(r)),this.lazyHash_},Eh.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Lc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Eh.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Eh.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Lc(e,this.children_.get(e)):null},Eh.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Eh.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Lc(e,this.children_.get(e)):null},Eh.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Eh.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Eh.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Lc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Eh.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Eh.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Lc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Eh.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ih?-1:0},Eh.prototype.withIndex=function(t){if(t===Gc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Eh(this.children_,this.priorityNode_,e)},Eh.prototype.isIndexed=function(t){return t===Gc||this.indexMap_.hasIndex(t)},Eh.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(th),r=e.getIterator(th),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Eh.prototype.resolveIndex_=function(t){return t===Gc?null:this.indexMap_.get(t.toString())},Eh.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Eh);function Eh(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Xc(this.priorityNode_),this.children_.isEmpty()&&ea(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Th(){return _h.call(this,new ah(bh),wh.EMPTY_NODE,yh.Default)||this}var Ih=new(Gs(Th,_h=wh),Th.prototype.compareTo=function(t){return t===this?0:1},Th.prototype.equals=function(t){return t===this},Th.prototype.getPriority=function(){return this},Th.prototype.getImmediateChild=function(t){return wh.EMPTY_NODE},Th.prototype.isEmpty=function(){return!1},Th);Object.defineProperties(Lc,{MIN:{value:new Lc(Hu,wh.EMPTY_NODE)},MAX:{value:new Lc(zu,Ih)}}),qc.__EMPTY_NODE=wh.EMPTY_NODE,Jc.__childrenNodeConstructor=wh,Wc=Ih,Qc=Ih;var Sh,Ch=!0;function Nh(r,t){if(void 0===t&&(t=null),null===r)return wh.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),ea(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Jc(r,Nh(t));if(r instanceof Array||!Ch){var i=wh.EMPTY_NODE;return Yu(r,function(t,e){var n;Ea(r,t)&&"."!==t.substring(0,1)&&(!(n=Nh(e)).isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n)))}),i.updatePriority(Nh(t))}var o=[],s=!1;if(Yu(r,function(t,e){var n;"."!==t.substring(0,1)&&((n=Nh(e)).isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new Lc(t,n))))}),0===o.length)return wh.EMPTY_NODE;var e=dh(o,mh,function(t){return t.name},bh);if(s){var n=dh(o,th.getCompare());return new wh(e,Nh(t),new yh({".priority":n},{".priority":th}))}return new wh(e,Nh(t),yh.Default)}function Ah(){return null!==Sh&&Sh.apply(this,arguments)||this}Kc=Nh;var kh,Rh=new(Gs(Ah,Sh=Uc),Ah.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Ku(t.name,e.name):n},Ah.prototype.isDefinedOn=function(t){return!0},Ah.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Ah.prototype.minPost=function(){return Lc.MIN},Ah.prototype.maxPost=function(){return Lc.MAX},Ah.prototype.makePost=function(t,e){var n=Nh(t);return new Lc(e,n)},Ah.prototype.toString=function(){return".value"},Ah),Oh=(Gs(Ph,kh=Uc),Ph.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Ph.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Ph.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Ku(t.name,e.name):i},Ph.prototype.makePost=function(t,e){var n=Nh(t),r=wh.EMPTY_NODE.updateChild(this.indexPath_,n);return new Lc(e,r)},Ph.prototype.maxPost=function(){var t=wh.EMPTY_NODE.updateChild(this.indexPath_,Ih);return new Lc(zu,t)},Ph.prototype.toString=function(){return this.indexPath_.slice().join("/")},Ph);function Ph(t){var e=kh.call(this)||this;return e.indexPath_=t,ea(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Dh=(xh.prototype.val=function(){return Pa("DataSnapshot.val",0,0,arguments.length),this.node_.val()},xh.prototype.exportVal=function(){return Pa("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},xh.prototype.toJSON=function(){return Pa("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},xh.prototype.exists=function(){return Pa("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},xh.prototype.child=function(t){Pa("DataSnapshot.child",0,1,arguments.length),t=String(t),bc("DataSnapshot.child",1,t,!1);var e=new ec(t),n=this.ref_.child(e);return new xh(this.node_.getChild(e),n,th)},xh.prototype.hasChild=function(t){Pa("DataSnapshot.hasChild",1,1,arguments.length),bc("DataSnapshot.hasChild",1,t,!1);var e=new ec(t);return!this.node_.getChild(e).isEmpty()},xh.prototype.getPriority=function(){return Pa("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},xh.prototype.forEach=function(n){var r=this;return Pa("DataSnapshot.forEach",1,1,arguments.length),xa("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new xh(e,r.ref_.child(t),th))})},xh.prototype.hasChildren=function(){return Pa("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(xh.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),xh.prototype.numChildren=function(){return Pa("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},xh.prototype.getRef=function(){return Pa("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(xh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),xh);function xh(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Lh=(Mh.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Mh.prototype.getEventType=function(){return this.eventType},Mh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Mh.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+_a(this.snapshot.exportVal())},Mh);function Mh(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Fh=(Uh.prototype.getPath=function(){return this.path},Uh.prototype.getEventType=function(){return"cancel"},Uh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Uh.prototype.toString=function(){return this.path.toString()+":cancel"},Uh);function Uh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var jh=(Vh.prototype.respondsTo=function(t){return"value"===t},Vh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Lh("value",this,new Dh(t.snapshotNode,e.getRef(),n))},Vh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ea(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Vh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Fh(this,t,e):null},Vh.prototype.matches=function(t){return t instanceof Vh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Vh.prototype.hasAnyCallback=function(){return null!==this.callback_},Vh);function Vh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var qh,Bh=(Wh.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return Ea(this.callbacks_,e)},Wh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Fh(this,t,e):null},Wh.prototype.createEvent=function(t,e){ea(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Lh(t.type,this,new Dh(t.snapshotNode,n,r),t.prevName)},Wh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ea(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Wh.prototype.matches=function(e){var n=this;if(e instanceof Wh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Wh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Wh);function Wh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Gh=(Object.defineProperty(Hh,"__referenceConstructor",{get:function(){return ea(qh,"Reference.ts has not been loaded"),qh},set:function(t){qh=t},enumerable:!0,configurable:!0}),Hh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Hu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==zu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===th){if(null!=e&&!pc(e)||null!=n&&!pc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ea(t.getIndex()instanceof Oh||t.getIndex()===Rh,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Hh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Hh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Hh.prototype.getQueryParams=function(){return this.queryParams_},Hh.prototype.getRef=function(){return Pa("Query.ref",0,0,arguments.length),new Hh.__referenceConstructor(this.repo,this.path)},Hh.prototype.on=function(t,e,n,r){Pa("Query.on",2,4,arguments.length),gc("Query.on",1,t,!1),xa("Query.on",2,e,!1);var i,o=Hh.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},Hh.prototype.onValueEvent=function(t,e,n){var r=new jh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Hh.prototype.onChildEvent=function(t,e,n){var r=new Bh(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Hh.prototype.off=function(t,e,n){Pa("Query.off",0,3,arguments.length),gc("Query.off",1,t,!0),xa("Query.off",2,e,!0),La("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new jh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Bh(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Hh.prototype.once=function(e,n,t,r){var i=this;Pa("Query.once",1,4,arguments.length),gc("Query.once",1,e,!1),xa("Query.once",2,n,!0);var o=Hh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new sa;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Hh.prototype.limitToFirst=function(t){if(Pa("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Hh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Hh.prototype.limitToLast=function(t){if(Pa("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Hh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Hh.prototype.orderByChild=function(t){if(Pa("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');bc("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new ec(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Oh(e),r=this.queryParams_.orderBy(n);return Hh.validateQueryEndpoints_(r),new Hh(this.repo,this.path,r,!0)},Hh.prototype.orderByKey=function(){Pa("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Gc);return Hh.validateQueryEndpoints_(t),new Hh(this.repo,this.path,t,!0)},Hh.prototype.orderByPriority=function(){Pa("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(th);return Hh.validateQueryEndpoints_(t),new Hh(this.repo,this.path,t,!0)},Hh.prototype.orderByValue=function(){Pa("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Rh);return Hh.validateQueryEndpoints_(t),new Hh(this.repo,this.path,t,!0)},Hh.prototype.startAt=function(t,e){void 0===t&&(t=null),Pa("Query.startAt",0,2,arguments.length),dc("Query.startAt",1,t,this.path,!0),mc("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Hh.validateLimit_(n),Hh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Hh(this.repo,this.path,n,this.orderByCalled_)},Hh.prototype.endAt=function(t,e){void 0===t&&(t=null),Pa("Query.endAt",0,2,arguments.length),dc("Query.endAt",1,t,this.path,!0),mc("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Hh.validateLimit_(n),Hh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Hh(this.repo,this.path,n,this.orderByCalled_)},Hh.prototype.equalTo=function(t,e){if(Pa("Query.equalTo",1,2,arguments.length),dc("Query.equalTo",1,t,this.path,!1),mc("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Hh.prototype.toString=function(){return Pa("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Hh.prototype.toJSON=function(){return Pa("Query.toJSON",0,1,arguments.length),this.toString()},Hh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Hh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Qu(t);return"{}"===e?"default":e},Hh.prototype.isEqual=function(t){if(Pa("Query.isEqual",1,1,arguments.length),!(t instanceof Hh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Hh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,xa(t,3,r.cancel,!0),r.context=n,La(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Da(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Hh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Hh);function Hh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var zh=(Kh.prototype.getImmediateChild=function(t){return new Kh(this.node_.getImmediateChild(t))},Kh.prototype.node=function(){return this.node_},Kh);function Kh(t){this.node_=t}var Qh=(Yh.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new Yh(this.syncTree_,e)},Yh.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Yh);function Yh(t,e){this.syncTree_=t,this.path_=e}function Xh(t,e,n,r){return el(e,new Qh(n,t),r)}function Jh(t,e,n){return el(t,new zh(e),n)}var $h=function(t,e,n){return t&&"object"==typeof t?(ea(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Zh(t[".sv"],e,n):"object"==typeof t[".sv"]?tl(t[".sv"],e):void ea(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Zh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ea(!1,"Unexpected server value: "+t)}},tl=function(t,e,n){t.hasOwnProperty("increment")||ea(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&ea(!1,"Unexpected increment value: "+r);var i=e.node();if(ea(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function el(t,r,i){var e=t.getPriority().val(),n=$h(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,s=$h(o.getValue(),r,i);return s!==o.getValue()||n!==o.getPriority().val()?new Jc(s,Nh(n)):t}var a=t,u=a;return n!==a.getPriority().val()&&(u=u.updatePriority(new Jc(n))),a.forEachChild(th,function(t,e){var n=el(e,r.getImmediateChild(t),i);n!==e&&(u=u.updateImmediateChild(t,n))}),u}var nl,rl,il=(ol.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},ol.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new ol),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},ol.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(th,function(t,e){n.remember(new ec(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},ol.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new ec(r.toString()+"/"+t);e.forEachTree(n,i)})},ol.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},ol);function ol(){this.value=null,this.children=new Map}(rl=nl=nl||{})[rl.OVERWRITE=0]="OVERWRITE",rl[rl.MERGE=1]="MERGE",rl[rl.ACK_USER_WRITE=2]="ACK_USER_WRITE",rl[rl.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var sl=(al.User=new al(!0,!1,null,!1),al.Server=new al(!1,!0,null,!1),al.forServerTaggedQuery=function(t){return new al(!1,!0,t,!0)},al);function al(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,ea(!r||e,"Tagged queries must be from server.")}var ul,cl=(hl.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return ea(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ec(t));return new hl(ec.Empty,e,this.revert)}return ea(this.path.getFront()===t,"operationForChild called for unrelated child."),new hl(this.path.popFront(),this.affectedTree,this.revert)},hl);function hl(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=nl.ACK_USER_WRITE,this.source=sl.User}var ll=(fl.fromObject=function(t){var n=fl.Empty;return Yu(t,function(t,e){n=n.set(new ec(t),e)}),n},fl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},fl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ec.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new ec(n).child(i.path),value:i.value}},fl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},fl.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):fl.Empty},fl.prototype.set=function(t,e){if(t.isEmpty())return new fl(e,this.children);var n=t.getFront(),r=(this.children.get(n)||fl.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new fl(this.value,i)},fl.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?fl.Empty:new fl(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0,i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r);return null===this.value&&i.isEmpty()?fl.Empty:new fl(this.value,i)}return this},fl.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},fl.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||fl.Empty).setTree(t.popFront(),e),i=void 0,i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new fl(this.value,i)},fl.prototype.fold=function(t){return this.fold_(ec.Empty,t)},fl.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},fl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ec.Empty,e)},fl.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},fl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ec.Empty,e)},fl.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):fl.Empty},fl.prototype.foreach=function(t){this.foreach_(ec.Empty,t)},fl.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},fl.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},fl.Empty=new fl(null),fl);function fl(t,e){void 0===e&&(e=ul=ul||new ah(Pu)),this.value=t,this.children=e}var pl=(dl.prototype.operationForChild=function(t){return this.path.isEmpty()?new dl(this.source,ec.Empty):new dl(this.source,this.path.popFront())},dl);function dl(t,e){this.source=t,this.path=e,this.type=nl.LISTEN_COMPLETE}var vl=(yl.prototype.operationForChild=function(t){return this.path.isEmpty()?new yl(this.source,ec.Empty,this.snap.getImmediateChild(t)):new yl(this.source,this.path.popFront(),this.snap)},yl);function yl(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=nl.OVERWRITE}var gl=(ml.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new ec(t));return e.isEmpty()?null:e.value?new vl(this.source,ec.Empty,e.value):new ml(this.source,ec.Empty,e)}return ea(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new ml(this.source,this.path.popFront(),this.children)},ml.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},ml);function ml(t,e,n){this.source=t,this.path=e,this.children=n,this.type=nl.MERGE}var bl=(_l.prototype.isFullyInitialized=function(){return this.fullyInitialized_},_l.prototype.isFiltered=function(){return this.filtered_},_l.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},_l.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},_l.prototype.getNode=function(){return this.node_},_l);function _l(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var wl=(El.prototype.updateEventSnap=function(t,e,n){return new El(new bl(t,e,n),this.serverCache_)},El.prototype.updateServerSnap=function(t,e,n){return new El(this.eventCache_,new bl(t,e,n))},El.prototype.getEventCache=function(){return this.eventCache_},El.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},El.prototype.getServerCache=function(){return this.serverCache_},El.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},El.Empty=new El(new bl(wh.EMPTY_NODE,!1,!1),new bl(wh.EMPTY_NODE,!1,!1)),El);function El(t,e){this.eventCache_=t,this.serverCache_=e}var Tl=(Il.valueChange=function(t){return new Il(Il.VALUE,t)},Il.childAddedChange=function(t,e){return new Il(Il.CHILD_ADDED,e,t)},Il.childRemovedChange=function(t,e){return new Il(Il.CHILD_REMOVED,e,t)},Il.childChangedChange=function(t,e,n){return new Il(Il.CHILD_CHANGED,e,t,n)},Il.childMovedChange=function(t,e){return new Il(Il.CHILD_MOVED,e,t)},Il.CHILD_ADDED="child_added",Il.CHILD_REMOVED="child_removed",Il.CHILD_CHANGED="child_changed",Il.CHILD_MOVED="child_moved",Il.VALUE="value",Il);function Il(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Sl=(Cl.prototype.updateChild=function(t,e,n,r,i,o){ea(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Tl.childRemovedChange(e,s)):ea(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Tl.childAddedChange(e,n)):o.trackChildChange(Tl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Cl.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(th,function(t,e){n.hasChild(t)||i.trackChildChange(Tl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(th,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Tl.childChangedChange(t,e,n)):i.trackChildChange(Tl.childAddedChange(t,e))})),n.withIndex(this.index_)},Cl.prototype.updatePriority=function(t,e){return t.isEmpty()?wh.EMPTY_NODE:t.updatePriority(e)},Cl.prototype.filtersNodes=function(){return!1},Cl.prototype.getIndexedFilter=function(){return this},Cl.prototype.getIndex=function(){return this.index_},Cl);function Cl(t){this.index_=t}var Nl=(Al.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ea(e===Tl.CHILD_ADDED||e===Tl.CHILD_CHANGED||e===Tl.CHILD_REMOVED,"Only child changes supported for tracking"),ea(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Tl.CHILD_ADDED&&i===Tl.CHILD_REMOVED)this.changeMap.set(n,Tl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Tl.CHILD_REMOVED&&i===Tl.CHILD_ADDED)this.changeMap.delete(n);else if(e===Tl.CHILD_REMOVED&&i===Tl.CHILD_CHANGED)this.changeMap.set(n,Tl.childRemovedChange(n,r.oldSnap));else if(e===Tl.CHILD_CHANGED&&i===Tl.CHILD_ADDED)this.changeMap.set(n,Tl.childAddedChange(n,t.snapshotNode));else{if(e!==Tl.CHILD_CHANGED||i!==Tl.CHILD_CHANGED)throw na("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Tl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Al.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Al);function Al(){this.changeMap=new Map}function kl(){}var Rl=new(kl.prototype.getCompleteChild=function(t){return null},kl.prototype.getChildAfterChild=function(t,e,n){return null},kl),Ol=(Pl.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new bl(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Pl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Pl);function Pl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Dl=function(t,e){this.viewCache=t,this.changes=e},xl=(Ll.prototype.assertIndexed=function(t){ea(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),ea(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Ll.prototype.applyOperation=function(t,e,n,r){var i,o=new Nl;if(e.type===nl.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(ea(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===nl.MERGE){var u=e;a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(ea(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o))}else if(e.type===nl.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==nl.LISTEN_COMPLETE)throw na("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var h=o.getChanges();return Ll.maybeAddValueEvent_(t,a,h),new Dl(a,h)},Ll.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Tl.valueChange(e.getCompleteEventSnap())))},Ll.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h,l,f,p,d,v,y=void 0,g=void 0;return y=e.isEmpty()?(ea(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof wh?s:wh.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(h=e.getFront())?(ea(1===e.getLength(),"Can't have a priority with additional path components"),l=o.getNode(),g=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,l,g))?this.filter_.updatePriority(l,f):o.getNode()):(p=e.popFront(),v=void 0,null!=(v=o.isCompleteForChild(h)?(g=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),g))?o.getNode().getImmediateChild(h).updateChild(p,d):o.getNode().getImmediateChild(h)):n.calcCompleteChild(h,t.getServerCache()))?this.filter_.updateChild(o.getNode(),h,v,p,r,i):o.getNode()),t.updateEventSnap(y,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Ll.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{var l=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(l).updateChild(f,n);h=".priority"===l?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),l,p,f,Rl,null)}var d=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new Ol(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Ll.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,h,l,f,p=t.getEventCache(),d=new Ol(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),l=void 0,l=u.isEmpty()?n:null!=(h=d.getCompleteChild(a))?".priority"===u.getBack()&&h.getChild(u.parent()).isEmpty()?h:h.updateChild(u,n):wh.EMPTY_NODE,c.equals(l)?t:(f=this.filter_.updateChild(p.getNode(),a,l,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},Ll.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Ll.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);Ll.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);Ll.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},Ll.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Ll.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var l=o,n=t.isEmpty()?e:ll.Empty.setTree(t,e),f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){var n,r;f.hasChild(t)&&(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new ec(t),r,s,a,u,c))}),n.children.inorderTraversal(function(t,e){var n,r,i=!o.getServerCache().isCompleteForChild(t)&&null==e.value;f.hasChild(t)||i||(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new ec(t),r,s,a,u,c))}),l},Ll.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=ll.Empty;return a.getNode().forEachChild(Gc,function(t,e){u=u.set(new ec(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=ll.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Ll.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Rl,r)},Ll.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=new Ol(n,t,r),l=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),ea(s instanceof wh,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(l,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=l.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(l,u,c,e.popFront(),h,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(l,u,wh.EMPTY_NODE,e.popFront(),h,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ec.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},Ll);function Ll(t){this.filter_=t}var Ml=(Fl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Tl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Tl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Tl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Tl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Tl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Tl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Tl.VALUE,t,n,e),i},Fl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},Fl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Fl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw na("Should only compare child_ events.");var n=new Lc(t.childName,t.snapshotNode),r=new Lc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Fl);function Fl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Ul,jl=(Vl.prototype.getQuery=function(){return this.query_},Vl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Vl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Vl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Vl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Vl.prototype.removeEventRegistration=function(t,n){var r,i=[];if(n&&(ea(null==t,"A cancel should cancel all event registrations."),r=this.query_.path,this.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,r);e&&i.push(e)})),t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return i},Vl.prototype.applyOperation=function(t,e,n){t.type===nl.MERGE&&null!==t.source.queryId&&(ea(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),ea(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),ea(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Vl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(th,function(t,e){n.push(Tl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Tl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Vl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},Vl);function Vl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Sl(n.getIndex()),i=n.getNodeFilter();this.processor_=new xl(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(wh.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(wh.EMPTY_NODE,s.getNode(),null),c=new bl(a,o.isFullyInitialized(),r.filtersNodes()),h=new bl(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new wl(h,c),this.eventGenerator_=new Ml(this.query_)}var ql=(Object.defineProperty(Bl,"__referenceConstructor",{get:function(){return ea(Ul,"Reference.ts has not been loaded"),Ul},set:function(t){ea(!Ul,"__referenceConstructor has already been defined"),Ul=t},enumerable:!0,configurable:!0}),Bl.prototype.isEmpty=function(){return 0===this.views.size},Bl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return ea(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Qs(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Bl.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof wh?n.calcCompleteEventChildren(r):wh.EMPTY_NODE,!1),a=new wl(new bl(o,s,!1),new bl(r,i,!1)),c=new jl(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},Bl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Qs(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Ys(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Bl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Bl.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Qs(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},Bl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Qs(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Bl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Bl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Bl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Bl.prototype.getCompleteView=function(){var e,t;try{for(var n=Qs(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},Bl);function Bl(){this.views=new Map}var Wl=(Gl.prototype.addWrite=function(t,e){if(t.isEmpty())return new Gl(new ll(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=ec.relativePath(r,t),i=i.updateChild(o,e);return new Gl(this.writeTree_.set(r,i))}var s=new ll(e);return new Gl(this.writeTree_.setTree(t,s))},Gl.prototype.addWrites=function(n,t){var r=this;return Yu(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},Gl.prototype.removeWrite=function(t){return t.isEmpty()?Gl.Empty:new Gl(this.writeTree_.setTree(t,ll.Empty))},Gl.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},Gl.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ec.relativePath(e.path,t)):null},Gl.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(th,function(t,e){n.push(new Lc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Lc(t,e.value))}),n},Gl.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new Gl(null!=e?new ll(e):this.writeTree_.subtree(t))},Gl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},Gl.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(ea(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(ec.Empty,this.writeTree_,t)},Gl.Empty=new Gl(new ll(null)),Gl);function Gl(t){this.writeTree_=t}var Hl=(Kl.prototype.childWrites=function(t){return new Ql(t,this)},Kl.prototype.addOverwrite=function(t,e,n,r){ea(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Kl.prototype.addMerge=function(t,e,n){ea(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Kl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Kl.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});ea(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Yu(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Kl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Kl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(ec.Empty)){var o=Kl.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||wh.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(ec.Empty)){var s=t||wh.EMPTY_NODE;return u.apply(s)}return null},Kl.prototype.calcCompleteEventChildren=function(t,e){var r=wh.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(th,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(th,function(t,e){var n=i.childCompoundWrite(new ec(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Kl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){ea(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Kl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Kl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Kl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(ec.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Kl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Kl.prototype.resetTree_=function(){this.visibleWrites_=Kl.layerTree_(this.allWrites_,Kl.DefaultFilter_,ec.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Kl.DefaultFilter_=function(t){return t.visible},Kl.layerTree_=function(t,e,n){for(var r=Wl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=ec.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=ec.relativePath(u,n),r=r.addWrite(ec.Empty,o.snap.getChild(c)));else{if(!o.children)throw na("WriteRecord should have .snap or .children");n.contains(u)?(c=ec.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=ec.relativePath(u,n)).isEmpty()?r=r.addWrites(ec.Empty,o.children):(s=Ta(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(ec.Empty,a)))}}}return r},Kl);function Kl(){this.visibleWrites_=Wl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Ql=(Yl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Yl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Yl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Yl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Yl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Yl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Yl.prototype.child=function(t){return new Yl(this.treePath_.child(t),this.writeTree_)},Yl);function Yl(t,e){this.treePath_=t,this.writeTree_=e}var Xl=(Jl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new vl(sl.User,t,e)):[]},Jl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ll.fromObject(e);return this.applyOperationToSyncPoints_(new gl(sl.User,t,r))},Jl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ll.Empty;return null!=n.snap?r=r.set(ec.Empty,!0):Yu(n.children,function(t,e){r=r.set(new ec(t),e)}),this.applyOperationToSyncPoints_(new cl(n.path,r,e))}return[]},Jl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new vl(sl.Server,t,e))},Jl.prototype.applyServerMerge=function(t,e){var n=ll.fromObject(e);return this.applyOperationToSyncPoints_(new gl(sl.Server,t,n))},Jl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new pl(sl.Server,t))},Jl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Jl.parseQueryKey_(r),o=i.path,s=i.queryId,a=ec.relativePath(o,t),u=new vl(sl.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Jl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Jl.parseQueryKey_(r),o=i.path,s=i.queryId,a=ec.relativePath(o,t),u=ll.fromObject(e),c=new gl(sl.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Jl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Jl.parseQueryKey_(n),i=r.path,o=r.queryId,s=ec.relativePath(i,t),a=new pl(sl.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Jl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=ec.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(ec.Empty)):(s=new ql,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=wh.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(ec.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=Jl.makeQueryKey_(t),ea(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Jl.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var h,l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(t,e,l,i,n);return c||o||(h=s.viewForQuery(t),f=f.concat(this.setupListener_(t,h))),f},Jl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,s=a.events,c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Jl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Jl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Jl.makeQueryKey_(t));r.listenProvider_.stopListening(Jl.queryForListening_(t),e)})),this.removeTags_(u)}return s},Jl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=ec.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Jl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Yu(n,function(t,e){r=r.concat(e)}),r})},Jl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=Jl.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Jl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Jl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Jl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)ea(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Yu(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Jl.queryForListening_(c),this.tagForQuery_(c))}return o},Jl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||wh.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Jl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Jl.parseQueryKey_=function(t){var e=t.indexOf("$");return ea(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ec(t.substr(0,e))}},Jl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Jl.prototype.tagForQuery_=function(t){var e=Jl.makeQueryKey_(t);return this.queryToTagMap.get(e)},Jl.getNextQueryTag_=function(){return Jl.nextQueryTag_++},Jl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);ea(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Jl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ec.Empty))},Jl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ec.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ec.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),h=e.children.get(u);return h&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,h,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},Jl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(ec.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(ec.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Jl.nextQueryTag_=1,Jl);function Jl(t){this.listenProvider_=t,this.syncPointTree_=ll.Empty,this.pendingWriteTree_=new Hl,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var $l=(Zl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Zl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Zl);function Zl(){this.rootNode_=wh.EMPTY_NODE}var tf=(ef.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Wu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},ef.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},ef.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},ef.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ru(t)},ef);function ef(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var nf=(rf.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Ea(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},rf.prototype.get=function(){return ia(this.counters_)},rf);function rf(){this.counters_={}}var of=(sf.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new nf),this.collections_[e]},sf.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},sf.collections_={},sf.reporters_={},sf);function sf(){}var af=(uf.prototype.get=function(){var t=this.collection_.get(),n=Hs({},t);return this.last_&&Yu(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},uf);function uf(t){this.collection_=t,this.last_=null}var cf=(hf.prototype.includeStat=function(t){this.statsToReport_[t]=!0},hf.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Yu(t,function(t,e){0<e&&Ea(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),$u(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},hf);function hf(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new af(t);var n=1e4+2e4*Math.random();$u(this.reportStats_.bind(this),Math.floor(n))}var lf=(ff.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new pf(i)),e.add(r)}e&&this.eventLists_.push(e)},ff.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},ff.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},ff.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},ff);function ff(){this.eventLists_=[],this.recursionDepth_=0}var pf=(df.prototype.add=function(t){this.events_.push(t)},df.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),qu&&Wu("event: "+n.toString()),Ju(e))}},df.prototype.getPath=function(){return this.path_},df);function df(t){this.path_=t,this.events_=[]}var vf=(yf.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Xs(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},yf.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},yf.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},yf.prototype.validateEventType_=function(e){ea(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},yf);function yf(t){this.allowedEvents_=t,this.listeners_={},ea(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var gf,mf=(Gs(bf,gf=vf),bf.getInstance=function(){return new bf},bf.prototype.getInitialEvent=function(t){return ea("visible"===t,"Unknown event type: "+t),[this.visible_]},bf);function bf(){var e,t,n=gf.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var _f,wf=(Gs(Ef,_f=vf),Ef.getInstance=function(){return new Ef},Ef.prototype.getInitialEvent=function(t){return ea("online"===t,"Unknown event type: "+t),[this.online_]},Ef.prototype.currentlyOnline=function(){return this.online_},Ef);function Ef(){var t=_f.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ca()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Tf=(If.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},If.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Ju(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},If);function If(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Sf="pLPCommand",Cf="pRTLPCB",Nf=(Af.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Tf(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t,e;s.isClosed_||(s.scriptTagHolder=new kf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ys(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ys(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(oc)&&(t.r="f"),e=s.urlFn(t),s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Af.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Af.forceAllow=function(){Af.forceAllow_=!0},Af.forceDisallow=function(){Af.forceDisallow_=!0},Af.isAvailable=function(){return!!Af.forceAllow_||!(Af.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Af.prototype.markConnectionHealthy=function(){},Af.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Af.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Af.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Af.prototype.send=function(t){var e=_a(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=$s(e),ra.encodeByteArray(n,!0)),i=xu(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},Af.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Af.prototype.incrementIncomingBytes_=function(t){var e=_a(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Af);function Af(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gu(t),this.stats_=of.getCollection(e),this.urlFn=function(t){return e.connectionURL(ac,t)}}var kf=(Rf.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wu("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Rf.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Rf.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Rf.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift(),n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d;r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},Rf.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Rf.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Rf.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Wu("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Rf);function Rf(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ju(),window[Sf+this.uniqueCallbackIdentifier]=t,window[Cf+this.uniqueCallbackIdentifier]=e,this.myIFrame=Rf.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){Wu("frame writing exception"),t.stack&&Wu(t.stack),Wu(t)}}var Of="";var Pf=null;"undefined"!=typeof MozWebSocket?Pf=MozWebSocket:"undefined"!=typeof WebSocket&&(Pf=WebSocket);var Df=(xf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(oc)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(sc,r)},xf.prototype.open=function(t,e){var n,r,i,o,s=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mu.set("previous_websocket_failure",!0);try{la()?(n=ta.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+Of+"/"+process.platform+"/"+n,"X-Firebase-GMPID":this.applicationId||""}},r=process.env,(i=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy)&&(o.proxy={origin:i})):o={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Pf(this.connURL,[],o)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){s.log_("Websocket connected."),s.everConnected_=!0},this.mySock.onclose=function(){s.log_("Websocket connection was disconnected."),s.mySock=null,s.onClosed_()},this.mySock.onmessage=function(t){s.handleIncomingFrame(t)},this.mySock.onerror=function(t){s.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&s.log_(e),s.onClosed_()}},xf.prototype.start=function(){},xf.forceDisallow=function(){xf.forceDisallow_=!0},xf.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==Pf&&!xf.forceDisallow_},xf.previouslyFailed=function(){return Mu.isInMemoryStorage||!0===Mu.get("previous_websocket_failure")},xf.prototype.markConnectionHealthy=function(){Mu.remove("previous_websocket_failure")},xf.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=ba(e),this.onMessage(n))},xf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},xf.prototype.extractFrameCount_=function(t){if(ea(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},xf.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},xf.prototype.send=function(t){this.resetKeepAlive();var e=_a(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=xu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},xf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},xf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},xf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},xf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},xf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},xf.responsesRequiredToBeHealthy=2,xf.healthyTimeout=3e4,xf);function xf(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gu(this.connId),this.stats_=of.getCollection(e),this.connURL=xf.connectionURL_(e,r,i)}var Lf=(Object.defineProperty(Mf,"ALL_TRANSPORTS",{get:function(){return[Nf,Df]},enumerable:!0,configurable:!0}),Mf.prototype.initTransports_=function(t){var e,n,r=Df&&Df.isAvailable(),i=r&&!Df.previouslyFailed();if(t.webSocketOnly&&(r||Ru("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Df];else{var o=this.transports_=[];try{for(var s=Qs(Mf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Mf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Mf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Mf);function Mf(t){this.initTransports_(t)}var Ff=(Uf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=$u(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Uf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Uf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Uf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Uf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Uf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Uf.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Uf.prototype.onSecondaryMessageReceived_=function(t){var e=Du("t",t),n=Du("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Uf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Uf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Uf.prototype.onPrimaryMessageReceived_=function(t){var e=Du("t",t),n=Du("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Uf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Uf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Uf.prototype.onControl_=function(t){var e=Du("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Au("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Au("Unknown control packet command: "+e)}},Uf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ru("Protocol version mismatch detected"),this.tryStartUpgrade_())},Uf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Uf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$u(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Uf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Uf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$u(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Uf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Uf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Uf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Uf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Uf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Uf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Uf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Uf);function Uf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gu("c:"+this.id+":"),this.transportManager_=new Lf(e),this.log_("Connection created"),this.start_()}var jf=(Vf.prototype.put=function(t,e,n,r){},Vf.prototype.merge=function(t,e,n,r){},Vf.prototype.refreshAuthToken=function(t){},Vf.prototype.onDisconnectPut=function(t,e,n){},Vf.prototype.onDisconnectMerge=function(t,e,n){},Vf.prototype.onDisconnectCancel=function(t,e){},Vf.prototype.reportStats=function(t){},Vf);function Vf(){}var qf,Bf=1e3,Wf=3e5,Gf=(Gs(Hf,qf=jf),Hf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(_a(i)),ea(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},Hf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ea(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),ea(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},Hf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Hf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Hf.warnOnListenWarnings_=function(t,e){var n,r,i;t&&"object"==typeof t&&Ea(t,"w")&&(n=Ta(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&(r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString(),Ru("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")))},Hf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Hf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=wa(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Hf.prototype.tryAuth=function(){var r,t,e,n,i=this;this.connected_&&this.authToken_&&(r=this.authToken_,t=(n=wa(r).claims)&&"object"==typeof n&&n.hasOwnProperty("iat")?"auth":"gauth",e={cred:r},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";i.authToken_===r&&("ok"===e?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(e,n))}))},Hf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),ea(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Hf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},Hf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Hf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Hf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Hf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Hf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Hf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Hf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},Hf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Hf.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))}))},Hf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+_a(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Hf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Au("Unrecognized action received from server: "+_a(t)+"\nAre you using the latest client?")},Hf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Hf.prototype.scheduleConnect_=function(t){var e=this;ea(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Hf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Hf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Hf.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Bf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Hf.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Hf.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){ea(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Wu("getToken() completed but was canceled"):(Wu("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Ff(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){Ru(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()}))},Hf.prototype.interrupt=function(t){Wu("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Hf.prototype.resume=function(t){Wu("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Ia(this.interruptReasons_)&&(this.reconnectDelay_=Bf,this.realtime_||this.scheduleConnect_(0))},Hf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},Hf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Hf.prototype.onListenRevoked_=function(t,e){var n=e?e.map(function(t){return Qu(t)}).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},Hf.prototype.removeListen_=function(t,e){var n,r,i=new ec(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},Hf.prototype.onAuthRevoked_=function(t,e){Wu("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Hf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Hf.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Qs(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},Hf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Of.replace(/\./g,"-")]=1,ca()?t["framework.cordova"]=1:ha()&&(t["framework.reactnative"]=1),this.reportStats(t)},Hf.prototype.shouldReconnect_=function(){var t=wf.getInstance().currentlyOnline();return Ia(this.interruptReasons_)&&t},Hf.nextPersistentConnectionId_=0,Hf.nextConnectionId_=0,Hf);function Hf(t,e,n,r,i,o,s){var a=qf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Hf.nextPersistentConnectionId_++,a.log_=Gu("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Bf,a.maxReconnectDelay_=Wf,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!la())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),mf.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&wf.getInstance().on("online",a.onOnline_,a),a}var zf,Kf=(Gs(Qf,zf=jf),Qf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Qf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ea(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Qf.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=Qf.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),Ta(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Qf.prototype.unlisten=function(t,e){var n=Qf.getListenId_(t,e);delete this.listens_[n]},Qf.prototype.refreshAuthToken=function(t){},Qf.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=ba(r.responseText)}catch(t){Ru("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&Ru("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},Qf);function Qf(t,e,n){var r=zf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Gu("p:rest:"),r.listens_={},r}var Yf="repo_interrupt",Xf=(Jf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Jf.prototype.name=function(){return this.repoInfo_.namespace},Jf.prototype.serverTime=function(){var t=this.infoData_.getNode(new ec(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Jf.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Jf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ec(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c=[],h=i;0<(c=r?n?(o=Sa(e,function(t){return Nh(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=Nh(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=Sa(e,function(t){return Nh(t)}),this.serverSyncTree_.applyServerMerge(i,a)):(u=Nh(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,c)},Jf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Jf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Jf.prototype.onServerInfoUpdate_=function(t){var n=this;Yu(t,function(t,e){n.updateInfo_(t,e)})},Jf.prototype.updateInfo_=function(t,e){var n=new ec("/.info/"+t),r=Nh(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Jf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Jf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Nh(t,e),a=this.serverSyncTree_.calcCompleteEventCache(i),u=Jh(r,a,n),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||Ru("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Jf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var u,e,n=!0,r=this.generateServerValues(),i={};Yu(t,function(t,e){n=!1,i[t]=Xh(o.child(t),Nh(e),a.serverSyncTree_,r)}),n?(Wu("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok")):(u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u),this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||Ru("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),Yu(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[]))},Jf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new il;this.onDisconnect_.forEachTree(ec.Empty,function(t,e){var n=Xh(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(ec.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new il,this.eventQueue_.raiseEventsForChangedPath(ec.Empty,s)},Jf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Jf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Nh(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Jf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Nh(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Jf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(Ia(n))return Wu("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&Yu(n,function(t,e){var n=Nh(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},Jf.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},Jf.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},Jf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Yf)},Jf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Yf)},Jf.prototype.stats=function(t){var e,i;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new af(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0),Yu(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},Jf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Jf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Wu.apply(void 0,Xs([n],t))},Jf.prototype.callOnCompleteCallback=function(r,i,o){r&&Ju(function(){var t,e,n;"ok"===i?r(null):(e=t=(i||"error").toUpperCase(),o&&(e+=": "+o),(n=new Error(e)).code=t,r(n))})},Object.defineProperty(Jf.prototype,"database",{get:function(){return this.__database||(this.__database=new yp(this))},enumerable:!0,configurable:!0}),Jf);function Jf(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new il,this.persistentConnection_=null;var i=new tf(n,r);if(this.stats_=of.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Kf(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_a(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Gf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=of.getOrCreateReporter(t,function(){return new cf(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new $l,this.infoSyncTree_=new Xl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Xl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var $f=(Zf.prototype.getStartPost=function(){return this.startPost_},Zf.prototype.getEndPost=function(){return this.endPost_},Zf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Zf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Lc(e,n))||(n=wh.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Zf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=wh.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(wh.EMPTY_NODE),i=this;return e.forEachChild(th,function(t,e){i.matches(new Lc(t,e))||(r=r.updateImmediateChild(t,wh.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Zf.prototype.updatePriority=function(t,e){return t},Zf.prototype.filtersNodes=function(){return!0},Zf.prototype.getIndexedFilter=function(){return this.indexedFilter_},Zf.prototype.getIndex=function(){return this.index_},Zf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Zf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Zf);function Zf(t){this.indexedFilter_=new Sl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Zf.getStartPost_(t),this.endPost_=Zf.getEndPost_(t)}var tp=(ep.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Lc(e,n))||(n=wh.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},ep.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=wh.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=wh.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(wh.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,wh.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},ep.prototype.updatePriority=function(t,e){return t},ep.prototype.filtersNodes=function(){return!0},ep.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},ep.prototype.getIndex=function(){return this.index_},ep.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;ea(a.numChildren()===this.limit_,"");var u=new Lc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Tl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Tl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,wh.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Tl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Tl.childRemovedChange(c.name,c.node)),i.trackChildChange(Tl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,wh.EMPTY_NODE)):t},ep);function ep(t){this.rangedFilter_=new $f(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var np=(rp.prototype.hasStart=function(){return this.startSet_},rp.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===rp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},rp.prototype.getIndexStartValue=function(){return ea(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},rp.prototype.getIndexStartName=function(){return ea(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hu},rp.prototype.hasEnd=function(){return this.endSet_},rp.prototype.getIndexEndValue=function(){return ea(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},rp.prototype.getIndexEndName=function(){return ea(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zu},rp.prototype.hasLimit=function(){return this.limitSet_},rp.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},rp.prototype.getLimit=function(){return ea(this.limitSet_,"Only valid if limit has been set"),this.limit_},rp.prototype.getIndex=function(){return this.index_},rp.prototype.copy_=function(){var t=new rp;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},rp.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},rp.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=rp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},rp.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=rp.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},rp.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},rp.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},rp.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},rp.prototype.getQueryObject=function(){var t,e=rp.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==th&&(n[e.INDEX]=this.index_.toString()),n},rp.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},rp.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===th},rp.prototype.getNodeFilter=function(){return this.loadsAllData()?new Sl(this.getIndex()):new(this.hasLimit()?tp:$f)(this)},rp.prototype.toRestQueryStringParameters=function(){var t,e=rp.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===th?e.PRIORITY_INDEX:this.index_===Rh?e.VALUE_INDEX:this.index_===Gc?e.KEY_INDEX:(ea(this.index_ instanceof Oh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=_a(t),this.startSet_&&(n[e.START_AT]=_a(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+_a(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=_a(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+_a(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},rp.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},rp.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},rp.DEFAULT=new rp,rp);function rp(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=th}var ip,op=(Gs(sp,ip=Gh),sp.prototype.getKey=function(){return Pa("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},sp.prototype.child=function(t){var e,n,r,i;return Pa("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ec||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),bc(e,n,r,i)):bc("Reference.child",1,t,!1)),new sp(this.repo,this.path.child(t))},sp.prototype.getParent=function(){Pa("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new sp(this.repo,t)},sp.prototype.getRoot=function(){Pa("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},sp.prototype.databaseProp=function(){return this.repo.database},sp.prototype.set=function(t,e){Pa("Reference.set",1,2,arguments.length),_c("Reference.set",this.path),dc("Reference.set",1,t,this.path,!1),xa("Reference.set",2,e,!0);var n=new sa;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},sp.prototype.update=function(t,e){if(Pa("Reference.update",1,2,arguments.length),_c("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ru("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vc("Reference.update",1,t,this.path,!1),xa("Reference.update",2,e,!0);var i=new sa;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},sp.prototype.setWithPriority=function(t,e,n){if(Pa("Reference.setWithPriority",2,3,arguments.length),_c("Reference.setWithPriority",this.path),dc("Reference.setWithPriority",1,t,this.path,!1),yc("Reference.setWithPriority",2,e,!1),xa("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new sa;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},sp.prototype.remove=function(t){return Pa("Reference.remove",0,1,arguments.length),_c("Reference.remove",this.path),xa("Reference.remove",1,t,!0),this.set(null,t)},sp.prototype.transaction=function(t,r,e){if(Pa("Reference.transaction",1,3,arguments.length),_c("Reference.transaction",this.path),xa("Reference.transaction",1,t,!1),xa("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Da(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new sa;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new kc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},sp.prototype.setPriority=function(t,e){Pa("Reference.setPriority",1,2,arguments.length),_c("Reference.setPriority",this.path),yc("Reference.setPriority",1,t,!1),xa("Reference.setPriority",2,e,!0);var n=new sa;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},sp.prototype.push=function(t,e){Pa("Reference.push",0,2,arguments.length),_c("Reference.push",this.path),dc("Reference.push",1,t,this.path,!0),xa("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=xc(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then(function(){return o}):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch(function(){}),i},sp.prototype.onDisconnect=function(){return _c("Reference.onDisconnect",this.path),new Nc(this.repo,this.path)},Object.defineProperty(sp.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(sp.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(sp.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(sp.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),sp);function sp(t,e){if(!(t instanceof Xf))throw new Error("new Reference() no longer supported - use app.database().");return ip.call(this,t,e,np.DEFAULT,!1)||this}Gh.__referenceConstructor=op,ql.__referenceConstructor=op;var ap,up,cp=function(){this.children={},this.childCount=0,this.value=null},hp=(lp.prototype.subTree=function(t){for(var e=t instanceof ec?t:new ec(t),n=this,r=e.getFront();null!==r;)n=new lp(r,n,Ta(n.node_.children,r)||new cp),r=(e=e.popFront()).getFront();return n},lp.prototype.getValue=function(){return this.node_.value},lp.prototype.setValue=function(t){ea(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},lp.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},lp.prototype.hasChildren=function(){return 0<this.node_.childCount},lp.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},lp.prototype.forEachChild=function(n){var r=this;Yu(this.node_.children,function(t,e){n(new lp(t,r,e))})},lp.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},lp.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},lp.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},lp.prototype.path=function(){return new ec(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},lp.prototype.name=function(){return this.name_},lp.prototype.parent=function(){return this.parent_},lp.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},lp.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Ea(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},lp);function lp(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new cp),this.name_=t,this.parent_=e,this.node_=n}(up=ap=ap||{})[up.RUN=0]="RUN",up[up.SENT=1]="SENT",up[up.COMPLETED=2]="COMPLETED",up[up.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",up[up.NEEDS_ABORT=4]="NEEDS_ABORT",Xf.MAX_TRANSACTION_RETRIES_=25,Xf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new hp},Xf.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new op(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:ju(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,h,l,f,p,d,v,y=s.update(a.val());void 0===y?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new Dh(s.currentInputSnapshot,new op(this,s.path),th),s.onComplete(null,!1,u))):(Cc("transaction failed: Data returned ",y,s.path),s.status=ap.RUN,(h=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(h),l=void 0,"object"==typeof y&&null!==y&&Ea(y,".priority")?(l=Ta(y,".priority"),ea(pc(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(this.serverSyncTree_.calcCompleteEventCache(t)||wh.EMPTY_NODE).getPriority().val(),f=this.generateServerValues(),p=Nh(y,l),d=Jh(p,a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},Xf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||wh.EMPTY_NODE},Xf.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),ea(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===ap.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},Xf.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];ea(o.status===ap.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=ap.SENT,o.retryCount++;var s=ec.relativePath(a,o.path),n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i,o=[],s=0;s<u.length;s++){u[s].status=ap.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[s].currentWriteId)),u[s].onComplete&&(n=u[s].currentOutputSnapshotResolved,r=new op(c,u[s].path),i=new Dh(n,r,th),o.push(u[s].onComplete.bind(null,null,!0,i))),u[s].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(s=0;s<o.length;s++)Ju(o[s])}else{if("datastale"===t)for(s=0;s<u.length;s++)u[s].status===ap.SENT_NEEDS_ABORT?u[s].status=ap.NEEDS_ABORT:u[s].status=ap.RUN;else{Ru("transaction at "+l.toString()+" failed: "+t);for(s=0;s<u.length;s++)u[s].status=ap.NEEDS_ABORT,u[s].abortReason=t}c.rerunTransactions_(a)}},r)},Xf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Xf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===ap.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a,u,c,h,l,f,p,d,v,y=t[s],g=ec.relativePath(e,y.path),m=!1,b=void 0;ea(null!==g,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===ap.NEEDS_ABORT?(m=!0,b=y.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))):y.status===ap.RUN&&(i=y.retryCount>=Xf.MAX_TRANSACTION_RETRIES_?(m=!0,b="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))):(a=this.getLatestState_(y.path,o),y.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(Cc("transaction failed: Data returned ",u,y.path),c=Nh(u),"object"==typeof u&&null!=u&&Ea(u,".priority")||(c=c.updatePriority(a.getPriority())),h=y.currentWriteId,l=this.generateServerValues(),f=Jh(c,a,l),y.currentOutputSnapshotRaw=c,y.currentOutputSnapshotResolved=f,y.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(h),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(y.path,f,y.currentWriteId,y.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(m=!0,b="nodata",i.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],m&&(t[s].status=ap.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete&&("nodata"===b?(p=new op(this,t[s].path),d=t[s].currentInputSnapshot,v=new Dh(d,p,th),r.push(t[s].onComplete.bind(null,null,!1,v))):r.push(t[s].onComplete.bind(null,new Error(b),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Ju(r[s]);this.sendReadyTransactions_()}},Xf.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},Xf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Xf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Xf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==ap.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Xf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Xf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===ap.SENT_NEEDS_ABORT||(e[o].status===ap.SENT?(ea(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=ap.SENT_NEEDS_ABORT,e[o].abortReason="set"):(ea(e[o].status===ap.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Ju(n[o])}};var fp,pp="databaseURL",dp=(vp.getInstance=function(){return fp=fp||new vp},vp.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},vp.prototype.resume=function(){var e,t,n,r;try{for(var i=Qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},vp.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[pp];void 0===r&&ku("Can't determine Firebase Database URL.  Be sure to include "+pp+" option when calling firebase.initializeApp().");var i=hc(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=hc(r)).repoInfo),wc("Invalid Firebase Database URL",1,i),i.path.isEmpty()||ku("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},vp.prototype.deleteRepo=function(t){var e=Ta(this.repos_,t.app.name);e&&Ta(e,t.repoInfo_.toURLString())===t||ku("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},vp.prototype.createRepo=function(t,e,n){var r=Ta(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Ta(r,t.toURLString());return i&&ku("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Xf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},vp.prototype.forceRestClient=function(t){this.useRestClient_=t},vp);function vp(){this.repos_={},this.useRestClient_=!1}var yp=(Object.defineProperty(gp.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),gp.prototype.ref=function(t){return this.checkDeleted_("ref"),Pa("database.ref",0,1,arguments.length),t instanceof op?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},gp.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Pa(e,1,1,arguments.length);var n=hc(t);wc(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&ku(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},gp.prototype.checkDeleted_=function(t){null===this.repo_&&ku("Cannot call "+t+" on a deleted database.")},gp.prototype.goOffline=function(){Pa("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},gp.prototype.goOnline=function(){Pa("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},gp.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},gp);function gp(t){(this.repo_=t)instanceof Xf||ku("Don't call new Database() directly - please use firebase.database()."),this.root_=new op(t,ec.Empty),this.INTERNAL=new mp(this)}var mp=(bp.prototype.delete=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){return this.database.checkDeleted_("delete"),dp.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},bp);function bp(t){this.database=t}var _p=Object.freeze({__proto__:null,forceLongPolling:function(){Df.forceDisallow(),Nf.forceAllow()},forceWebSockets:function(){Nf.forceDisallow()},isWebSocketsAvailable:function(){return Df.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),wp=Gf;Gf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Gf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ep,Tp,Ip=Object.freeze({__proto__:null,DataConnection:wp,RealTimeConnection:Ff,hijackHash:function(i){var o=Gf.prototype.put;return Gf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Gf.prototype.put=o}},ConnectionTarget:uc,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){dp.getInstance().forceRestClient(t)}}),Sp=yp.ServerValue;function Cp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Tp=(Ep=zl).SDK_VERSION,Of=Tp,Ep.INTERNAL.registerComponent(new Fa("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return dp.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:op,Query:Gh,Database:yp,DataSnapshot:Dh,enableLogging:Nu,INTERNAL:_p,ServerValue:Sp,TEST_ACCESS:Ip}).setMultipleInstances(!0)),Ep.registerVersion("@firebase/database","0.6.5");var Np,Ap="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},kp=kp||{},Rp=Ap||self;function Op(){}function Pp(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Dp(t){var e=Pp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function xp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Lp="closure_uid_"+(1e9*Math.random()>>>0),Mp=0;function Fp(t,e,n){return t.call.apply(t.bind,arguments)}function Up(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function jp(t,e,n){return(jp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fp:Up).apply(null,arguments)}function Vp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var qp=Date.now||function(){return+new Date};function Bp(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Wp(){this.j,this.i}Wp.prototype.j=!1,Wp.prototype.da=function(){var t;!this.j&&(this.j=!0,this.C(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Lp)&&t[Lp]||(t[Lp]=++Mp))},Wp.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Gp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Hp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function zp(){return Array.prototype.concat.apply([],arguments)}function Kp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Qp(t){return/^[\s\xa0]*$/.test(t)}var Yp,Xp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Jp(t,e){return-1!=t.indexOf(e)}function $p(t,e){return t<e?-1:e<t?1:0}t:{var Zp=Rp.navigator;if(Zp){var td=Zp.userAgent;if(td){Yp=td;break t}}Yp=""}function ed(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function nd(t){var e={};for(var n in t)e[n]=t[n];return e}var rd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function id(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<rd.length;i++)e=rd[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function od(t){return od[" "](t),t}od[" "]=Op;var sd,ad,ud=Jp(Yp,"Opera"),cd=Jp(Yp,"Trident")||Jp(Yp,"MSIE"),hd=Jp(Yp,"Edge"),ld=hd||cd,fd=Jp(Yp,"Gecko")&&!(Jp(Yp.toLowerCase(),"webkit")&&!Jp(Yp,"Edge"))&&!(Jp(Yp,"Trident")||Jp(Yp,"MSIE"))&&!Jp(Yp,"Edge"),pd=Jp(Yp.toLowerCase(),"webkit")&&!Jp(Yp,"Edge");function dd(){var t=Rp.document;return t?t.documentMode:void 0}t:{var vd="",yd=(ad=Yp,fd?/rv:([^\);]+)(\)|;)/.exec(ad):hd?/Edge\/([\d\.]+)/.exec(ad):cd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ad):pd?/WebKit\/(\S+)/.exec(ad):ud?/(?:Version)[ \/]?(\S+)/.exec(ad):void 0);if(yd&&(vd=yd?yd[1]:""),cd){var gd=dd();if(null!=gd&&gd>parseFloat(vd)){sd=String(gd);break t}}sd=vd}var md={};function bd(a){return t=a,e=function(){for(var t=0,e=Xp(String(sd)).split("."),n=Xp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=$p(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||$p(0==o[2].length,0==s[2].length)||$p(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=md,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var _d=Rp.document&&cd?dd()||(parseInt(sd,10)||void 0):void 0,wd=!cd||9<=Number(_d),Ed=cd&&!bd("9"),Td=function(){if(!Rp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Rp.addEventListener("test",Op,e),Rp.removeEventListener("test",Op,e)}catch(t){}return t}();function Id(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Sd(t,e){if(Id.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(fd){t:{try{od(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Cd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Id.prototype.b=function(){this.defaultPrevented=!0},Bp(Sd,Id);var Cd={2:"touch",3:"pen",4:"mouse"};Sd.prototype.b=function(){Sd.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ed)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Nd="closure_listenable_"+(1e6*Math.random()|0),Ad=0;function kd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Ad,this.V=this.X=!1}function Rd(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Od(t){this.src=t,this.a={},this.b=0}function Pd(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Gp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Rd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Dd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Od.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Dd(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new kd(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var xd="closure_lm_"+(1e6*Math.random()|0),Ld={};function Md(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Gd(r);return e&&e[Nd]?e.sa(n,r,xp(i)?!!i.capture:!!i,o):Fd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Md(t,e[o],n,r,i);return null}return n=Gd(n),t&&t[Nd]?t.ra(e,n,xp(r)?!!r.capture:!!r,i):Fd(t,e,n,!1,r,i)}function Fd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=xp(i)?!!i.capture:!!i;if(s&&!wd)return null;var a,u,c=Bd(t);if(c||(t[xd]=c=new Od(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=qd,r=u=wd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Td||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ud(t){var e,n,r;"number"!=typeof t&&t&&!t.V&&((e=t.src)&&e[Nd]?Pd(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bd(e))?(Pd(n,t),0==n.b&&(n.src=null,e[xd]=null)):Rd(t)))}function jd(t){return t in Ld?Ld[t]:Ld[t]="on"+t}function Vd(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Ud(t),n.call(r,e)}function qd(t,e){if(t.V)return!0;if(wd)return Vd(t,new Sd(e,this));if(!e)t:{e=["window","event"];for(var n=Rp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Vd(t,e=new Sd(e,this))}function Bd(t){return(t=t[xd])instanceof Od?t:null}var Wd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gd(e){return"function"==Pp(e)?e:(e[Wd]||(e[Wd]=function(t){return e.handleEvent(t)}),e[Wd])}function Hd(){Wp.call(this),this.c=new Od(this),(this.J=this).A=null}function zd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.V&&u.capture==n&&(s=u.listener,a=u.aa||u.src,u.X&&Pd(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Bp(Hd,Wp),Hd.prototype[Nd]=!0,(Np=Hd.prototype).addEventListener=function(t,e,n,r){Md(this,t,e,n,r)},Np.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=xp(i)?!!i.capture:!!i,r=Gd(r),e&&e[Nd]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Dd(s=e.a[n],r,i,o))&&(Rd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Bd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Dd(n,r,i,o)),(r=-1<e?n[e]:null)&&Ud(r))}(this,t,e,n,r)},Np.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new Id(t,n):t instanceof Id?t.target=t.target||n:(s=t,id(t=new Id(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=zd(o,r,!0,t)&&s;if(s=zd(o=t.a=n,r,!0,t)&&s,s=zd(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=zd(o=t.a=e[i],r,!1,t)&&s;return s},Np.C=function(){if(Hd.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Rd(n[r]);delete e.a[t],e.b--}}this.A=null},Np.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Np.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Kd=Rp.JSON.stringify;function Qd(){this.b=this.a=null}var Yd,Xd=(Jd.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Jd(function(){return new $d},function(t){t.reset()},100));function Jd(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function $d(){this.next=this.b=this.a=null}function Zd(t,e){var n;Yd||(n=Rp.Promise.resolve(void 0),Yd=function(){n.then(nv)}),tv||(Yd(),tv=!0),ev.add(t,e)}Qd.prototype.add=function(t,e){var n=Xd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$d.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var tv=!($d.prototype.reset=function(){this.next=this.b=this.a=null}),ev=new Qd;function nv(){for(var t,e,n;n=e=void 0,n=null,(e=ev).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Rp.setTimeout(function(){throw t},0)}(t)}var r=Xd;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}tv=!1}function rv(t,e){Hd.call(this),this.b=t||1,this.a=e||Rp,this.f=jp(this.Ua,this),this.g=qp()}function iv(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ov(t,e,n){if("function"==Pp(t))n&&(t=jp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=jp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Rp.setTimeout(t,e||0)}function sv(t,e,n){Wp.call(this),this.f=null!=n?jp(t,n):t,this.c=e,this.b=jp(this.Pa,this),this.a=[]}function av(t){t.T=ov(t.b,t.c),t.f.apply(null,t.a)}function uv(t){Wp.call(this),this.b=t,this.a={}}Bp(rv,Hd),(Np=rv.prototype).Z=!1,Np.L=null,Np.Ua=function(){var t;this.Z&&(0<(t=qp()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(iv(this),this.start())))},Np.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=qp())},Np.C=function(){rv.M.C.call(this),iv(this),delete this.a},Bp(sv,Wp),(Np=sv.prototype).ba=!1,Np.T=null,Np.Ia=function(t){this.a=arguments,this.T?this.ba=!0:av(this)},Np.C=function(){sv.M.C.call(this),this.T&&(Rp.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Np.Pa=function(){this.T=null,this.ba&&(this.ba=!1,av(this))},Bp(uv,Wp);var cv=[];function hv(t,e,n,r){Array.isArray(n)||(n&&(cv[0]=n.toString()),n=cv);for(var i=0;i<n.length;i++){var o=Md(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function lv(t){ed(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ud(t)},t),t.a={}}function fv(){}uv.prototype.C=function(){uv.M.C.call(this),lv(this)},uv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pv=null;function dv(){return pv=pv||new Hd}function vv(t){Id.call(this,"serverreachability",t)}function yv(t){var e=dv();e.dispatchEvent(new vv(e))}function gv(t){Id.call(this,"statevent",t)}function mv(t){var e=dv();e.dispatchEvent(new gv(e))}function bv(t){Id.call(this,"timingevent",t)}function _v(t,e){if("function"!=Pp(t))throw Error("Fn must not be null and must be a function");return Rp.setTimeout(function(){t()},e)}Bp(vv,Id),Bp(gv,Id),Bp(bv,Id);var wv={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Ev={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Tv(){}function Iv(t){var e;return(e=t.a)||(e=t.a={}),e}function Sv(){}Tv.prototype.a=null;var Cv,Nv={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Av(){Id.call(this,"d")}function kv(){Id.call(this,"c")}function Rv(){}function Ov(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new uv(this),this.N=Pv,t=ld?125:void 0,this.O=new rv(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Bp(Av,Id),Bp(kv,Id),Bp(Rv,Tv),Cv=new Rv;var Pv=45e3,Dv={},xv={};function Lv(t,e,n){t.B=1,t.f=ny(Xv(e)),t.j=n,t.F=!0,Mv(t,null)}function Mv(t,e){t.s=qp(),Uv(t),t.A=Xv(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),vy(n.b,"t",r),t.w=0,t.a=og(t.g,t.g.w?e:null),0<t.J&&(t.D=new sv(jp(t.ya,t,t.a),t.J)),hv(t.G,t.a,"readystatechange",t.Sa),e=t.m?nd(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),yv(1)}function Fv(t,e,n){for(var r,i,o,s,a=!0;!t.l&&t.w<n.length;){var u=(i=n,s=o=void 0,o=(r=t).w,-1==(s=i.indexOf("\n",o))?xv:(o=Number(i.substring(o,s)),isNaN(o)?Dv:(s+=1)+o>i.length?xv:(i=i.substr(s,o),r.w=s+o,i)));if(u==xv){4==e&&(t.c=4,mv(14),a=!1);break}if(u==Dv){t.c=4,mv(15),a=!1;break}Wv(t,u)}4==e&&0==n.length&&(t.c=1,mv(16),a=!1),t.b=t.b&&a,a||(Bv(t),qv(t))}function Uv(t){t.P=qp()+t.N,jv(t,t.N)}function jv(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=_v(jp(t.Qa,t),e)}function Vv(t){t.h&&(Rp.clearTimeout(t.h),t.h=null)}function qv(t){0==t.g.u||t.l||tg(t.g,t)}function Bv(t){Vv(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,iv(t.O),lv(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Wv(t,e){try{var n,r,i,o,s,a,u,c,h,l,f=t.g;if(0!=f.u&&(f.a==t||Ey(f.b,t)))if(f.A=t.H,!t.o&&Ey(f.b,t)&&3==f.u){try{var p=f.ja.a.parse(e)}catch(t){p=null}if(Array.isArray(p)&&3==p.length){var d=p;if(0==d[0]){t:if(!f.i){if(f.a){if(!(f.a.s+3e3<t.s))break t;Zy(f),f.a.cancel(),f.a=null}$y(f),mv(18)}}else f.ia=d[1],0<f.ia-f.G&&d[2]<37500&&f.U&&0==f.m&&!f.l&&(f.l=_v(jp(f.Na,f),6e3));if(wy(f.b)<=1&&f.O){try{f.O()}catch(t){}f.O=void 0}}else ng(f,11)}else if(!t.o&&f.a!=t||Zy(f),!Qp(e))for(e=p=f.ja.a.parse(e),p=0;p<e.length;p++){d=e[p],f.G=d[0],d=d[1],2==f.u?"c"==d[0]?(f.B=d[1],f.R=d[2],null!=(n=d[3])&&(f.oa=n),null!=(r=d[5])&&"number"==typeof r&&0<r&&(f.D=1.5*r),i=f,(o=t.a)&&(!(s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(a=i.b).a&&(Jp(s,"spdy")||Jp(s,"quic")||Jp(s,"h2"))&&(a.f=a.g,a.a=new Set,a.b&&(Ty(a,a.b),a.b=null)),!i.s||(u=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(i.ha=u,ey(i.v,i.s,u))),f.u=3,f.c&&f.c.na(),c=t,(i=f).ea=ig(i,i.w?i.R:null,i.P),c.o?(Iy(i.b,c),h=c,(l=i.D)&&h.setTimeout(l),h.h&&(Vv(h),Uv(h)),i.a=c):Jy(i),0<f.f.length&&Ky(f)):"stop"!=d[0]&&"close"!=d[0]||ng(f,7):3==f.u&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?ng(f,7):Gy(f):"noop"!=d[0]&&f.c&&f.c.ma(d),f.m=0)}yv(4)}catch(t){}}function Gv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Dp(t)||"string"==typeof t)Hp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(Dp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(Dp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Hv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Hv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function zv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Kv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Kv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Kv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Np=Ov.prototype).setTimeout=function(t){this.N=t},Np.Sa=function(t){t=t.target;var e=this.D;e&&3==Vy(t)?e.Ia():this.ya(t)},Np.ya=function(t){try{if(t==this.a)t:{var e=Vy(this.a),n=this.a.qa(),r=this.a.S();if(!(e<3||3==e&&!ld&&!this.a.Y())){this.l||4!=e||7==n||yv(8==n||r<=0?3:2),Vv(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qp(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,mv(12),Bv(this),qv(this);break t}this.o=!0,Wv(this,u)}this.F?(Fv(this,e,o),ld&&this.b&&3==e&&(hv(this.G,this.O,"tick",this.Ra),this.O.start())):Wv(this,o),4==e&&Bv(this),this.b&&!this.l&&(4==e?tg(this.g,this):(this.b=!1,Uv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,mv(12)):(this.c=0,mv(13)),Bv(this),qv(this)}}}catch(t){}},Np.Ra=function(){var t,e;this.a&&(t=Vy(this.a),e=this.a.Y(),this.w<e.length&&(Vv(this),Fv(this,t,e),this.b&&4!=t&&Uv(this)))},Np.cancel=function(){this.l=!0,Bv(this)},Np.Qa=function(){this.h=null;var t=qp();0<=t-this.P?(2!=this.B&&(yv(3),mv(17)),Bv(this),this.c=2,qv(this)):jv(this,this.P-t)},(Np=Hv.prototype).I=function(){zv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Np.K=function(){return zv(this),this.a.concat()},Np.get=function(t,e){return Kv(this.b,t)?this.b[t]:e},Np.set=function(t,e){Kv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Np.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Yv?(this.a=void 0!==e?e:t.a,Jv(this,t.f),this.j=t.j,$v(this,t.c),Zv(this,t.h),this.g=t.g,e=t.b,(n=new ly).c=e.c,e.a&&(n.a=new Hv(e.a),n.b=e.b),ty(this,n),this.i=t.i):t&&(n=String(t).match(Qv))?(this.a=!!e,Jv(this,n[1]||"",!0),this.j=ry(n[2]||""),$v(this,n[3]||"",!0),Zv(this,n[4]),this.g=ry(n[5]||"",!0),ty(this,n[6]||"",!0),this.i=ry(n[7]||"")):(this.a=!!e,this.b=new ly(null,this.a))}function Xv(t){return new Yv(t)}function Jv(t,e,n){t.f=n?ry(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function $v(t,e,n){t.c=n?ry(e,!0):e}function Zv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ty(t,e,n){var r,i;e instanceof ly?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(fy(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(py(this,e),vy(this,n,t))},r)),r.f=i):(n||(e=iy(e,cy)),t.b=new ly(e,t.a))}function ey(t,e,n){t.b.set(e,n)}function ny(t){return ey(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^qp()).toString(36)),t}function ry(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function iy(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,oy),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Yv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(iy(e,sy,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(iy(e,sy,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(iy(n,"/"==n.charAt(0)?uy:ay,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",iy(n,hy)),t.join("")};var sy=/[#\/\?@]/g,ay=/[#\?:]/g,uy=/[#\?]/g,cy=/[#\?@]/g,hy=/#/g;function ly(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fy(n){n.a||(n.a=new Hv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function py(t,e){fy(t),e=yy(t,e),Kv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Kv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&zv(t)))}function dy(t,e){return fy(t),e=yy(t,e),Kv(t.a.b,e)}function vy(t,e,n){py(t,e),0<n.length&&(t.c=null,t.a.set(yy(t,e),Kp(n)),t.b+=n.length)}function yy(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function gy(t,e){this.b=t,this.a=e}function my(t){this.g=t||by,t=Rp.PerformanceNavigationTiming?0<(t=Rp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Rp.ca&&Rp.ca.ua&&Rp.ca.ua()&&Rp.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Np=ly.prototype).add=function(t,e){fy(this),this.c=null,t=yy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Np.forEach=function(n,r){fy(this),this.a.forEach(function(t,e){Hp(t,function(t){n.call(r,t,e,this)},this)},this)},Np.K=function(){fy(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Np.I=function(t){fy(this);var e=[];if("string"==typeof t)dy(this,t)&&(e=zp(e,this.a.get(yy(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=zp(e,t[n])}return e},Np.set=function(t,e){return fy(this),this.c=null,dy(this,t=yy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Np.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Np.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.I(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var by=10;function _y(t){return t.b||t.a&&t.a.size>=t.f}function wy(t){return t.b?1:t.a?t.a.size:0}function Ey(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Ty(t,e){t.a?t.a.add(e):t.b=e}function Iy(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Sy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return Kp(t.c);var r=t.c;try{for(var i=Cp(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.i)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Cy(){}function Ny(){this.a=new Cy}function Ay(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}my.prototype.cancel=function(){var e,t;if(this.c=Sy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Cp(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Cy.prototype.stringify=function(t){return Rp.JSON.stringify(t,void 0)},Cy.prototype.parse=function(t){return Rp.JSON.parse(t,void 0)};var ky=Rp.JSON.parse;function Ry(t){Hd.call(this),this.headers=new Hv,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Oy,this.B=this.F=!1}Bp(Ry,Hd);var Oy="",Py=/^https?$/i,Dy=["POST","PUT"];function xy(t){return"content-type"==t.toLowerCase()}function Ly(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,My(t),Uy(t)}function My(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Fy(t){if(t.b&&void 0!==kp&&(!t.s[1]||4!=Vy(t)||2!=t.S()))if(t.l&&4==Vy(t))ov(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==Vy(t)){t.b=!1;try{var e,n,r,i,o=t.S();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.D).match(Qv)[1]||null)&&Rp.self&&Rp.self.location&&(i=(r=Rp.self.location.protocol).substr(0,r.length-1)),n=!Py.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Vy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",My(t)}}finally{Uy(t)}}}function Uy(t,e){if(t.a){jy(t);var n=t.a,r=t.s[0]?Op:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function jy(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(Rp.clearTimeout(t.m),t.m=null)}function Vy(t){return t.a?t.a.readyState:0}function qy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",ed(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ey(t,e,n))}function By(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wy(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=By("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=By("baseRetryDelayMs",5e3,t),this.Ga=By("retryDelaySeedMs",1e4,t),this.Da=By("forwardChannelMaxRetries",2,t),this.ga=By("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new my(t&&t.concurrentRequestLimit),this.ja=new Ny,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Gy(t){var e,n;Hy(t),3==t.u&&(e=t.H++,ey(n=Xv(t.v),"SID",t.B),ey(n,"RID",e),ey(n,"TYPE","terminate"),Yy(t,n),(e=new Ov(t,e,void 0)).B=2,e.f=ny(Xv(n)),n=!1,Rp.navigator&&Rp.navigator.sendBeacon&&(n=Rp.navigator.sendBeacon(e.f.toString(),"")),!n&&Rp.Image&&((new Image).src=e.f,n=!0),n||(e.a=og(e.g,null),e.a.$(e.f)),e.s=qp(),Uv(e)),rg(t)}function Hy(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(Rp.clearTimeout(t.i),t.i=null),Zy(t),t.b.cancel(),t.g&&("number"==typeof t.g&&Rp.clearTimeout(t.g),t.g=null)}function zy(t,e){t.f.push(new gy(t.Fa++,e)),3==t.u&&Ky(t)}function Ky(t){_y(t.b)||t.g||(t.g=!0,Zd(t.xa,t),t.o=0)}function Qy(t,e){var n=e?e.W:t.H++,r=Xv(t.v);ey(r,"SID",t.B),ey(r,"RID",n),ey(r,"AID",t.G),Yy(t,r),t.h&&t.j&&qy(r,t.h,t.j),n=new Ov(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Xy(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Ty(t.b,n),Lv(n,r,e)}function Yy(t,n){t.c&&Gv({},function(t,e){ey(n,e,t)})}function Xy(t,e,n){n=Math.min(t.f.length,n);var r=t.c?jp(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{Gv(t,function(t,e){var n=t;xp(t)&&(n=Kd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Jy(t){t.a||t.i||(t.J=1,Zd(t.wa,t),t.m=0)}function $y(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=_v(jp(t.wa,t),eg(t,t.m)),t.m++,1)}function Zy(t){null!=t.l&&(Rp.clearTimeout(t.l),t.l=null)}function tg(t,e){var n,r=null;if(t.a==e){Zy(t),t.a=null;var i=2}else{if(!Ey(t.b,e))return;r=e.i,Iy(t.b,e),i=1}if(t.A=e.H,0!=t.u)if(e.b){1==i?(r=e.j?e.j.length:0,e=qp()-e.s,n=t.o,(i=dv()).dispatchEvent(new bv(i)),Ky(t)):Jy(t)}else if(3==(n=e.c)||0==n&&0<t.A||!(1==i&&function(t,e){if(!(wy(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=_v(jp(t.xa,t,e),eg(t,t.o)),t.o++,1}}(t,e)||2==i&&$y(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:ng(t,5);break;case 4:ng(t,10);break;case 3:ng(t,6);break;default:ng(t,2)}}function eg(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function ng(t,e){var n,r,i,o,s,a;2==e?(n=null,t.c&&(n=null),r=jp(t.Ta,t),n||(n=new Yv("//www.google.com/images/cleardot.gif"),Rp.location&&"http"==Rp.location.protocol||Jv(n,"https"),ny(n)),i=n.toString(),o=r,a=new fv,Rp.Image?((s=new Image).onload=Vp(Ay,a,s,"TestLoadImage: loaded",!0,o),s.onerror=Vp(Ay,a,s,"TestLoadImage: error",!1,o),s.onabort=Vp(Ay,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=Vp(Ay,a,s,"TestLoadImage: timeout",!1,o),Rp.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):mv(2),t.u=0,t.c&&t.c.la(e),rg(t),Hy(t)}function rg(t){t.u=0,t.A=-1,t.c&&(0==Sy(t.b).length&&0==t.f.length||(t.b.c.length=0,Kp(t.f),t.f.length=0),t.c.ka())}function ig(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof Yv?Xv(r):new Yv(r,void 0);return""!=h.c?(e&&$v(h,e+"."+h.c),Zv(h,h.h)):(i=Rp.location,o=i.protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new Yv(null,void 0),o&&Jv(c,o),s&&$v(c,s),a&&Zv(c,a),u&&(c.g=u),h=c),t.N&&ed(t.N,function(t,e){ey(h,e,t)}),e=t.s,n=t.ha,e&&n&&ey(h,e,n),ey(h,"VER",t.oa),Yy(t,h),h}function og(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ry(t.Ea)).F=t.w,e}function sg(){}function ag(){if(cd&&!(10<=Number(_d)))throw Error("Environmental error: no available transport.")}function ug(t,e){Hd.call(this),this.a=new Wy(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Qp(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qp(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new lg(this)}function cg(t){Av.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function hg(){kv.call(this),this.status=1}function lg(t){this.a=t}(Np=Ry.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Iv(this.G):Iv(Cv),this.a.onreadystatechange=jp(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Ly(this,t)}t=n||"";var i,o=new Hv(this.headers);r&&Gv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=xy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=Rp.FormData&&t instanceof Rp.FormData,0<=Gp(Dy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{jy(this),0<this.o&&((this.B=(i=this.a,cd&&bd(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=jp(this.ta,this)):this.m=ov(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ly(this,t)}},Np.ta=function(){void 0!==kp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Np.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Uy(this))},Np.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Uy(this,!0)),Ry.M.C.call(this)},Np.va=function(){this.j||(this.w||this.l||this.g?Fy(this):this.Oa())},Np.Oa=function(){Fy(this)},Np.S=function(){try{return 2<Vy(this)?this.a.status:-1}catch(t){return-1}},Np.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Np.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ky(e)}},Np.qa=function(){return this.h},Np.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Np=Wy.prototype).oa=8,Np.u=1,Np.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new Ov(this,t,void 0),r=this.j;if(this.F&&(r?id(r=nd(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Xy(this,n,e),ey(i=Xv(this.v),"RID",t),ey(i,"CVER",22),this.s&&ey(i,"X-HTTP-Session-Id",this.s),Yy(this,i),this.h&&r&&qy(i,this.h,r),Ty(this.b,n),this.fa?(ey(i,"$req",e),ey(i,"SID","null"),n.R=!0,Lv(n,i,null)):Lv(n,i,e),this.u=2}}else 3==this.u&&(t?Qy(this,t):0==this.f.length||_y(this.b)||Qy(this))},Np.wa=function(){this.i=null,this.a=new Ov(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Xv(this.ea);ey(t,"RID","rpc"),ey(t,"SID",this.B),ey(t,"CI",this.U?"0":"1"),ey(t,"AID",this.G),Yy(this,t),ey(t,"TYPE","xmlhttp"),this.h&&this.j&&qy(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=ny(Xv(t)),e.j=null,e.F=!0,Mv(e,n)},Np.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,$y(this),mv(19))},Np.Ta=function(t){mv(t?2:1)},(Np=sg.prototype).na=function(){},Np.ma=function(){},Np.la=function(){},Np.ka=function(){},Np.Ha=function(){},ag.prototype.a=function(t,e){return new ug(t,e)},Bp(ug,Hd),(Np=ug.prototype).addEventListener=function(t,e,n,r){ug.M.addEventListener.call(this,t,e,n,r)},Np.removeEventListener=function(t,e,n,r){ug.M.removeEventListener.call(this,t,e,n,r)},Np.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;mv(0),t.P=e,t.N=n||{},t.U=t.W,t.v=ig(t,null,t.P),Ky(t)},Np.close=function(){Gy(this.a)},Np.La=function(t){var e;"string"==typeof t?((e={}).__data__=t,zy(this.a,e)):this.g?((e={}).__data__=Kd(t),zy(this.a,e)):zy(this.a,t)},Np.C=function(){this.a.c=null,delete this.f,Gy(this.a),delete this.a,ug.M.C.call(this)},Bp(cg,Av),Bp(hg,kv),Bp(lg,sg),lg.prototype.na=function(){this.a.dispatchEvent("a")},lg.prototype.ma=function(t){this.a.dispatchEvent(new cg(t))},lg.prototype.la=function(t){this.a.dispatchEvent(new hg)},lg.prototype.ka=function(){this.a.dispatchEvent("b")},ag.prototype.createWebChannel=ag.prototype.a,ug.prototype.send=ug.prototype.La,ug.prototype.open=ug.prototype.Ka,wv.NO_ERROR=0,wv.TIMEOUT=8,wv.HTTP_ERROR=6,Ev.COMPLETE="complete",(Sv.EventType=Nv).OPEN="a",Nv.CLOSE="b",Nv.ERROR="c",Nv.MESSAGE="d",Hd.prototype.listen=Hd.prototype.ra,Ry.prototype.listenOnce=Ry.prototype.sa,Ry.prototype.getLastError=Ry.prototype.Ma,Ry.prototype.getLastErrorCode=Ry.prototype.qa,Ry.prototype.getStatus=Ry.prototype.S,Ry.prototype.getResponseJson=Ry.prototype.Ja,Ry.prototype.getResponseText=Ry.prototype.Y,Ry.prototype.send=Ry.prototype.$;var fg={createWebChannelTransport:function(){return new ag},ErrorCode:wv,EventType:Ev,WebChannel:Sv,XhrIo:Ry},pg=fg.createWebChannelTransport,dg=fg.ErrorCode,vg=fg.EventType,yg=fg.WebChannel,gg=fg.XhrIo,mg=zl.SDK_VERSION,bg=(_g.prototype.t=function(){return null!=this.uid},_g.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},_g.prototype.isEqual=function(t){return t.uid===this.uid},_g);function _g(t){this.uid=t}bg.UNAUTHENTICATED=new bg(null),bg.i=new bg("google-credentials-uid"),bg.h=new bg("first-party-uid");function wg(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t}var Eg,Tg,Ig={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sg=(Gs(Bg,Tg=Error),Bg),Cg=(qg.prototype.getToken=function(){return Promise.resolve(null)},qg.prototype._=function(){},qg.prototype.l=function(t){(this.u=t)(bg.UNAUTHENTICATED)},qg.prototype.T=function(){this.u=null},qg),Ng=(Vg.prototype.getToken=function(){var e=this,n=this.A,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.A!==n?(U_("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(B_("string"==typeof t.accessToken),new wg(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Vg.prototype._=function(){this.forceRefresh=!0},Vg.prototype.l=function(t){this.u=t,this.R&&t(this.currentUser)},Vg.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.I),this.I=null,this.u=null},Vg.prototype.m=function(){var t=this.auth&&this.auth.getUid();return B_(null===t||"string"==typeof t),new bg(t)},Vg),Ag=(Object.defineProperty(jg.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),jg),kg=(Ug.prototype.getToken=function(){return Promise.resolve(new Ag(this.P,this.V))},Ug.prototype.l=function(t){t(bg.h)},Ug.prototype.T=function(){},Ug.prototype._=function(){},Ug),Rg=(Fg.now=function(){return Fg.fromMillis(Date.now())},Fg.fromDate=function(t){return Fg.fromMillis(t.getTime())},Fg.fromMillis=function(t){var e=Math.floor(t/1e3);return new Fg(e,1e6*(t-1e3*e))},Fg.prototype.toDate=function(){return new Date(this.toMillis())},Fg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Fg.prototype.p=function(t){return this.seconds===t.seconds?H_(this.nanoseconds,t.nanoseconds):H_(this.seconds,t.seconds)},Fg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Fg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Fg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Fg),Og=(Mg.v=function(t){return new Mg(t)},Mg.min=function(){return new Mg(new Rg(0,0))},Mg.prototype.S=function(t){return this.timestamp.p(t.timestamp)},Mg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Mg.prototype.D=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Mg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Mg.prototype.C=function(){return this.timestamp},Mg),Pg=(Object.defineProperty(Lg.prototype,"length",{get:function(){return this.F},enumerable:!0,configurable:!0}),Lg.prototype.isEqual=function(t){return 0===Lg.N(this,t)},Lg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Lg?t.forEach(function(t){e.push(t)}):e.push(t),this.k(e)},Lg.prototype.limit=function(){return this.offset+this.length},Lg.prototype.M=function(t){return t=void 0===t?1:t,this.k(this.segments,this.offset+t,this.length-t)},Lg.prototype.$=function(){return this.k(this.segments,this.offset,this.length-1)},Lg.prototype.O=function(){return this.segments[this.offset]},Lg.prototype.L=function(){return this.get(this.length-1)},Lg.prototype.get=function(t){return this.segments[this.offset+t]},Lg.prototype.B=function(){return 0===this.length},Lg.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Lg.prototype.U=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Lg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Lg.prototype.W=function(){return this.segments.slice(this.offset,this.limit())},Lg.N=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Lg),Dg=(Gs(xg,Eg=Pg),xg.prototype.k=function(t,e,n){return new xg(t,e,n)},xg.prototype.j=function(){return this.W().join("/")},xg.prototype.toString=function(){return this.j()},xg.K=function(t){if(0<=t.indexOf("//"))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new xg(t.split("/").filter(function(t){return 0<t.length}))},xg);function xg(){return null!==Eg&&Eg.apply(this,arguments)||this}function Lg(t,e,n){void 0===e?e=0:e>t.length&&q_(),void 0===n?n=t.length-e:n>t.length-e&&q_(),this.segments=t,this.offset=e,this.F=n}function Mg(t){this.timestamp=t}function Fg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Sg(Ig.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Sg(Ig.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Sg(Ig.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Sg(Ig.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Ug(t,e){this.P=t,this.V=e}function jg(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=bg.h}function Vg(t){var e=this;this.I=null,this.currentUser=bg.UNAUTHENTICATED,this.R=!1,this.A=0,this.u=null,this.forceRefresh=!1,this.I=function(){e.A++,e.currentUser=e.m(),e.R=!0,e.u&&e.u(e.currentUser)},this.A=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.I):(this.I(null),t.get().then(function(t){e.auth=t,e.I&&e.auth.addAuthTokenListener(e.I)},function(){}))}function qg(){this.u=null}function Bg(t,e){var n=this;return(n=Tg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}Dg.G=new Dg([]);var Wg,Gg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hg=(Gs(zg,Wg=Pg),zg.prototype.k=function(t,e,n){return new zg(t,e,n)},zg.H=function(t){return Gg.test(t)},zg.prototype.j=function(){return this.W().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),zg.H(t)||(t="`"+t+"`"),t}).join(".")},zg.prototype.toString=function(){return this.j()},zg.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},zg.J=function(){return new zg(["__name__"])},zg.X=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Sg(Ig.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Sg(Ig.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Sg(Ig.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zg(e)},zg);function zg(){return null!==Wg&&Wg.apply(this,arguments)||this}Hg.G=new Hg([]);var Kg=(Qg.Z=function(t){return new Qg(Dg.K(t).M(5))},Qg.prototype.tt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Qg.prototype.isEqual=function(t){return null!==t&&0===Dg.N(this.path,t.path)},Qg.prototype.toString=function(){return this.path.toString()},Qg.N=function(t,e){return Dg.N(t.path,e.path)},Qg.et=function(t){return t.length%2==0},Qg.st=function(t){return new Qg(new Dg(t.slice()))},Qg);function Qg(t){this.path=t}function Yg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}Kg.EMPTY=new Kg(new Dg([]));var $g=(Zg.fromBase64String=function(t){return new Zg(x_.nt().atob(t))},Zg.fromUint8Array=function(t){return new Zg(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Zg.prototype.toBase64=function(){return x_.nt().btoa(this.it)},Zg.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.it)},Zg.prototype.rt=function(){return 2*this.it.length},Zg.prototype.S=function(t){return H_(this.it,t.it)},Zg.prototype.isEqual=function(t){return this.it===t.it},Zg);function Zg(t){this.it=t}function tm(t){return null==t}function em(t){return-0===t&&1/t==-1/0}function nm(t){return"number"==typeof t&&Number.isInteger(t)&&!em(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function rm(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function im(t){var e=fm(t.mapValue.fields.__local_write_time__.timestampValue);return new Rg(e.seconds,e.nanos)}$g.ht=new $g("");var om=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rm(t)?4:10:q_()}function am(r,i){var t,e,n,o=sm(r);if(o!==sm(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return im(r).isEqual(im(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=fm(r.timestampValue),n=fm(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,dm(r.bytesValue).isEqual(dm(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,pm((t=r).geoPointValue.latitude)===pm(e.geoPointValue.latitude)&&pm(t.geoPointValue.longitude)===pm(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return pm(t.integerValue)===pm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=pm(t.doubleValue),r=pm(e.doubleValue);return n===r?em(n)===em(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return z_(r.arrayValue.values||[],i.arrayValue.values||[],am);case 10:return function(){var t=r.mapValue.fields||{},e=i.mapValue.fields||{};if(Yg(t)!==Yg(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!am(t[n],e[n])))return!1;return!0}();default:return q_()}}function um(t,e){return void 0!==(t.values||[]).find(function(t){return am(t,e)})}function cm(t,e){var n,r,i,o,s,a,u,c,h,l,f=sm(t),p=sm(e);if(f!==p)return H_(f,p);switch(f){case 0:return 0;case 1:return H_(t.booleanValue,e.booleanValue);case 2:return c=e,h=pm(t.integerValue||t.doubleValue),l=pm(c.integerValue||c.doubleValue),h<l?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return hm(t.timestampValue,e.timestampValue);case 4:return hm(im(t),im(e));case 5:return H_(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=dm(o),u=dm(s),a.S(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=H_(n[i],r[i]);if(0!==o)return o}return H_(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=H_(pm(n.latitude),pm(r.latitude)))?i:H_(pm(n.longitude),pm(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=cm(n[i],r[i]);if(o)return o}return H_(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=H_(r[s],o[s]);if(0!==a)return a;var u=cm(n[r[s]],i[o[s]]);if(0!==u)return u}return H_(r.length,o.length)}(t.mapValue,e.mapValue);default:throw q_()}}function hm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return H_(t,e);var n=fm(t),r=fm(e),i=H_(n.seconds,r.seconds);return 0!==i?i:H_(n.nanos,r.nanos)}function lm(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=fm(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?dm(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Kg.Z(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++){e?e=!1:t+=",",t+=s(r[n])}return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):q_();var t,e,n}(t)}function fm(t){if(B_(!!t),"string"!=typeof t)return{seconds:pm(t.seconds),nanos:pm(t.nanos)};var e,n=0,r=om.exec(t);B_(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function pm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dm(t){return"string"==typeof t?$g.fromBase64String(t):$g.fromUint8Array(t)}function vm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.j()}}function ym(t){return t&&"integerValue"in t}function gm(t){return!!t&&"arrayValue"in t}function mm(t){return t&&"nullValue"in t}function bm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _m(t){return t&&"mapValue"in t}var wm=(Em.prototype.ot=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},Em.prototype.at=function(t,e){return e},Em.prototype.ut=function(t){return null},Em.prototype.isEqual=function(t){return t instanceof Em},Em);function Em(){}wm.instance=new wm;var Tm=(Am.prototype.ot=function(t,e){return this.apply(t)},Am.prototype.at=function(t,e){return this.apply(t)},Am.prototype.apply=function(t){for(var n=km(t),e=0,r=this.elements;e<r.length;e++)!function(e){n.some(function(t){return am(t,e)})||n.push(e)}(r[e]);return{arrayValue:{values:n}}},Am.prototype.ut=function(t){return null},Am.prototype.isEqual=function(t){return t instanceof Am&&z_(this.elements,t.elements,am)},Am),Im=(Nm.prototype.ot=function(t,e){return this.apply(t)},Nm.prototype.at=function(t,e){return this.apply(t)},Nm.prototype.apply=function(t){for(var n=km(t),e=0,r=this.elements;e<r.length;e++)!function(e){n=n.filter(function(t){return!am(t,e)})}(r[e]);return{arrayValue:{values:n}}},Nm.prototype.ut=function(t){return null},Nm.prototype.isEqual=function(t){return t instanceof Nm&&z_(this.elements,t.elements,am)},Nm),Sm=(Cm.prototype.ot=function(t,e){var n=this.ut(t),r=this.asNumber(n)+this.asNumber(this.ct);return ym(n)&&ym(this.ct)?this.serializer._t(r):this.serializer.lt(r)},Cm.prototype.at=function(t,e){return e},Cm.prototype.ut=function(t){return ym(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},Cm.prototype.isEqual=function(t){return t instanceof Cm&&am(this.ct,t.ct)},Cm.prototype.asNumber=function(t){return pm(t.integerValue||t.doubleValue)},Cm);function Cm(t,e){this.serializer=t,this.ct=e}function Nm(t){this.elements=t}function Am(t){this.elements=t}function km(t){return gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Rm(t,e){this.version=t,this.transformResults=e}var Om,Pm,Dm,xm,Lm,Mm=(rb.prototype.dt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].q(t))return!0;return!1},rb.prototype.isEqual=function(t){return z_(this.fields,t.fields,function(t,e){return t.isEqual(e)})},rb),Fm=(nb.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},nb),Um=(eb.ft=function(){return new eb},eb.exists=function(t){return new eb(void 0,t)},eb.updateTime=function(t){return new eb(t)},Object.defineProperty(eb.prototype,"Tt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),eb.prototype.Et=function(t){return void 0!==this.updateTime?t instanceof gb&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof gb},eb.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},eb),jm=(tb.prototype.It=function(t){},tb.wt=function(t){return t instanceof gb?t.version:Og.min()},tb),Vm=(Gs(Zm,Lm=jm),Zm.prototype.at=function(t,e){this.It(t);var n=e.version;return new gb(this.key,n,this.value,{hasCommittedMutations:!0})},Zm.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=jm.wt(t);return new gb(this.key,r,this.value,{At:!0})},Zm.prototype.Pt=function(t){return null},Zm.prototype.isEqual=function(t){return t instanceof Zm&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Rt.isEqual(t.Rt)},Zm),qm=(Gs($m,xm=jm),$m.prototype.at=function(t,e){if(this.It(t),!this.Rt.Et(t))return new bb(this.key,e.version);var n=this.gt(t);return new gb(this.key,e.version,n,{hasCommittedMutations:!0})},$m.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=jm.wt(t),i=this.gt(t);return new gb(this.key,r,i,{At:!0})},$m.prototype.Pt=function(t){return null},$m.prototype.isEqual=function(t){return t instanceof $m&&this.key.isEqual(t.key)&&this.Vt.isEqual(t.Vt)&&this.Rt.isEqual(t.Rt)},$m.prototype.gt=function(t){var e=t instanceof gb?t.data():Hm.empty();return this.pt(e)},$m.prototype.pt=function(t){var n=this,r=new zm(t);return this.Vt.fields.forEach(function(t){var e;t.B()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.yt()},$m),Bm=(Gs(Jm,Dm=jm),Jm.prototype.at=function(t,e){if(this.It(t),B_(null!=e.transformResults),!this.Rt.Et(t))return new bb(this.key,e.version);var n=this.bt(t),r=this.vt(t,e.transformResults),i=e.version,o=this.St(n.data(),r);return new gb(this.key,i,o,{hasCommittedMutations:!0})},Jm.prototype.ot=function(t,e,n){if(this.It(t),!this.Rt.Et(t))return t;var r=this.bt(t),i=this.Dt(n,t,e),o=this.St(r.data(),i);return new gb(this.key,r.version,o,{At:!0})},Jm.prototype.Pt=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof gb?t.field(i.field):void 0,s=i.transform.ut(o||null);null!=s&&(e=null==e?(new zm).set(i.field,s):e.set(i.field,s))}return e?e.yt():null},Jm.prototype.isEqual=function(t){return t instanceof Jm&&this.key.isEqual(t.key)&&z_(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Rt.isEqual(t.Rt)},Jm.prototype.bt=function(t){return t},Jm.prototype.vt=function(t,e){var n=[];B_(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof gb&&(s=t.field(i.field)),n.push(o.at(s,e[r]))}return n},Jm.prototype.Dt=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof gb&&(u=e.field(s.field)),null===u&&n instanceof gb&&(u=n.field(s.field)),r.push(a.ot(u,t))}return r},Jm.prototype.St=function(t,e){for(var n=new zm(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.yt()},Jm),Wm=(Gs(Xm,Pm=jm),Xm.prototype.at=function(t,e){return this.It(t),new mb(this.key,e.version,{hasCommittedMutations:!0})},Xm.prototype.ot=function(t,e,n){return this.It(t),this.Rt.Et(t)?new mb(this.key,Og.min()):t},Xm.prototype.Pt=function(t){return null},Xm.prototype.isEqual=function(t){return t instanceof Xm&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},Xm),Gm=(Gs(Ym,Om=jm),Ym.prototype.at=function(t,e){q_()},Ym.prototype.ot=function(t,e,n){q_()},Ym.prototype.Pt=function(t){q_()},Ym.prototype.isEqual=function(t){return t instanceof Ym&&this.key.isEqual(t.key)&&this.Rt.isEqual(t.Rt)},Ym),Hm=(Qm.empty=function(){return new Qm({mapValue:{}})},Qm.prototype.field=function(t){if(t.B())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!_m(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.L()])||null},Qm.prototype.isEqual=function(t){return am(this.proto,t.proto)},Qm),zm=(Km.prototype.set=function(t,e){return this.Nt(t,e),this},Km.prototype.delete=function(t){return this.Nt(t,null),this},Km.prototype.Nt=function(t,e){for(var n=this.Ft,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===sm(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.L(),e)},Km.prototype.yt=function(){var t=this.kt(Hg.G,this.Ft);return null!=t?new Hm(t):this.Ct},Km.prototype.kt=function(r,t){var i=this,o=!1,e=this.Ct.field(r),s=_m(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.kt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Km);function Km(t){void 0===t&&(t=Hm.empty()),this.Ct=t,this.Ft=new Map}function Qm(t){this.proto=t}function Ym(t,e){var n=this;return(n=Om.call(this)||this).key=t,n.Rt=e,n.type=4,n}function Xm(t,e){var n=this;return(n=Pm.call(this)||this).key=t,n.Rt=e,n.type=3,n}function Jm(t,e){var n=this;return(n=Dm.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Rt=Um.exists(!0),n}function $m(t,e,n,r){var i=this;return(i=xm.call(this)||this).key=t,i.data=e,i.Vt=n,i.Rt=r,i.type=1,i}function Zm(t,e,n){var r=this;return(r=Lm.call(this)||this).key=t,r.value=e,r.Rt=n,r.type=0,r}function tb(){}function eb(t,e){this.updateTime=t,this.exists=e}function nb(t,e){this.field=t,this.transform=e}function rb(t){(this.fields=t).sort(Hg.N)}function ib(t,e){this.key=t,this.version=e}function ob(t){this.count=t}var sb,ab,ub,cb,hb,lb,fb,pb,db,vb,yb,gb=(Gs(Gb,yb=ib),Gb.prototype.field=function(t){return this.Mt.field(t)},Gb.prototype.data=function(){return this.Mt},Gb.prototype.xt=function(){return this.Mt.proto},Gb.prototype.isEqual=function(t){return t instanceof Gb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.At===t.At&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Mt.isEqual(t.Mt)},Gb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Mt.toString()+", {hasLocalMutations: "+this.At+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Gb.prototype,"hasPendingWrites",{get:function(){return this.At||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Gb),mb=(Gs(Wb,vb=ib),Wb.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Wb.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Wb.prototype.isEqual=function(t){return t instanceof Wb&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Wb),bb=(Gs(Bb,db=ib),Bb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Bb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Bb.prototype.isEqual=function(t){return t instanceof Bb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Bb),_b=(qb.prototype.canonicalId=function(){var t;return null===this.$t&&(t=this.path.j(),null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map(function(t){return t.canonicalId()}).join(","),t+="|ob:",t+=this.orderBy.map(function(t){return t.canonicalId()}).join(","),tm(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.$t=t),this.$t},qb.prototype.toString=function(){var t=this.path.j();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),tm(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},qb.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},qb.prototype.Ot=function(){return Kg.et(this.path)&&null===this.collectionGroup&&0===this.filters.length},qb),wb=(Vb.Wt=function(t){return new Vb(t)},Object.defineProperty(Vb.prototype,"orderBy",{get:function(){if(null===this.qt){this.qt=[];var t=this.jt(),e=this.Kt();if(null!==t&&null===e)t.Y()||this.qt.push(new kb(t)),this.qt.push(new kb(Hg.J(),"asc"));else{for(var n,r=!1,i=0,o=this.Lt;i<o.length;i++){var s=o[i];this.qt.push(s),s.field.Y()&&(r=!0)}r||(n=0<this.Lt.length?this.Lt[this.Lt.length-1].dir:"asc",this.qt.push(new kb(Hg.J(),n)))}}return this.qt},enumerable:!0,configurable:!0}),Vb.prototype.Gt=function(t){var e=this.filters.concat([t]);return new Vb(this.path,this.collectionGroup,this.Lt.slice(),e,this.limit,this.Bt,this.startAt,this.endAt)},Vb.prototype.zt=function(t){var e=this.Lt.concat([t]);return new Vb(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},Vb.prototype.Ht=function(t){return new Vb(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},Vb.prototype.Yt=function(t){return new Vb(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},Vb.prototype.Jt=function(t){return new Vb(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,t,this.endAt)},Vb.prototype.Xt=function(t){return new Vb(this.path,this.collectionGroup,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,t)},Vb.prototype.Zt=function(t){return new Vb(t,null,this.Lt.slice(),this.filters.slice(),this.limit,this.Bt,this.startAt,this.endAt)},Vb.prototype.te=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Lt.length||1===this.Lt.length&&this.Lt[0].field.Y())},Vb.prototype.canonicalId=function(){return this.ee().canonicalId()+"|lt:"+this.Bt},Vb.prototype.toString=function(){return"Query(target="+this.ee().toString()+"; limitType="+this.Bt+")"},Vb.prototype.isEqual=function(t){return this.ee().isEqual(t.ee())&&this.Bt===t.Bt},Vb.prototype.se=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},Vb.prototype.matches=function(t){return this.ie(t)&&this.ne(t)&&this.re(t)&&this.he(t)},Vb.prototype.oe=function(){return!tm(this.limit)&&"F"===this.Bt},Vb.prototype.ae=function(){return!tm(this.limit)&&"L"===this.Bt},Vb.prototype.Kt=function(){return 0<this.Lt.length?this.Lt[0].field:null},Vb.prototype.jt=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Eb&&n.ue())return n.field}return null},Vb.prototype.ce=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Eb&&0<=t.indexOf(r.op))return r.op}return null},Vb.prototype.Ot=function(){return this.ee().Ot()},Vb.prototype._e=function(){return null!==this.collectionGroup},Vb.prototype.ee=function(){if(!this.Ut)if("F"===this.Bt)this.Ut=new _b(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new kb(r.field,i))}var o=this.endAt?new Ab(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ab(this.startAt.position,!this.startAt.before):null;this.Ut=new _b(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Ut},Vb.prototype.ie=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.tt(this.collectionGroup)&&this.path.q(e):Kg.et(this.path)?this.path.isEqual(e):this.path.U(e)},Vb.prototype.ne=function(t){for(var e=0,n=this.Lt;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},Vb.prototype.re=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Vb.prototype.he=function(t){return!(this.startAt&&!this.startAt.le(this.orderBy,t)||this.endAt&&this.endAt.le(this.orderBy,t))},Vb.prototype.Qt=function(t){},Vb),Eb=(Gs(jb,pb=function(){}),jb.create=function(t,e,n){if(t.Y())return"in"===e?new Ib(t,n):new Tb(t,e,n);if(mm(n)){if("=="!==e)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new jb(t,e,n)}if(bm(n)){if("=="!==e)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new jb(t,e,n)}return"array-contains"===e?new Sb(t,n):"in"===e?new Cb(t,n):"array-contains-any"===e?new Nb(t,n):new jb(t,e,n)},jb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&sm(this.value)===sm(e)&&this.de(cm(e,this.value))},jb.prototype.de=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return q_()}},jb.prototype.ue=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},jb.prototype.canonicalId=function(){return this.field.j()+this.op.toString()+lm(this.value)},jb.prototype.isEqual=function(t){return t instanceof jb&&this.op===t.op&&this.field.isEqual(t.field)&&am(this.value,t.value)},jb.prototype.toString=function(){return this.field.j()+" "+this.op+" "+lm(this.value)},jb),Tb=(Gs(Ub,fb=Eb),Ub.prototype.matches=function(t){var e=Kg.N(t.key,this.key);return this.de(e)},Ub),Ib=(Gs(Fb,lb=Eb),Fb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Fb),Sb=(Gs(Mb,hb=Eb),Mb.prototype.matches=function(t){var e=t.field(this.field);return gm(e)&&um(e.arrayValue,this.value)},Mb),Cb=(Gs(Lb,cb=Eb),Lb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&um(this.value.arrayValue,e)},Lb),Nb=(Gs(xb,ub=Eb),xb.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return um(e.value.arrayValue,t)})},xb),Ab=(Db.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map(lm).join(",")},Db.prototype.le=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r],n=i.field.Y()?Kg.N(Kg.Z(o.referenceValue),e.key):cm(o,e.field(i.field));if("desc"===i.dir&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Db.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!am(this.position[e],t.position[e]))return!1;return!0},Db),kb=(Pb.prototype.compare=function(t,e){var n,r,i,o,s=this.fe?Kg.N(t.key,e.key):(n=this.field,r=e,i=t.field(n),o=r.field(n),null!==i&&null!==o?cm(i,o):q_());switch(this.dir){case"asc":return s;case"desc":return-1*s;default:return q_()}},Pb.prototype.canonicalId=function(){return this.field.j()+this.dir.toString()},Pb.prototype.toString=function(){return this.field.j()+" ("+this.dir+")"},Pb.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Pb),Rb=(Ob.prototype.Ie=function(t){return new Ob(this.target,this.targetId,this.Te,t,this.Ee,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Ob.prototype.we=function(t,e){return new Ob(this.target,this.targetId,this.Te,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Ob.prototype.Re=function(t){return new Ob(this.target,this.targetId,this.Te,this.sequenceNumber,this.Ee,t,this.resumeToken)},Ob);function Ob(t,e,n,r,i,o,s){void 0===i&&(i=Og.min()),void 0===o&&(o=Og.min()),void 0===s&&(s=$g.ht),this.target=t,this.targetId=e,this.Te=n,this.sequenceNumber=r,this.Ee=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Pb(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.fe=t.Y()}function Db(t,e){this.position=t,this.before=e}function xb(t,e){return ub.call(this,t,"array-contains-any",e)||this}function Lb(t,e){return cb.call(this,t,"in",e)||this}function Mb(t,e){return hb.call(this,t,"array-contains",e)||this}function Fb(t,e){var n=this;return(n=lb.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Kg.Z(t.referenceValue)}),n}function Ub(t,e,n){var r=this;return(r=fb.call(this,t,e,n)||this).key=Kg.Z(n.referenceValue),r}function jb(t,e,n){var r=this;return(r=pb.call(this)||this).field=t,r.op=e,r.value=n,r}function Vb(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Lt=n,this.filters=r,this.limit=i,this.Bt=o,this.startAt=s,this.endAt=a,this.qt=null,this.Ut=null,this.startAt&&this.Qt(this.startAt),this.endAt&&this.Qt(this.endAt)}function qb(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.$t=null}function Bb(){return null!==db&&db.apply(this,arguments)||this}function Wb(t,e,n){var r=this;return(r=vb.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Gb(t,e,n,r){var i=this;return(i=yb.call(this,t,e)||this).Mt=n,i.At=!!r.At,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Hb(t){switch(t){case Ig.OK:return q_(),0;case Ig.CANCELLED:case Ig.UNKNOWN:case Ig.DEADLINE_EXCEEDED:case Ig.RESOURCE_EXHAUSTED:case Ig.INTERNAL:case Ig.UNAVAILABLE:case Ig.UNAUTHENTICATED:return;case Ig.INVALID_ARGUMENT:case Ig.NOT_FOUND:case Ig.ALREADY_EXISTS:case Ig.PERMISSION_DENIED:case Ig.FAILED_PRECONDITION:case Ig.ABORTED:case Ig.OUT_OF_RANGE:case Ig.UNIMPLEMENTED:case Ig.DATA_LOSS:return 1;default:return q_(),0}}function zb(t){if(void 0===t)return j_("GRPC error has no .code"),Ig.UNKNOWN;switch(t){case sb.OK:return Ig.OK;case sb.CANCELLED:return Ig.CANCELLED;case sb.UNKNOWN:return Ig.UNKNOWN;case sb.DEADLINE_EXCEEDED:return Ig.DEADLINE_EXCEEDED;case sb.RESOURCE_EXHAUSTED:return Ig.RESOURCE_EXHAUSTED;case sb.INTERNAL:return Ig.INTERNAL;case sb.UNAVAILABLE:return Ig.UNAVAILABLE;case sb.UNAUTHENTICATED:return Ig.UNAUTHENTICATED;case sb.INVALID_ARGUMENT:return Ig.INVALID_ARGUMENT;case sb.NOT_FOUND:return Ig.NOT_FOUND;case sb.ALREADY_EXISTS:return Ig.ALREADY_EXISTS;case sb.PERMISSION_DENIED:return Ig.PERMISSION_DENIED;case sb.FAILED_PRECONDITION:return Ig.FAILED_PRECONDITION;case sb.ABORTED:return Ig.ABORTED;case sb.OUT_OF_RANGE:return Ig.OUT_OF_RANGE;case sb.UNIMPLEMENTED:return Ig.UNIMPLEMENTED;case sb.DATA_LOSS:return Ig.DATA_LOSS;default:return q_()}}(ab=sb=sb||{})[ab.OK=0]="OK",ab[ab.CANCELLED=1]="CANCELLED",ab[ab.UNKNOWN=2]="UNKNOWN",ab[ab.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ab[ab.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ab[ab.NOT_FOUND=5]="NOT_FOUND",ab[ab.ALREADY_EXISTS=6]="ALREADY_EXISTS",ab[ab.PERMISSION_DENIED=7]="PERMISSION_DENIED",ab[ab.UNAUTHENTICATED=16]="UNAUTHENTICATED",ab[ab.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ab[ab.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ab[ab.ABORTED=10]="ABORTED",ab[ab.OUT_OF_RANGE=11]="OUT_OF_RANGE",ab[ab.UNIMPLEMENTED=12]="UNIMPLEMENTED",ab[ab.INTERNAL=13]="INTERNAL",ab[ab.UNAVAILABLE=14]="UNAVAILABLE",ab[ab.DATA_LOSS=15]="DATA_LOSS";var Kb=($b.prototype.Ae=function(t,e){return new $b(this.N,this.root.Ae(t,e,this.N).me(null,null,Yb.Pe,null,null))},$b.prototype.remove=function(t){return new $b(this.N,this.root.remove(t,this.N).me(null,null,Yb.Pe,null,null))},$b.prototype.get=function(t){for(var e=this.root;!e.B();){var n=this.N(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},$b.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.B();){var r=this.N(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},$b.prototype.B=function(){return this.root.B()},Object.defineProperty($b.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),$b.prototype.Ve=function(){return this.root.Ve()},$b.prototype.ge=function(){return this.root.ge()},$b.prototype.pe=function(t){return this.root.pe(t)},$b.prototype.forEach=function(n){this.pe(function(t,e){return n(t,e),!1})},$b.prototype.toString=function(){var n=[];return this.pe(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},$b.prototype.ye=function(t){return this.root.ye(t)},$b.prototype.be=function(){return new Qb(this.root,null,this.N,!1)},$b.prototype.ve=function(t){return new Qb(this.root,t,this.N,!1)},$b.prototype.Se=function(){return new Qb(this.root,null,this.N,!0)},$b.prototype.De=function(t){return new Qb(this.root,t,this.N,!0)},$b),Qb=(Jb.prototype.Ne=function(){var t=this.Fe.pop(),e={key:t.key,value:t.value};if(this.Ce)for(t=t.left;!t.B();)this.Fe.push(t),t=t.right;else for(t=t.right;!t.B();)this.Fe.push(t),t=t.left;return e},Jb.prototype.ke=function(){return 0<this.Fe.length},Jb.prototype.Me=function(){if(0===this.Fe.length)return null;var t=this.Fe[this.Fe.length-1];return{key:t.key,value:t.value}},Jb),Yb=(Xb.prototype.me=function(t,e,n,r,i){return new Xb(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Xb.prototype.B=function(){return!1},Xb.prototype.pe=function(t){return this.left.pe(t)||t(this.key,this.value)||this.right.pe(t)},Xb.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},Xb.prototype.min=function(){return this.left.B()?this:this.left.min()},Xb.prototype.Ve=function(){return this.min().key},Xb.prototype.ge=function(){return this.right.B()?this.key:this.right.ge()},Xb.prototype.Ae=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.me(null,null,null,r.left.Ae(t,e,n),null):0===i?r.me(null,e,null,null,null):r.me(null,null,null,null,r.right.Ae(t,e,n))).xe()},Xb.prototype.$e=function(){if(this.left.B())return Xb.EMPTY;var t=this;return t.left.Oe()||t.left.left.Oe()||(t=t.Le()),(t=t.me(null,null,null,t.left.$e(),null)).xe()},Xb.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.B()||r.left.Oe()||r.left.left.Oe()||(r=r.Le()),r=r.me(null,null,null,r.left.remove(t,e),null);else{if(r.left.Oe()&&(r=r.Be()),r.right.B()||r.right.Oe()||r.right.left.Oe()||(r=r.qe()),0===e(t,r.key)){if(r.right.B())return Xb.EMPTY;n=r.right.min(),r=r.me(n.key,n.value,null,null,r.right.$e())}r=r.me(null,null,null,null,r.right.remove(t,e))}return r.xe()},Xb.prototype.Oe=function(){return this.color},Xb.prototype.xe=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.Ue()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Be()),t.left.Oe()&&t.right.Oe()&&(t=t.Qe()),t},Xb.prototype.Le=function(){var t=this.Qe();return t.right.left.Oe()&&(t=(t=(t=t.me(null,null,null,null,t.right.Be())).Ue()).Qe()),t},Xb.prototype.qe=function(){var t=this.Qe();return t.left.left.Oe()&&(t=(t=t.Be()).Qe()),t},Xb.prototype.Ue=function(){var t=this.me(null,null,Xb.RED,null,this.right.left);return this.right.me(null,null,this.color,t,null)},Xb.prototype.Be=function(){var t=this.me(null,null,Xb.RED,this.left.right,null);return this.left.me(null,null,this.color,null,t)},Xb.prototype.Qe=function(){var t=this.left.me(null,null,!this.left.color,null,null),e=this.right.me(null,null,!this.right.color,null,null);return this.me(null,null,!this.color,t,e)},Xb.prototype.We=function(){var t=this.je();return Math.pow(2,t)<=this.size+1},Xb.prototype.je=function(){if(this.Oe()&&this.left.Oe())throw q_();if(this.right.Oe())throw q_();var t=this.left.je();if(t!==this.right.je())throw q_();return t+(this.Oe()?0:1)},Xb);function Xb(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Xb.RED,this.left=null!=r?r:Xb.EMPTY,this.right=null!=i?i:Xb.EMPTY,this.size=this.left.size+1+this.right.size}function Jb(t,e,n,r){this.Ce=r,this.Fe=[];for(var i=1;!t.B();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Ce?t.left:t.right;else{if(0===i){this.Fe.push(t);break}this.Fe.push(t),t=this.Ce?t.right:t.left}}function $b(t,e){this.N=t,this.root=e||Yb.EMPTY}function Zb(){this.size=0}Yb.EMPTY=null,Yb.RED=!0,Yb.Pe=!1,Yb.EMPTY=(Object.defineProperty(Zb.prototype,"key",{get:function(){throw q_()},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"value",{get:function(){throw q_()},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"color",{get:function(){throw q_()},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"left",{get:function(){throw q_()},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"right",{get:function(){throw q_()},enumerable:!0,configurable:!0}),Zb.prototype.me=function(t,e,n,r,i){return this},Zb.prototype.Ae=function(t,e,n){return new Yb(t,e)},Zb.prototype.remove=function(t,e){return this},Zb.prototype.B=function(){return!0},Zb.prototype.pe=function(t){return!1},Zb.prototype.ye=function(t){return!1},Zb.prototype.Ve=function(){return null},Zb.prototype.ge=function(){return null},Zb.prototype.Oe=function(){return!1},Zb.prototype.We=function(){return!0},Zb.prototype.je=function(){return 0},new Zb);var t_=(i_.prototype.has=function(t){return null!==this.data.get(t)},i_.prototype.first=function(){return this.data.Ve()},i_.prototype.last=function(){return this.data.ge()},Object.defineProperty(i_.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),i_.prototype.indexOf=function(t){return this.data.indexOf(t)},i_.prototype.forEach=function(n){this.data.pe(function(t,e){return n(t),!1})},i_.prototype.Ke=function(t,e){for(var n=this.data.ve(t[0]);n.ke();){var r=n.Ne();if(0<=this.N(r.key,t[1]))return;e(r.key)}},i_.prototype.Ge=function(t,e){for(var n=void 0!==e?this.data.ve(e):this.data.be();n.ke();)if(!t(n.Ne().key))return},i_.prototype.ze=function(t){var e=this.data.ve(t);return e.ke()?e.Ne().key:null},i_.prototype.be=function(){return new e_(this.data.be())},i_.prototype.ve=function(t){return new e_(this.data.ve(t))},i_.prototype.add=function(t){return this.me(this.data.remove(t).Ae(t,!0))},i_.prototype.delete=function(t){return this.has(t)?this.me(this.data.remove(t)):this},i_.prototype.B=function(){return this.data.B()},i_.prototype.He=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},i_.prototype.isEqual=function(t){if(!(t instanceof i_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.be(),n=t.data.be();e.ke();){var r=e.Ne().key,i=n.Ne().key;if(0!==this.N(r,i))return!1}return!0},i_.prototype.W=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},i_.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},i_.prototype.me=function(t){var e=new i_(this.N);return e.data=t,e},i_),e_=(r_.prototype.Ne=function(){return this.Ye.Ne().key},r_.prototype.ke=function(){return this.Ye.ke()},r_),n_=new Kb(Kg.N);function r_(t){this.Ye=t}function i_(t){this.N=t,this.data=new Kb(this.N)}var o_=new Kb(Kg.N);var s_=new Kb(Kg.N),a_=new t_(Kg.N);function u_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=a_,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var c_=new t_(H_);function h_(t,e,n,r){this.ws=t,this.removedTargetIds=e,this.key=n,this.Rs=r}function l_(t,e){this.targetId=t,this.As=e}function f_(t,e,n,r){void 0===n&&(n=$g.ht),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var p_=(C_.Ze=function(t){return new C_(t.N)},C_.prototype.has=function(t){return null!=this.Je.get(t)},C_.prototype.get=function(t){return this.Je.get(t)},C_.prototype.first=function(){return this.Xe.Ve()},C_.prototype.last=function(){return this.Xe.ge()},C_.prototype.B=function(){return this.Xe.B()},C_.prototype.indexOf=function(t){var e=this.Je.get(t);return e?this.Xe.indexOf(e):-1},Object.defineProperty(C_.prototype,"size",{get:function(){return this.Xe.size},enumerable:!0,configurable:!0}),C_.prototype.forEach=function(n){this.Xe.pe(function(t,e){return n(t),!1})},C_.prototype.add=function(t){var e=this.delete(t.key);return e.me(e.Je.Ae(t.key,t),e.Xe.Ae(t,null))},C_.prototype.delete=function(t){var e=this.get(t);return e?this.me(this.Je.remove(t),this.Xe.remove(e)):this},C_.prototype.isEqual=function(t){if(!(t instanceof C_))return!1;if(this.size!==t.size)return!1;for(var e=this.Xe.be(),n=t.Xe.be();e.ke();){var r=e.Ne().key,i=n.Ne().key;if(!r.isEqual(i))return!1}return!0},C_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},C_.prototype.me=function(t,e){var n=new C_;return n.N=this.N,n.Je=t,n.Xe=e,n},C_),d_=(S_.prototype.track=function(t){var e=t.doc.key,n=this.ts.get(e);!n||0!==t.type&&3===n.type?this.ts=this.ts.Ae(e,t):3===t.type&&1!==n.type?this.ts=this.ts.Ae(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ts=this.ts.Ae(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ts=this.ts.remove(e):1===t.type&&2===n.type?this.ts=this.ts.Ae(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ts=this.ts.Ae(e,{type:2,doc:t.doc}):q_()},S_.prototype.es=function(){var n=[];return this.ts.pe(function(t,e){n.push(e)}),n},S_),v_=(I_.os=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new I_(t,e,p_.Ze(e),i,n,r,!0,!1)},Object.defineProperty(I_.prototype,"hasPendingWrites",{get:function(){return!this.ns.B()},enumerable:!0,configurable:!0}),I_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.rs===t.rs&&this.ns.isEqual(t.ns)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.ss.isEqual(t.ss)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},I_),y_=(T_.ls=function(t,e){var n=new Map;return n.set(t,g_.ds(t,e)),new T_(Og.min(),n,c_,n_,u_())},T_),g_=(E_.ds=function(t,e){return new E_($g.ht,e,u_(),u_(),u_())},E_),m_=(Object.defineProperty(w_.prototype,"fs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(w_.prototype,"resumeToken",{get:function(){return this.Vs},enumerable:!0,configurable:!0}),Object.defineProperty(w_.prototype,"ys",{get:function(){return 0!==this.ms},enumerable:!0,configurable:!0}),Object.defineProperty(w_.prototype,"bs",{get:function(){return this.ps},enumerable:!0,configurable:!0}),w_.prototype.vs=function(t){0<t.rt()&&(this.ps=!0,this.Vs=t)},w_.prototype.Ss=function(){var n=u_(),r=u_(),i=u_();return this.Ps.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:q_()}}),new g_(this.Vs,this.gs,n,r,i)},w_.prototype.Ds=function(){this.ps=!1,this.Ps=A_()},w_.prototype.Cs=function(t,e){this.ps=!0,this.Ps=this.Ps.Ae(t,e)},w_.prototype.Fs=function(t){this.ps=!0,this.Ps=this.Ps.remove(t)},w_.prototype.Ns=function(){this.ms+=1},w_.prototype.ks=function(){--this.ms},w_.prototype.Ms=function(){this.ps=!0,this.gs=!0},w_),b_=(__.prototype.qs=function(t){for(var e=0,n=t.ws;e<n.length;e++){var r=n[e];t.Rs instanceof gb?this.Us(r,t.Rs):t.Rs instanceof mb&&this.Qs(r,t.key,t.Rs)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Qs(s,t.key,t.Rs)}},__.prototype.Ws=function(n){var r=this;this.js(n,function(t){var e=r.Ks(t);switch(n.state){case 0:r.Gs(t)&&e.vs(n.resumeToken);break;case 1:e.ks(),e.ys||e.Ds(),e.vs(n.resumeToken);break;case 2:e.ks(),e.ys||r.removeTarget(t);break;case 3:r.Gs(t)&&(e.Ms(),e.vs(n.resumeToken));break;case 4:r.Gs(t)&&(r.zs(t),e.vs(n.resumeToken));break;default:q_()}})},__.prototype.js=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.$s.forEach(function(t,e){r.Gs(e)&&n(e)})},__.prototype.Hs=function(t){var e,n,r=t.targetId,i=t.As.count,o=this.Ys(r);o&&((e=o.target).Ot()?0===i?(n=new Kg(e.path),this.Qs(r,n,new mb(n,Og.min()))):B_(1===i):this.Js(r)!==i&&(this.zs(r),this.Bs=this.Bs.add(r)))},__.prototype.Xs=function(i){var o=this,s=new Map;this.$s.forEach(function(t,e){var n,r=o.Ys(e);r&&(t.fs&&r.target.Ot()&&(n=new Kg(r.target.path),null!==o.Os.get(n)||o.Zs(e,n)||o.Qs(e,n,new mb(n,i))),t.bs&&(s.set(e,t.Ss()),t.Ds()))});var r=u_();this.Ls.forEach(function(t,e){var n=!0;e.Ge(function(t){var e=o.Ys(t);return!e||2===e.Te||(n=!1)}),n&&(r=r.add(t))});var t=new y_(i,s,this.Bs,this.Os,r);return this.Os=n_,this.Ls=N_(),this.Bs=new t_(H_),t},__.prototype.Us=function(t,e){var n;this.Gs(t)&&(n=this.Zs(t,e.key)?2:0,this.Ks(t).Cs(e.key,n),this.Os=this.Os.Ae(e.key,e),this.Ls=this.Ls.Ae(e.key,this.ti(e.key).add(t)))},__.prototype.Qs=function(t,e,n){var r;this.Gs(t)&&(r=this.Ks(t),this.Zs(t,e)?r.Cs(e,1):r.Fs(e),this.Ls=this.Ls.Ae(e,this.ti(e).delete(t)),n&&(this.Os=this.Os.Ae(e,n)))},__.prototype.removeTarget=function(t){this.$s.delete(t)},__.prototype.Js=function(t){var e=this.Ks(t).Ss();return this.xs.ei(t).size+e.Ts.size-e.Is.size},__.prototype.Ns=function(t){this.Ks(t).Ns()},__.prototype.Ks=function(t){var e=this.$s.get(t);return e||(e=new m_,this.$s.set(t,e)),e},__.prototype.ti=function(t){var e=this.Ls.get(t);return e||(e=new t_(H_),this.Ls=this.Ls.Ae(t,e)),e},__.prototype.Gs=function(t){var e=null!==this.Ys(t);return e||U_("WatchChangeAggregator","Detected inactive target",t),e},__.prototype.Ys=function(t){var e=this.$s.get(t);return e&&e.ys?null:this.xs.si(t)},__.prototype.zs=function(e){var n=this;this.$s.set(e,new m_),this.xs.ei(e).forEach(function(t){n.Qs(e,t,null)})},__.prototype.Zs=function(t,e){return this.xs.ei(t).has(e)},__);function __(t){this.xs=t,this.$s=new Map,this.Os=n_,this.Ls=N_(),this.Bs=new t_(H_)}function w_(){this.ms=0,this.Ps=A_(),this.Vs=$g.ht,this.gs=!1,this.ps=!0}function E_(t,e,n,r,i){this.resumeToken=t,this.fs=e,this.Ts=n,this.Es=r,this.Is=i}function T_(t,e,n,r,i){this.Ee=t,this.as=e,this.us=n,this.cs=r,this._s=i}function I_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.ss=n,this.docChanges=r,this.ns=i,this.fromCache=o,this.rs=s,this.hs=a}function S_(){this.ts=new Kb(Kg.N)}function C_(n){this.N=n?function(t,e){return n(t,e)||Kg.N(t.key,e.key)}:function(t,e){return Kg.N(t.key,e.key)},this.Je=o_,this.Xe=new Kb(this.N)}function N_(){return new Kb(Kg.N)}function A_(){return new Kb(Kg.N)}var k_={asc:"ASCENDING",desc:"DESCENDING"},R_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O_=(P_.prototype.ni=function(t){var e=void 0===t.code?Ig.UNKNOWN:zb(t.code);return new Sg(e,t.message||"")},P_.prototype.ri=function(t){return this.options.hi||tm(t)?t:{value:t}},P_.prototype.oi=function(t){var e;return tm(e="object"==typeof t?t.value:t)?null:e},P_.prototype._t=function(t){return{integerValue:""+t}},P_.prototype.lt=function(t){if(this.options.hi){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:em(t)?"-0":t}},P_.prototype.ai=function(t){return nm(t)?this._t(t):this.lt(t)},P_.prototype.C=function(t){return this.options.hi?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},P_.prototype.v=function(t){var e=fm(t);return new Rg(e.seconds,e.nanos)},P_.prototype.ui=function(t){return this.options.hi?t.toBase64():t.toUint8Array()},P_.prototype.ci=function(t){return this.options.hi?(B_(void 0===t||"string"==typeof t),$g.fromBase64String(t||"")):(B_(void 0===t||t instanceof Uint8Array),$g.fromUint8Array(t||new Uint8Array))},P_.prototype.toVersion=function(t){return this.C(t.C())},P_.prototype.fromVersion=function(t){return B_(!!t),Og.v(this.v(t))},P_.prototype._i=function(t,e){return this.li(e||this.ii).child("documents").child(t).j()},P_.prototype.di=function(t){var e=Dg.K(t);return B_(D_(e)),e},P_.prototype.fi=function(t){return this._i(t.path)},P_.prototype.Z=function(t){var e=this.di(t);return B_(e.get(1)===this.ii.projectId),B_(!e.get(3)&&!this.ii.database||e.get(3)===this.ii.database),new Kg(this.Ti(e))},P_.prototype.Ei=function(t){return this._i(t)},P_.prototype.Ii=function(t){var e=this.di(t);return 4===e.length?Dg.G:this.Ti(e)},Object.defineProperty(P_.prototype,"wi",{get:function(){return new Dg(["projects",this.ii.projectId,"databases",this.ii.database]).j()},enumerable:!0,configurable:!0}),P_.prototype.li=function(t){return new Dg(["projects",t.projectId,"databases",t.database])},P_.prototype.Ti=function(t){return B_(4<t.length&&"documents"===t.get(4)),t.M(5)},P_.prototype.Ri=function(t,e){return{name:this.fi(t),fields:e.proto.mapValue.fields}},P_.prototype.Ai=function(t){return{name:this.fi(t.key),fields:t.xt().mapValue.fields,updateTime:this.C(t.version.C())}},P_.prototype.mi=function(t,e){var n=this.Z(t.name),r=this.fromVersion(t.updateTime),i=new Hm({mapValue:{fields:t.fields}});return new gb(n,r,i,{hasCommittedMutations:!!e})},P_.prototype.Pi=function(t){B_(!!t.found),t.found.name,t.found.updateTime;var e=this.Z(t.found.name),n=this.fromVersion(t.found.updateTime),r=new Hm({mapValue:{fields:t.found.fields}});return new gb(e,n,r,{})},P_.prototype.Vi=function(t){B_(!!t.missing),B_(!!t.readTime);var e=this.Z(t.missing),n=this.fromVersion(t.readTime);return new mb(e,n)},P_.prototype.gi=function(t){return"found"in t?this.Pi(t):"missing"in t?this.Vi(t):q_()},P_.prototype.pi=function(t){if("targetChange"in t){t.targetChange;var e=this.yi(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],r=this.ci(t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&this.ni(i),s=new f_(e,n,r,o||null)}else if("documentChange"in t){t.documentChange;var a=t.documentChange;a.document,a.document.name,a.document.updateTime;var u=this.Z(a.document.name),c=this.fromVersion(a.document.updateTime),h=new Hm({mapValue:{fields:a.document.fields}}),l=new gb(u,c,h,{}),f=a.targetIds||[],p=a.removedTargetIds||[];s=new h_(f,p,l.key,l)}else if("documentDelete"in t){t.documentDelete;var d=t.documentDelete;d.document;var v=this.Z(d.document),y=d.readTime?this.fromVersion(d.readTime):Og.min(),g=new mb(v,y),m=d.removedTargetIds||[];s=new h_([],m,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=this.Z(b.document),w=b.removedTargetIds||[];s=new h_([],w,_,null)}else{if(!("filter"in t))return q_();t.filter;var E=t.filter;E.targetId;var T=E.count||0,I=new ob(T),S=E.targetId;s=new l_(S,I)}return s},P_.prototype.yi=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:q_()},P_.prototype.bi=function(t){if(!("targetChange"in t))return Og.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Og.min():this.fromVersion(e.readTime)},P_.prototype.vi=function(t){var e,n=this;if(t instanceof Vm)e={update:this.Ri(t.key,t.value)};else if(t instanceof Wm)e={delete:this.fi(t.key)};else if(t instanceof qm)e={update:this.Ri(t.key,t.data),updateMask:this.Si(t.Vt)};else if(t instanceof Bm)e={transform:{document:this.fi(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.Di(t)})}};else{if(!(t instanceof Gm))return q_();e={verify:this.fi(t.key)}}return t.Rt.Tt||(e.currentDocument=this.Ci(t.Rt)),e},P_.prototype.Fi=function(t){var e=this,n=t.currentDocument?this.Ni(t.currentDocument):Um.ft();if(t.update){t.update.name;var r=this.Z(t.update.name),i=new Hm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.ki(t.updateMask);return new qm(r,i,o,n)}return new Vm(r,i,n)}if(t.delete){var s=this.Z(t.delete);return new Wm(s,n)}if(t.transform){var a=this.Z(t.transform.document),u=t.transform.fieldTransforms.map(function(t){return e.Mi(t)});return B_(!0===n.exists),new Bm(a,u)}if(t.verify){var c=this.Z(t.verify);return new Gm(c,n)}return q_()},P_.prototype.Ci=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:q_()},P_.prototype.Ni=function(t){return void 0!==t.updateTime?Um.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Um.exists(t.exists):Um.ft()},P_.prototype.xi=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(Og.min())&&(n=this.fromVersion(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new Rm(n,r)},P_.prototype.$i=function(t,e){var n=this;return t&&0<t.length?(B_(void 0!==e),t.map(function(t){return n.xi(t,e)})):[]},P_.prototype.Di=function(t){var e=t.transform;if(e instanceof wm)return{fieldPath:t.field.j(),setToServerValue:"REQUEST_TIME"};if(e instanceof Tm)return{fieldPath:t.field.j(),appendMissingElements:{values:e.elements}};if(e instanceof Im)return{fieldPath:t.field.j(),removeAllFromArray:{values:e.elements}};if(e instanceof Sm)return{fieldPath:t.field.j(),increment:e.ct};throw q_()},P_.prototype.Mi=function(t){var e,n,r=null;"setToServerValue"in t?(B_("REQUEST_TIME"===t.setToServerValue),r=wm.instance):"appendMissingElements"in t?(e=t.appendMissingElements.values||[],r=new Tm(e)):"removeAllFromArray"in t?(n=t.removeAllFromArray.values||[],r=new Im(n)):"increment"in t?r=new Sm(this,t.increment):q_();var i=Hg.X(t.fieldPath);return new Fm(i,r)},P_.prototype.Oi=function(t){return{documents:[this.Ei(t.path)]}},P_.prototype.Li=function(t){B_(1===t.documents.length);var e=t.documents[0];return wb.Wt(this.Ii(e)).ee()},P_.prototype.Bi=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Ei(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Ei(n.$()),e.structuredQuery.from=[{collectionId:n.L()}]);var r=this.qi(t.filters);r&&(e.structuredQuery.where=r);var i=this.Ui(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ri(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Qi(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Qi(t.endAt)),e},P_.prototype.Wi=function(t){var e,n=this.Ii(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(B_(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=this.ji(r.where));var a=[];r.orderBy&&(a=this.Ki(r.orderBy));var u=null;r.limit&&(u=this.oi(r.limit));var c=null;r.startAt&&(c=this.Gi(r.startAt));var h=null;return r.endAt&&(h=this.Gi(r.endAt)),new wb(n,o,a,s,u,"F",c,h).ee()},P_.prototype.zi=function(t){var e=this.Hi(t.Te);return null==e?null:{"goog-listen-tags":e}},P_.prototype.Hi=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return q_()}},P_.prototype.ee=function(t){var e,n=t.target;return(e=n.Ot()?{documents:this.Oi(n)}:{query:this.Bi(n)}).targetId=t.targetId,0<t.resumeToken.rt()&&(e.resumeToken=this.ui(t.resumeToken)),e},P_.prototype.qi=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Eb?e.Yi(t):q_()});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},P_.prototype.ji=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Ji(t)]:void 0!==t.fieldFilter?[this.Xi(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.ji(t)}).reduce(function(t,e){return t.concat(e)}):q_():[]},P_.prototype.Ui=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.Zi(t)})},P_.prototype.Ki=function(t){var e=this;return t.map(function(t){return e.tn(t)})},P_.prototype.Qi=function(t){return{before:t.before,values:t.position}},P_.prototype.Gi=function(t){var e=!!t.before,n=t.values||[];return new Ab(n,e)},P_.prototype.en=function(t){return k_[t]},P_.prototype.sn=function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}},P_.prototype.nn=function(t){return R_[t]},P_.prototype.rn=function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return q_()}},P_.prototype.hn=function(t){return{fieldPath:t.j()}},P_.prototype.on=function(t){return Hg.X(t.fieldPath)},P_.prototype.Zi=function(t){return{field:this.hn(t.field),direction:this.en(t.dir)}},P_.prototype.tn=function(t){return new kb(this.on(t.field),this.sn(t.direction))},P_.prototype.Xi=function(t){return Eb.create(this.on(t.fieldFilter.field),this.rn(t.fieldFilter.op),t.fieldFilter.value)},P_.prototype.Yi=function(t){if("=="===t.op){if(bm(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NAN"}};if(mm(t.value))return{unaryFilter:{field:this.hn(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.hn(t.field),op:this.nn(t.op),value:t.value}}},P_.prototype.Ji=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.on(t.unaryFilter.field);return Eb.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=this.on(t.unaryFilter.field);return Eb.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return q_()}},P_.prototype.Si=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.j())}),{fieldPaths:e}},P_.prototype.ki=function(t){var e=t.fieldPaths||[];return new Mm(e.map(function(t){return Hg.X(t)}))},P_);function P_(t,e){this.ii=t,this.options=e}function D_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var x_=(M_.an=function(t){M_.platform&&q_(),M_.platform=t},M_.nt=function(){return M_.platform||q_(),M_.platform},M_),L_=new tu("@firebase/firestore");function M_(){}function F_(){return L_.logLevel}function U_(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];L_.logLevel<=za.DEBUG&&(e=n.map(V_),L_.debug.apply(L_,Js(["Firestore ("+mg+"): "+t],e)))}function j_(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];L_.logLevel<=za.ERROR&&(e=n.map(V_),L_.error.apply(L_,Js(["Firestore ("+mg+"): "+t],e)))}function V_(t){if("string"==typeof t)return t;var e=x_.nt();try{return e.un(t)}catch(e){return t}}function q_(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+mg+") INTERNAL ASSERTION FAILED: "+t;throw j_(e),new Error(e)}function B_(t){t||q_()}var W_=(G_.cn=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=x_.nt()._n(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},G_);function G_(){}function H_(t,e){return t<e?-1:e<t?1:0}function z_(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function K_(t){return t+"\0"}function Q_(t,e,n,r,i){this.ii=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var Y_=(Object.defineProperty(vw.prototype,"ln",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),vw.prototype.isEqual=function(t){return t instanceof vw&&t.projectId===this.projectId&&t.database===this.database},vw.prototype.S=function(t){return H_(this.projectId,t.projectId)||H_(this.database,t.database)},vw),X_=(dw.prototype.get=function(t){var e=this.dn(t),n=this.fn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},dw.prototype.has=function(t){return void 0!==this.get(t)},dw.prototype.set=function(t,e){var n=this.dn(t),r=this.fn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.fn[n]=[[t,e]]},dw.prototype.delete=function(t){var e=this.dn(t),n=this.fn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.fn[e]:n.splice(r,1),!0;return!1},dw.prototype.forEach=function(a){Xg(this.fn,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},dw.prototype.B=function(){return Jg(this.fn)},dw),J_=(pw.prototype.at=function(t,e,n){for(var r=n.En,i=0;i<this.mutations.length;i++){var o,s=this.mutations[i];s.key.isEqual(t)&&(o=r[i],e=s.at(e,o))}return e},pw.prototype.ot=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.ot(e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.ot(e,o,this.Tn))}return e},pw.prototype.In=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ot(t.key,n.get(t.key));e&&(i=i.Ae(t.key,e))}),i},pw.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},u_())},pw.prototype.isEqual=function(t){return this.batchId===t.batchId&&z_(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&z_(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},pw),$_=(fw.from=function(t,e,n){B_(t.mutations.length===n.length);for(var r=s_,i=t.mutations,o=0;o<i.length;o++)r=r.Ae(i[o].key,n[o].version);return new fw(t,e,n,r)},fw),Z_=(lw.prototype.catch=function(t){return this.next(void 0,t)},lw.prototype.next=function(r,i){var o=this;return this.Vn&&q_(),this.Vn=!0,this.Pn?this.error?this.gn(i,this.error):this.pn(r,this.result):new lw(function(e,n){o.An=function(t){o.pn(r,t).next(e,n)},o.mn=function(t){o.gn(i,t).next(e,n)}})},lw.prototype.yn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},lw.prototype.bn=function(t){try{var e=t();return e instanceof lw?e:lw.resolve(e)}catch(t){return lw.reject(t)}},lw.prototype.pn=function(t,e){return t?this.bn(function(){return t(e)}):lw.resolve(e)},lw.prototype.gn=function(t,e){return t?this.bn(function(){return t(e)}):lw.reject(e)},lw.resolve=function(n){return new lw(function(t,e){t(n)})},lw.reject=function(n){return new lw(function(t,e){e(n)})},lw.vn=function(t){return new lw(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},lw.Sn=function(t){for(var n=lw.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?lw.resolve(t):e()})}(r[e]);return n},lw.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.vn(i)},lw),tw=(Object.defineProperty(hw.prototype,"readTime",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!0,configurable:!0}),hw.prototype.Nn=function(t,e){this.kn(),this.readTime=e,this.Dn.set(t.key,t)},hw.prototype.Mn=function(t,e){this.kn(),e&&(this.readTime=e),this.Dn.set(t,null)},hw.prototype.xn=function(t,e){this.kn();var n=this.Dn.get(e);return void 0!==n?Z_.resolve(n):this.$n(t,e)},hw.prototype.getEntries=function(t,e){return this.On(t,e)},hw.prototype.apply=function(t){return this.kn(),this.Cn=!0,this.Ln(t)},hw.prototype.kn=function(){},hw),ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nw=(cw.prototype.qn=function(t){this.Bn.push(t)},cw.prototype.Un=function(){this.Bn.forEach(function(t){return t()})},cw),rw=(uw.prototype.Kn=function(e,n){var r=this;return this.Wn.Gn(e,n).next(function(t){return r.zn(e,n,t)})},uw.prototype.zn=function(t,r,i){return this.Qn.xn(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ot(r,t);return t})},uw.prototype.Hn=function(t,e,i){var o=n_;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ot(t,e);o=o.Ae(t,e)}),o},uw.prototype.Yn=function(e,t){var n=this;return this.Qn.getEntries(e,t).next(function(t){return n.Jn(e,t)})},uw.prototype.Jn=function(r,i){var o=this;return this.Wn.Xn(r,i).next(function(t){var e=o.Hn(r,i,t),n=n_;return e.forEach(function(t,e){e=e||new mb(t,Og.min()),n=n.Ae(t,e)}),n})},uw.prototype.Zn=function(t,e,n){return e.Ot()?this.tr(t,e.path):e._e()?this.er(t,e,n):this.sr(t,e,n)},uw.prototype.tr=function(t,e){return this.Kn(t,new Kg(e)).next(function(t){var e=o_;return t instanceof gb&&(e=e.Ae(t.key,t)),e})},uw.prototype.er=function(n,r,i){var o=this,s=r.collectionGroup,a=o_;return this.jn.ir(n,s).next(function(t){return Z_.forEach(t,function(t){var e=r.Zt(t.child(s));return o.sr(n,e,i).next(function(t){t.forEach(function(t,e){a=a.Ae(t,e)})})}).next(function(){return a})})},uw.prototype.sr=function(e,n,t){var h,l,r=this;return this.Qn.Zn(e,n,t).next(function(t){return h=t,r.Wn.nr(e,n)}).next(function(t){return l=t,r.rr(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.ot(u,u,r.Tn);h=c instanceof gb?h.Ae(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},uw.prototype.rr=function(t,e,n){for(var r=u_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof qm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Qn.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof gb&&(c=c.Ae(t,e))}),c})},uw),iw=(aw.ar=function(t,e){for(var n=u_(),r=u_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new aw(t,e.fromCache,n,r)},aw),ow=(sw.prototype.cr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},sw.prototype.next=function(){var t=++this.previousValue;return this._r&&this._r(t),t},sw);function sw(t,e){var n=this;this.previousValue=t,e&&(e.ur=function(t){return n.cr(t)},this._r=function(t){return e.lr(t)})}function aw(t,e,n,r){this.targetId=t,this.fromCache=e,this.hr=n,this.or=r}function uw(t,e,n){this.Qn=t,this.Wn=e,this.jn=n}function cw(){this.Bn=[]}function hw(){this.Dn=new X_(function(t){return t.toString()}),this.Cn=!1}function lw(t){var e=this;this.An=null,this.mn=null,this.result=void 0,this.error=void 0,this.Pn=!1,this.Vn=!1,t(function(t){e.Pn=!0,e.result=t,e.An&&e.An(t)},function(t){e.Pn=!0,e.error=t,e.mn&&e.mn(t)})}function fw(t,e,n,r){this.batch=t,this.wn=e,this.En=n,this.Rn=r}function pw(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}function dw(t){this.dn=t,this.fn={}}function vw(t,e){this.projectId=t,this.database=e||"(default)"}ow.dr=-1;function yw(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var gw=(mw.prototype.reset=function(){this.Ar=0},mw.prototype.Vr=function(){this.Ar=this.Rr},mw.prototype.gr=function(t){var e=this;this.cancel();var n=Math.floor(this.Ar+this.pr()),r=Math.max(0,Date.now()-this.Pr),i=Math.max(0,n-r);0<i&&U_("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ar+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mr=this.Tr.yr(this.Er,i,function(){return e.Pr=Date.now(),t()}),this.Ar*=this.wr,this.Ar<this.Ir&&(this.Ar=this.Ir),this.Ar>this.Rr&&(this.Ar=this.Rr)},mw.prototype.br=function(){null!==this.mr&&(this.mr.vr(),this.mr=null)},mw.prototype.cancel=function(){null!==this.mr&&(this.mr.cancel(),this.mr=null)},mw.prototype.pr=function(){return(Math.random()-.5)*this.Ar},mw);function mw(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Tr=t,this.Er=e,this.Ir=n,this.wr=r,this.Rr=i,this.Ar=0,this.mr=null,this.Pr=Date.now(),this.reset()}function bw(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=_w(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return _w(e)}function _w(t){return t+""}function ww(t){var e=t.length;if(B_(2<=e),2===e)return B_(""===t.charAt(0)&&""===t.charAt(1)),Dg.G;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&q_(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:q_()}o=s+2}return new Dg(r)}var Ew=(Nw.prototype.Dr=function(t,e){return this.Sr.add(e),Z_.resolve()},Nw.prototype.ir=function(t,e){return Z_.resolve(this.Sr.getEntries(e))},Nw),Tw=(Cw.prototype.add=function(t){var e=t.L(),n=t.$(),r=this.index[e]||new t_(Dg.N),i=!r.has(n);return this.index[e]=r.add(n),i},Cw.prototype.has=function(t){var e=t.L(),n=t.$(),r=this.index[e];return r&&r.has(n)},Cw.prototype.getEntries=function(t){return(this.index[t]||new t_(Dg.N)).W()},Cw),Iw=(Sw.prototype.Dr=function(t,e){var n=this;if(this.Cr.has(e))return Z_.resolve();var r=e.L(),i=e.$();t.qn(function(){n.Cr.add(e)});var o={collectionId:r,parent:bw(i)};return Aw(t).put(o)},Sw.prototype.ir=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[K_(i),""],!1,!0);return Aw(t).Fr(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(ww(r.parent))}return o})},Sw);function Sw(){this.Cr=new Tw}function Cw(){this.index={}}function Nw(){this.Sr=new Tw}function Aw(t){return Qw.Nr(t,CE.store)}var kw,Rw=(Ow.prototype.Nn=function(t,e,n){return Dw(t).put(xw(e),n)},Ow.prototype.Mn=function(t,e){var n=Dw(t),r=xw(e);return n.delete(r)},Ow.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.kr(e,t)})},Ow.prototype.xn=function(t,e){var n=this;return Dw(t).get(xw(e)).next(function(t){return n.Mr(t)})},Ow.prototype.xr=function(t,e){var n=this;return Dw(t).get(xw(e)).next(function(t){var e=n.Mr(t);return e?{$r:e,size:Lw(t)}:null})},Ow.prototype.getEntries=function(t,e){var r=this,i=n_;return this.Or(t,e,function(t,e){var n=r.Mr(e);i=i.Ae(t,n)}).next(function(){return i})},Ow.prototype.Lr=function(t,e){var r=this,i=n_,o=new Kb(Kg.N);return this.Or(t,e,function(t,e){var n=r.Mr(e);o=n?(i=i.Ae(t,n),o.Ae(t,Lw(e))):(i=i.Ae(t,null),o.Ae(t,0))}).next(function(){return{Br:i,qr:o}})},Ow.prototype.Or=function(t,e,i){if(e.B())return Z_.resolve();var n=IDBKeyRange.bound(e.first().path.W(),e.last().path.W()),o=e.be(),s=o.Ne();return Dw(t).Ur({range:n},function(t,e,n){for(var r=Kg.st(t);s&&Kg.N(s,r)<0;)i(s,null),s=o.Ne();s&&s.isEqual(r)&&(i(s,e),s=o.ke()?o.Ne():null),s?n.Qr(s.path.W()):n.done()}).next(function(){for(;s;)i(s,null),s=o.ke()?o.Ne():null})},Ow.prototype.Zn=function(t,i,e){var n,r,o,s=this,a=o_,u=i.path.length+1,c={};return e.isEqual(Og.min())?(n=i.path.W(),c.range=IDBKeyRange.lowerBound(n)):(r=i.path.W(),o=this.serializer.Wr(e),c.range=IDBKeyRange.lowerBound([r,o],!0),c.index=wE.collectionReadTimeIndex),Dw(t).Ur(c,function(t,e,n){var r;t.length===u&&(r=s.serializer.jr(e),i.path.q(r.key.path)?r instanceof gb&&i.matches(r)&&(a=a.Ae(r.key,r)):n.done())}).next(function(){return a})},Ow.prototype.Kr=function(t,e){var r=this,i=n_,o=this.serializer.Wr(e),n=Dw(t),s=IDBKeyRange.lowerBound(o,!0);return n.Ur({index:wE.readTimeIndex,range:s},function(t,e){var n=r.serializer.jr(e);i=i.Ae(n.key,n),o=e.readTime}).next(function(){return{Gr:i,readTime:r.serializer.zr(o)}})},Ow.prototype.Hr=function(t){var r=this,e=Dw(t),i=Og.min();return e.Ur({index:wE.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(i=r.serializer.zr(e.readTime)),n.done()}).next(function(){return i})},Ow.prototype.Yr=function(t){return new Ow.Jr(this,!!t&&t.Xr)},Ow.prototype.Zr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Ow.prototype.getMetadata=function(t){return Pw(t).get(EE.key).next(function(t){return B_(!!t),t})},Ow.prototype.kr=function(t,e){return Pw(t).put(EE.key,e)},Ow.prototype.Mr=function(t){if(t){var e=this.serializer.jr(t);return e instanceof mb&&e.version.isEqual(Og.min())?null:e}return null},Ow);function Ow(t,e){this.serializer=t,this.jn=e}function Pw(t){return Qw.Nr(t,EE.store)}function Dw(t){return Qw.Nr(t,wE.store)}function xw(t){return t.path.W()}function Lw(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw q_();e=t.noDocument}return JSON.stringify(e).length}function Mw(t,e){var n=this;return(n=kw.call(this)||this).th=t,n.Xr=e,n.eh=new X_(function(t){return t.toString()}),n}Rw.Jr=(Gs(Mw,kw=tw),Mw.prototype.Ln=function(s){var a=this,u=[],c=0,h=new t_(function(t,e){return H_(t.j(),e.j())});return this.Dn.forEach(function(t,e){var n,r,i,o=a.eh.get(t);e?(n=a.th.serializer.sh(e,a.readTime),h=h.add(t.path.$()),r=Lw(n),c+=r-o,u.push(a.th.Nn(s,t,n))):(c-=o,a.Xr?(i=a.th.serializer.sh(new mb(t,Og.min()),a.readTime),u.push(a.th.Nn(s,t,i))):u.push(a.th.Mn(s,t)))}),h.forEach(function(t){u.push(a.th.jn.Dr(s,t))}),u.push(this.th.updateMetadata(s,c)),Z_.vn(u)},Mw.prototype.$n=function(t,e){var n=this;return this.th.xr(t,e).next(function(t){return null===t?(n.eh.set(e,0),null):(n.eh.set(e,t.size),t.$r)})},Mw.prototype.On=function(t,e){var n=this;return this.th.Lr(t,e).next(function(t){var e=t.Br;return t.qr.forEach(function(t,e){n.eh.set(t,e)}),e})},Mw);var Fw=(Vw.prototype.next=function(){return this.ih+=2,this.ih},Vw.nh=function(){return new Vw(0)},Vw.rh=function(){return new Vw(-1)},Vw),Uw=(jw.prototype.oh=function(n){var r=this;return this.ah(n).next(function(t){var e=new Fw(t.highestTargetId);return t.highestTargetId=e.next(),r.uh(n,t).next(function(){return t.highestTargetId})})},jw.prototype._h=function(t){return this.ah(t).next(function(t){return Og.v(new Rg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},jw.prototype.lh=function(t){return this.ah(t).next(function(t){return t.highestListenSequenceNumber})},jw.prototype.dh=function(e,n,r){var i=this;return this.ah(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.C()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.uh(e,t)})},jw.prototype.fh=function(e,n){var r=this;return this.Th(e,n).next(function(){return r.ah(e).next(function(t){return t.targetCount+=1,r.Eh(n,t),r.uh(e,t)})})},jw.prototype.Ih=function(t,e){return this.Th(t,e)},jw.prototype.wh=function(e,t){var n=this;return this.Rh(e,t.targetId).next(function(){return qw(e).delete(t.targetId)}).next(function(){return n.ah(e)}).next(function(t){return B_(0<t.targetCount),--t.targetCount,n.uh(e,t)})},jw.prototype.Ah=function(r,i,o){var s=this,a=0,u=[];return qw(r).Ur(function(t,e){var n=s.serializer.mh(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.wh(r,n)))}).next(function(){return Z_.vn(u)}).next(function(){return a})},jw.prototype.js=function(t,r){var i=this;return qw(t).Ur(function(t,e){var n=i.serializer.mh(e);r(n)})},jw.prototype.ah=function(t){return Bw(t).get(SE.key).next(function(t){return B_(null!==t),t})},jw.prototype.uh=function(t,e){return Bw(t).put(SE.key,e)},jw.prototype.Th=function(t,e){return qw(t).put(this.serializer.Ph(e))},jw.prototype.Eh=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},jw.prototype.Vh=function(t){return this.ah(t).next(function(t){return t.targetCount})},jw.prototype.gh=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return qw(t).Ur({range:n,index:TE.queryTargetsIndexName},function(t,e,n){var r=o.serializer.mh(e);i.isEqual(r.target)&&(s=r,n.done())}).next(function(){return s})},jw.prototype.ph=function(n,t,r){var i=this,o=[],s=Ww(n);return t.forEach(function(t){var e=bw(t.path);o.push(s.put(new IE(r,e))),o.push(i.hh.yh(n,r,t))}),Z_.vn(o)},jw.prototype.bh=function(n,t,r){var i=this,o=Ww(n);return Z_.forEach(t,function(t){var e=bw(t.path);return Z_.vn([o.delete([r,e]),i.hh.vh(n,r,t)])})},jw.prototype.Rh=function(t,e){var n=Ww(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},jw.prototype.Sh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ww(t),o=u_();return r.Ur({range:n,Dh:!0},function(t,e,n){var r=ww(t[1]),i=new Kg(r);o=o.add(i)}).next(function(){return o})},jw.prototype.Ch=function(t,e){var n=bw(e.path),r=IDBKeyRange.bound([n],[K_(n)],!1,!0),i=0;return Ww(t).Ur({index:IE.documentTargetsIndex,Dh:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},jw.prototype.si=function(t,e){var n=this;return qw(t).get(e).next(function(t){return t?n.serializer.mh(t):null})},jw);function jw(t,e){this.hh=t,this.serializer=e}function Vw(t){this.ih=t}function qw(t){return Qw.Nr(t,TE.store)}function Bw(t){return Qw.Nr(t,SE.store)}function Ww(t){return Qw.Nr(t,IE.store)}var Gw,Hw=(Jw.prototype.jr=function(t){if(t.document)return this.Fh.mi(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Kg.st(t.noDocument.path),n=this.Nh(t.noDocument.readTime);return new mb(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=Kg.st(t.unknownDocument.path),i=this.Nh(t.unknownDocument.version);return new bb(r,i)}return q_()},Jw.prototype.sh=function(t,e){var n=this.Wr(e),r=t.key.path.$().W();if(t instanceof gb){var i=this.Fh.Ai(t),o=t.hasCommittedMutations;return new wE(null,null,i,o,n,r)}if(t instanceof mb){var s=t.key.path.W(),a=this.kh(t.version),u=t.hasCommittedMutations;return new wE(null,new bE(s,a),null,u,n,r)}if(t instanceof bb){var c=t.key.path.W(),h=this.kh(t.version);return new wE(new _E(c,h),null,null,!0,n,r)}return q_()},Jw.prototype.Wr=function(t){var e=t.C();return[e.seconds,e.nanoseconds]},Jw.prototype.zr=function(t){var e=new Rg(t[0],t[1]);return Og.v(e)},Jw.prototype.kh=function(t){var e=t.C();return new fE(e.seconds,e.nanoseconds)},Jw.prototype.Nh=function(t){var e=new Rg(t.seconds,t.nanoseconds);return Og.v(e)},Jw.prototype.Mh=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.Fh.vi(t)}),i=e.mutations.map(function(t){return n.Fh.vi(t)});return new yE(t,e.batchId,e.Tn.toMillis(),r,i)},Jw.prototype.xh=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.Fh.Fi(t)}),r=t.mutations.map(function(t){return e.Fh.Fi(t)}),i=Rg.fromMillis(t.localWriteTimeMs);return new J_(t.batchId,i,n,r)},Jw.prototype.mh=function(t){var e=this.Nh(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?this.Nh(t.lastLimboFreeSnapshotVersion):Og.min(),r=void 0!==t.query.documents?this.Fh.Li(t.query):this.Fh.Wi(t.query);return new Rb(r,t.targetId,0,t.lastListenSequenceNumber,e,n,$g.fromBase64String(t.resumeToken))},Jw.prototype.Ph=function(t){var e=this.kh(t.Ee),n=this.kh(t.lastLimboFreeSnapshotVersion),r=t.target.Ot()?this.Fh.Oi(t.target):this.Fh.Bi(t.target),i=t.resumeToken.toBase64();return new TE(t.targetId,t.target.canonicalId(),e,i,t.sequenceNumber,n,r)},Jw),zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kw=(Gs(Xw,Gw=nw),Xw),Qw=(Yw.Nr=function(t,e){if(t instanceof Kw)return OE.Nr(t.$h,e);throw q_()},Yw.prototype.start=function(){var e=this;return OE.Zh(this.Hh,hE,new lE(this.serializer)).then(function(t){return e.to=t,e.eo()}).then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Sg(Ig.FAILED_PRECONDITION,zw);return e.so(),e.io(),e.no(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Jh.lh(t)})}).then(function(t){e.qh=new ow(t,e.Lh)}).then(function(){e.Uh=!0}).catch(function(t){return e.to&&e.to.close(),Promise.reject(t)})},Yw.prototype.ro=function(n){var t=this;return this.Gh=function(e){return zs(t,void 0,void 0,function(){return Ks(this,function(t){return this.ho?[2,n(e)]:[2]})})},n(this.isPrimary)},Yw.prototype.oo=function(n){var t=this;this.to.ao(function(e){return zs(t,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},Yw.prototype.uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Tr.co(function(){return zs(e,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.ho?[4,this.eo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},Yw.prototype.eo=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Zw(e).put(new AE(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n._o(e).next(function(t){t||(n.isPrimary=!1,n.Tr.lo(function(){return n.Gh(!1)}))})}).next(function(){return n.do(e)}).next(function(t){return n.isPrimary&&!t?n.fo(e).next(function(){return!1}):!!t&&n.To(e).next(function(){return!0})})}).catch(function(t){if(FE(t))return U_("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return U_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Tr.lo(function(){return n.Gh(t)}),n.isPrimary=t})},Yw.prototype._o=function(t){var e=this;return $w(t).get(pE.key).next(function(t){return Z_.resolve(e.Eo(t))})},Yw.prototype.Io=function(t){return Zw(t).delete(this.clientId)},Yw.prototype.wo=function(){return zs(this,void 0,void 0,function(){var e,n,r,i,o=this;return Ks(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Ro(this.Kh,18e5)?[3,2]:(this.Kh=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=Yw.Nr(t,AE.store);return r.Fr().next(function(t){var e=o.Ao(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return Z_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Xh)for(n=0,r=e;n<r.length;n++)i=r[n],this.Xh.removeItem(this.mo(i.clientId));t.label=2;case 2:return[2]}})})},Yw.prototype.no=function(){var t=this;this.jh=this.Tr.yr("client_metadata_refresh",4e3,function(){return t.eo().then(function(){return t.wo()}).then(function(){return t.no()})})},Yw.prototype.Eo=function(t){return!!t&&t.ownerId===this.clientId},Yw.prototype.do=function(e){var i=this;return this.Bh?Z_.resolve(!0):$w(e).get(pE.key).next(function(t){if(null!==t&&i.Ro(t.leaseTimestampMs,5e3)&&!i.Po(t.ownerId)){if(i.Eo(t)&&i.networkEnabled)return!0;if(!i.Eo(t)){if(!t.allowTabSynchronization)throw new Sg(Ig.FAILED_PRECONDITION,zw);return!1}}return!(!i.networkEnabled||!i.inForeground)||Zw(e).Fr().next(function(t){return void 0===i.Ao(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&U_("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},Yw.prototype.Vo=function(){return zs(this,void 0,void 0,function(){var e=this;return Ks(this,function(t){switch(t.label){case 0:return this.Uh=!1,this.po(),this.jh&&(this.jh.cancel(),this.jh=null),this.yo(),this.bo(),[4,this.runTransaction("shutdown","readwrite",function(t){return e.fo(t).next(function(){return e.Io(t)})}).catch(function(t){U_("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)})];case 1:return t.sent(),this.to.close(),this.vo(),[2]}})})},Yw.prototype.Ao=function(t,e){var n=this;return t.filter(function(t){return n.Ro(t.updateTimeMs,e)&&!n.Po(t.clientId)})},Yw.prototype.So=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Zw(t).Fr().next(function(t){return e.Ao(t,18e5).map(function(t){return t.clientId})})})},Yw.clearPersistence=function(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return Yw.zh()?(e=n+Yw.Yh,[4,OE.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(Yw.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),Yw.prototype.Do=function(t){return rE.Co(t,this.serializer,this.jn,this.hh)},Yw.prototype.Fo=function(){return this.Jh},Yw.prototype.No=function(){return this.Qn},Yw.prototype.ko=function(){return this.jn},Yw.prototype.runTransaction=function(e,n,r){var i=this;U_("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.to.runTransaction(t,RE,function(t){return o=new Kw(t,i.qh?i.qh.next():ow.dr),"readwrite-primary"===n?i._o(o).next(function(t){return!!t||i.do(o)}).next(function(t){if(!t)throw j_("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Tr.lo(function(){return i.Gh(!1)}),new Sg(Ig.FAILED_PRECONDITION,ew);return r(o)}).next(function(t){return i.To(o).next(function(){return t})}):i.Mo(o).next(function(){return r(o)})}).then(function(t){return o.Un(),t})},Yw.prototype.Mo=function(t){var e=this;return $w(t).get(pE.key).next(function(t){if(null!==t&&e.Ro(t.leaseTimestampMs,5e3)&&!e.Po(t.ownerId)&&!e.Eo(t)&&!(e.Bh||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Sg(Ig.FAILED_PRECONDITION,zw)})},Yw.prototype.To=function(t){var e=new pE(this.clientId,this.allowTabSynchronization,Date.now());return $w(t).put(pE.key,e)},Yw.zh=function(){return OE.zh()},Yw.xo=function(t){var e=t.ii.projectId;return t.ii.ln||(e+="."+t.ii.database),"firestore/"+t.persistenceKey+"/"+e+"/"},Yw.prototype.fo=function(t){var e=this,n=$w(t);return n.get(pE.key).next(function(t){return e.Eo(t)?(U_("IndexedDbPersistence","Releasing primary lease."),n.delete(pE.key)):Z_.resolve()})},Yw.prototype.Ro=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(j_("Detected an update time that is in the future: "+t+" > "+n),1))},Yw.prototype.so=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wh=function(){t.Tr.co(function(){return t.inForeground="visible"===t.document.visibilityState,t.eo()})},this.document.addEventListener("visibilitychange",this.Wh),this.inForeground="visible"===this.document.visibilityState)},Yw.prototype.yo=function(){this.Wh&&(this.document.removeEventListener("visibilitychange",this.Wh),this.Wh=null)},Yw.prototype.io=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Qh=function(){e.po(),e.Tr.co(function(){return e.Vo()})},this.window.addEventListener("unload",this.Qh))},Yw.prototype.bo=function(){this.Qh&&(this.window.removeEventListener("unload",this.Qh),this.Qh=null)},Yw.prototype.Po=function(t){var e;try{var n=null!==(null===(e=this.Xh)||void 0===e?void 0:e.getItem(this.mo(t)));return U_("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return j_("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},Yw.prototype.po=function(){if(this.Xh)try{this.Xh.setItem(this.mo(this.clientId),String(Date.now()))}catch(t){j_("Failed to set zombie client id.",t)}},Yw.prototype.vo=function(){if(this.Xh)try{this.Xh.removeItem(this.mo(this.clientId))}catch(t){}},Yw.prototype.mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},Yw);function Yw(t,e,n,r,i,o,s,a,u){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Tr=o,this.Lh=a,this.Bh=u,this.qh=null,this.Uh=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Qh=null,this.inForeground=!1,this.Wh=null,this.jh=null,this.Kh=Number.NEGATIVE_INFINITY,this.Gh=function(t){return Promise.resolve()},!Yw.zh())throw new Sg(Ig.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.hh=new tE(this,i),this.Hh=e+Yw.Yh,this.serializer=new Hw(s),this.document=r.document,this.Jh=new Uw(this.hh,this.serializer),this.jn=new Iw,this.Qn=new Rw(this.serializer,this.jn),this.window=r.window,r.window&&r.window.localStorage?this.Xh=r.window.localStorage:(this.Xh=null,!1===u&&j_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function Xw(t,e){var n=this;return(n=Gw.call(this)||this).$h=t,n.Oh=e,n}function Jw(t){this.Fh=t}function $w(t){return Qw.Nr(t,pE.store)}function Zw(t){return Qw.Nr(t,AE.store)}Qw.Yh="main";var tE=(eE.prototype.Oo=function(t){var n=this.Lo(t);return this.db.Fo().Vh(t).next(function(e){return n.next(function(t){return e+t})})},eE.prototype.Lo=function(t){var e=0;return this.Bo(t,function(t){e++}).next(function(){return e})},eE.prototype.js=function(t,e){return this.db.Fo().js(t,e)},eE.prototype.Bo=function(t,n){return this.qo(t,function(t,e){return n(e)})},eE.prototype.yh=function(t,e,n){return nE(t,n)},eE.prototype.vh=function(t,e,n){return nE(t,n)},eE.prototype.Ah=function(t,e,n){return this.db.Fo().Ah(t,e,n)},eE.prototype.Uo=nE,eE.prototype.Qo=function(t,e){return r=e,i=!1,cE(n=t).Wo(function(t){return oE(n,t,r).next(function(t){return t&&(i=!0),Z_.resolve(!t)})}).next(function(){return i});var n,r,i},eE.prototype.jo=function(r,i){var o=this,s=this.db.No().Yr(),a=[],u=0;return this.qo(r,function(e,t){var n;t<=i&&(n=o.Qo(r,e).next(function(t){if(!t)return u++,s.xn(r,e).next(function(){return s.Mn(e),Ww(r).delete([0,bw(e.path)])})}),a.push(n))}).next(function(){return Z_.vn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},eE.prototype.removeTarget=function(t,e){var n=e.Ie(t.Oh);return this.db.Fo().Ih(t,n)},eE.prototype.Ko=nE,eE.prototype.qo=function(t,o){var s,e=Ww(t),a=ow.dr;return e.Ur({index:IE.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==ow.dr&&o(new Kg(ww(s)),a),a=i,s=r):a=ow.dr}).next(function(){a!==ow.dr&&o(new Kg(ww(s)),a)})},eE.prototype.Go=function(t){return this.db.No().Zr(t)},eE);function eE(t,e){this.db=t,this.$o=new rT(this,e)}function nE(t,e){return Ww(t).put((n=t.Oh,new IE(0,bw(e.path),n)));var n}var rE=(iE.Co=function(t,e,n,r){return B_(""!==t.uid),new iE(t.t()?t.uid:"",e,n,r)},iE.prototype.Ho=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aE(t).Ur({index:yE.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},iE.prototype.Yo=function(c,h,l,f){var p=this,d=uE(c),v=aE(c);return v.add({}).next(function(t){B_("number"==typeof t);for(var e=new J_(t,h,l,f),n=p.serializer.Mh(p.userId,e),r=[],i=new t_(function(t,e){return H_(t.j(),e.j())}),o=0,s=f;o<s.length;o++){var a=s[o],u=gE.key(p.userId,a.key.path,t),i=i.add(a.key.path.$());r.push(v.put(n)),r.push(d.put(u,gE.PLACEHOLDER))}return i.forEach(function(t){r.push(p.jn.Dr(c,t))}),c.qn(function(){p.zo[t]=e.keys()}),Z_.vn(r).next(function(){return e})})},iE.prototype.Jo=function(t,e){var n=this;return aE(t).get(e).next(function(t){return t?(B_(t.userId===n.userId),n.serializer.xh(t)):null})},iE.prototype.Xo=function(t,n){var r=this;return this.zo[n]?Z_.resolve(this.zo[n]):this.Jo(t,n).next(function(t){if(t){var e=t.keys();return r.zo[n]=e}return null})},iE.prototype.Zo=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return aE(t).Ur({index:yE.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(B_(e.batchId>=i),o=r.serializer.xh(e)),n.done()}).next(function(){return o})},iE.prototype.ta=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return aE(t).Ur({index:yE.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},iE.prototype.ea=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aE(t).Fr(yE.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.xh(t)})})},iE.prototype.Gn=function(a,u){var c=this,t=gE.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return uE(a).Ur({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=ww(i);if(r===c.userId&&u.path.isEqual(s))return aE(a).get(o).next(function(t){if(!t)throw q_();B_(t.userId===c.userId),h.push(c.serializer.xh(t))});n.done()}).next(function(){return h})},iE.prototype.Xn=function(r,t){var u=this,c=new t_(H_),i=[];return t.forEach(function(a){var t=gE.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=uE(r).Ur({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=ww(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),Z_.vn(i).next(function(){return u.sa(r,c)})},iE.prototype.nr=function(t,e){var a=this,u=e.path,c=u.length+1,n=gE.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new t_(H_);return uE(t).Ur({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=ww(i);r===a.userId&&u.q(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.sa(t,h)})},iE.prototype.sa=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(aE(e).get(t).next(function(t){if(null===t)throw q_();B_(t.userId===n.userId),r.push(n.serializer.xh(t))}))}),Z_.vn(i).next(function(){return r})},iE.prototype.ia=function(e,n){var r=this;return sE(e.$h,this.userId,n).next(function(t){return e.qn(function(){r.na(n.batchId)}),Z_.forEach(t,function(t){return r.hh.Uo(e,t)})})},iE.prototype.na=function(t){delete this.zo[t]},iE.prototype.ra=function(n){var o=this;return this.Ho(n).next(function(t){if(!t)return Z_.resolve();var e=IDBKeyRange.lowerBound(gE.prefixForUser(o.userId)),i=[];return uE(n).Ur({range:e},function(t,e,n){var r;t[0]===o.userId?(r=ww(t[1]),i.push(r)):n.done()}).next(function(){B_(0===i.length)})})},iE.prototype.Ch=function(t,e){return oE(t,this.userId,e)},iE.prototype.ha=function(t){var e=this;return cE(t).get(this.userId).next(function(t){return t||new vE(e.userId,-1,"")})},iE);function iE(t,e,n,r){this.userId=t,this.serializer=e,this.jn=n,this.hh=r,this.zo={}}function oE(t,o,e){var n=gE.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return uE(t).Ur({range:r,Dh:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function sE(t,e,n){var r=t.store(yE.store),i=t.store(gE.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ur({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){B_(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=gE.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Z_.vn(o).next(function(){return c})}function aE(t){return Qw.Nr(t,yE.store)}function uE(t){return Qw.Nr(t,gE.store)}function cE(t){return Qw.Nr(t,vE.store)}var hE=10,lE=(dE.prototype.createOrUpgrade=function(n,r,t,e){var i=this;B_(t<e&&0<=t&&e<=hE);var o,s=new UE(r);t<1&&1<=e&&(n.createObjectStore(pE.store),(o=n).createObjectStore(vE.store,{keyPath:vE.keyPath}),o.createObjectStore(yE.store,{keyPath:yE.keyPath,autoIncrement:!0}).createIndex(yE.userMutationsIndex,yE.userMutationsKeyPath,{unique:!0}),o.createObjectStore(gE.store),NE(n),n.createObjectStore(wE.store));var a,u=Z_.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(IE.store),a.deleteObjectStore(TE.store),a.deleteObjectStore(SE.store),NE(n)),u=u.next(function(){return t=s.store(SE.store),e=new SE(0,0,Og.min().C(),0),t.put(SE.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(yE.store).Fr().next(function(t){r.deleteObjectStore(yE.store),r.createObjectStore(yE.store,{keyPath:yE.keyPath,autoIncrement:!0}).createIndex(yE.userMutationsIndex,yE.userMutationsKeyPath,{unique:!0});var e=i.store(yE.store),n=t.map(function(t){return e.put(t)});return Z_.vn(n)});var r,i})),u=u.next(function(){n.createObjectStore(AE.store,{keyPath:AE.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(EE.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(wE.store)).createIndex(wE.readTimeIndex,wE.readTimeIndexPath,{unique:!1}),t.createIndex(wE.collectionReadTimeIndex,wE.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},dE.prototype.addDocumentGlobal=function(e){var n=0;return e.store(wE.store).Ur(function(t,e){n+=Lw(e)}).next(function(){var t=new EE(n);return e.store(EE.store).put(EE.key,t)})},dE.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(vE.store),e=r.store(yE.store);return t.Fr().next(function(t){return Z_.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.Fr(yE.userMutationsIndex,t).next(function(t){return Z_.forEach(t,function(t){B_(t.userId===n.userId);var e=i.serializer.xh(t);return sE(r,n.userId,e).next(function(){})})})})})},dE.prototype.ensureSequenceNumbers=function(t){var s=t.store(IE.store),e=t.store(wE.store);return t.store(SE.store).get(SE.key).next(function(i){var o=[];return e.Ur(function(t,e){var n=new Dg(t),r=[0,bw(n)];o.push(s.get(r).next(function(t){return t?Z_.resolve():s.put(new IE(0,bw(n),i.highestListenSequenceNumber))}))}).next(function(){return Z_.vn(o)})})},dE.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.L(),n=t.$();return r.put({collectionId:e,parent:bw(n)})}}t.createObjectStore(CE.store,{keyPath:CE.keyPath});var r=e.store(CE.store),o=new Tw;return e.store(wE.store).Ur({Dh:!0},function(t,e){var n=new Dg(t);return i(n.$())}).next(function(){return e.store(gE.store).Ur({Dh:!0},function(t,e){t[0];var n=t[1],r=(t[2],ww(n));return i(r.$())})})},dE.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(TE.store);return o.Ur(function(t,e){var n=i.serializer.mh(e),r=i.serializer.Ph(n);return o.put(r)})},dE),fE=function(t,e){this.seconds=t,this.nanoseconds=e},pE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function dE(t){this.serializer=t}pE.store="owner",pE.key="owner";var vE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};vE.store="mutationQueues",vE.keyPath="userId";var yE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};yE.store="mutations",yE.keyPath="batchId",yE.userMutationsIndex="userMutationsIndex",yE.userMutationsKeyPath=["userId","batchId"];var gE=(mE.prefixForUser=function(t){return[t]},mE.prefixForPath=function(t,e){return[t,bw(e)]},mE.key=function(t,e,n){return[t,bw(e),n]},mE);function mE(){}gE.store="documentMutations",gE.PLACEHOLDER=new gE;var bE=function(t,e){this.path=t,this.readTime=e},_E=function(t,e){this.path=t,this.version=e},wE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};wE.store="remoteDocuments",wE.readTimeIndex="readTimeIndex",wE.readTimeIndexPath="readTime",wE.collectionReadTimeIndex="collectionReadTimeIndex",wE.collectionReadTimeIndexPath=["parentPath","readTime"];var EE=function(t){this.byteSize=t};EE.store="remoteDocumentGlobal",EE.key="remoteDocumentGlobalKey";var TE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};TE.store="targets",TE.keyPath="targetId",TE.queryTargetsIndexName="queryTargetsIndex",TE.queryTargetsKeyPath=["canonicalId","targetId"];var IE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};IE.store="targetDocuments",IE.keyPath=["targetId","path"],IE.documentTargetsIndex="documentTargetsIndex",IE.documentTargetsKeyPath=["path","targetId"];var SE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};SE.key="targetGlobalKey",SE.store="targetGlobal";var CE=function(t,e){this.collectionId=t,this.parent=e};function NE(t){t.createObjectStore(IE.store,{keyPath:IE.keyPath}).createIndex(IE.documentTargetsIndex,IE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(TE.store,{keyPath:TE.keyPath}).createIndex(TE.queryTargetsIndexName,TE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(SE.store)}CE.store="collectionParents",CE.keyPath=["collectionId","parent"];var AE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};AE.store="clientMetadata",AE.keyPath="clientId";var kE,RE=Js(Js(Js([vE.store,yE.store,gE.store,wE.store,TE.store,pE.store,SE.store,IE.store],[AE.store]),[EE.store]),[CE.store]),OE=(ME.Zh=function(o,t,s){return U_("SimpleDb","Opening database:",o),new Z_(function(n,r){var i=indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new ME(e))},i.onblocked=function(){r(new Sg(Ig.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Sg(Ig.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){U_("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,hE).next(function(){U_("SimpleDb","Database upgrade to version "+hE+" complete")})}}).yn()},ME.delete=function(t){return U_("SimpleDb","Removing database:",t),BE(window.indexedDB.deleteDatabase(t)).yn()},ME.zh=function(){if("undefined"==typeof indexedDB)return!1;if(ME.aa())return!0;var t=ua(),e=ME.oa(t),n=0<e&&e<10,r=ME.ua(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},ME.aa=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.ca)},ME.Nr=function(t,e){return t.store(e)},ME.oa=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},ME.ua=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},ME.prototype.ao=function(e){this.db.onversionchange=function(t){return e(t)}},ME.prototype.runTransaction=function(r,c,h){return zs(this,void 0,void 0,function(){var s,a,e,u,n;return Ks(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:++a,e=UE.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),Z_.reject(t)}).yn(),r={},n.catch(function(){}),[4,e._a];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,U_("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},ME.prototype.close=function(){this.db.close()},ME),PE=(Object.defineProperty(LE.prototype,"Pn",{get:function(){return this.da},enumerable:!0,configurable:!0}),Object.defineProperty(LE.prototype,"Ta",{get:function(){return this.fa},enumerable:!0,configurable:!0}),Object.defineProperty(LE.prototype,"cursor",{set:function(t){this.la=t},enumerable:!0,configurable:!0}),LE.prototype.done=function(){this.da=!0},LE.prototype.Qr=function(t){this.fa=t},LE.prototype.delete=function(){return BE(this.la.delete())},LE),DE=(Gs(xE,kE=Sg),xE);function xE(t){var e=this;return(e=kE.call(this,Ig.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function LE(t){this.la=t,this.da=!1,this.fa=null}function ME(t){this.db=t,12.2===ME.oa(ua())&&j_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function FE(t){return"IndexedDbTransactionError"===t.name}var UE=(qE.open=function(t,e,n){return new qE(t.transaction(n,e))},Object.defineProperty(qE.prototype,"_a",{get:function(){return this.Ea.promise},enumerable:!0,configurable:!0}),qE.prototype.abort=function(t){t&&this.Ea.reject(t),this.aborted||(U_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},qE.prototype.store=function(t){var e=this.transaction.objectStore(t);return new jE(e)},qE),jE=(VE.prototype.put=function(t,e){var n=void 0!==e?(U_("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(U_("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return BE(n)},VE.prototype.add=function(t){return U_("SimpleDb","ADD",this.store.name,t,t),BE(this.store.add(t))},VE.prototype.get=function(e){var n=this;return BE(this.store.get(e)).next(function(t){return void 0===t&&(t=null),U_("SimpleDb","GET",n.store.name,e,t),t})},VE.prototype.delete=function(t){return U_("SimpleDb","DELETE",this.store.name,t),BE(this.store.delete(t))},VE.prototype.count=function(){return U_("SimpleDb","COUNT",this.store.name),BE(this.store.count())},VE.prototype.Fr=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ia(n,function(t,e){r.push(e)}).next(function(){return r})},VE.prototype.wa=function(t,e){U_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Dh=!1;var r=this.cursor(n);return this.Ia(r,function(t,e,n){return n.delete()})},VE.prototype.Ur=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ia(r,e)},VE.prototype.Wo=function(i){var t=this.cursor({});return new Z_(function(n,r){t.onerror=function(t){var e=GE(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},VE.prototype.Ia=function(t,s){var a=[];return new Z_(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,r,i=t.target.result;i?(e=new PE(i),(n=s(i.primaryKey,i.value,e))instanceof Z_&&(r=n.catch(function(t){return e.done(),Z_.reject(t)}),a.push(r)),e.Pn?o():null===e.Ta?i.continue():i.continue(e.Ta)):o()}}).next(function(){return Z_.vn(a)})},VE.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},VE.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Dh?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},VE);function VE(t){this.store=t}function qE(t){var n=this;this.transaction=t,this.aborted=!1,this.Ea=new yw,this.transaction.oncomplete=function(){n.Ea.resolve()},this.transaction.onabort=function(){t.error?n.Ea.reject(new DE(t.error)):n.Ea.resolve()},this.transaction.onerror=function(t){var e=GE(t.target.error);n.Ea.reject(new DE(e))}}function BE(t){return new Z_(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=GE(t.target.error);r(e)}})}var WE=!1;function GE(t){var e=OE.oa(ua());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Sg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return WE||(WE=!0,setTimeout(function(){throw r},0)),r}}return t}var HE=(QE.Va=function(t,e,n,r,i){var o=new QE(t,e,Date.now()+n,r,i);return o.start(n),o},QE.prototype.start=function(t){var e=this;this.ga=setTimeout(function(){return e.pa()},t)},QE.prototype.vr=function(){return this.pa()},QE.prototype.cancel=function(t){null!==this.ga&&(this.clearTimeout(),this.Pa.reject(new Sg(Ig.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},QE.prototype.pa=function(){var e=this;this.Ra.co(function(){return null!==e.ga?(e.clearTimeout(),e.op().then(function(t){return e.Pa.resolve(t)})):Promise.resolve()})},QE.prototype.clearTimeout=function(){null!==this.ga&&(this.ma(this),clearTimeout(this.ga),this.ga=null)},QE),zE=(Object.defineProperty(KE.prototype,"Ma",{get:function(){return this.va},enumerable:!0,configurable:!0}),KE.prototype.co=function(t){this.enqueue(t)},KE.prototype.xa=function(t){this.$a(),this.Oa(t)},KE.prototype.La=function(t){return this.$a(),this.Oa(t)},KE.prototype.Ba=function(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return this.$a(),this.va?[3,2]:(this.va=!0,(e=x_.nt().window)&&e.removeEventListener("visibilitychange",this.ka),[4,this.La(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},KE.prototype.enqueue=function(t){return this.$a(),this.va?new Promise(function(t){}):this.Oa(t)},KE.prototype.lo=function(i){var t=this;this.$a(),this.va||(this.ba=this.ba.then(function(){var n=new yw,r=function(){return zs(t,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i()];case 1:return t.sent(),n.resolve(),this.Na.reset(),[3,3];case 2:if(!FE(e=t.sent()))throw n.resolve(),e;return U_("AsyncQueue","Operation failed with retryable error: "+e),this.Na.gr(r),[3,3];case 3:return[2]}})})};return t.co(r),n.promise}))},KE.prototype.Oa=function(t){var r=this,e=this.ya.then(function(){return r.Ca=!0,t().catch(function(t){throw r.Da=t,r.Ca=!1,j_("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Ca=!1,t})});return this.ya=e},KE.prototype.yr=function(t,e,n){var r=this;this.$a(),-1<this.Fa.indexOf(t)&&(e=0);var i=HE.Va(this,t,e,n,function(t){return r.qa(t)});return this.Sa.push(i),i},KE.prototype.$a=function(){this.Da&&q_()},KE.prototype.Ua=function(){},KE.prototype.Qa=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,e=this.ya];case 1:t.sent(),t.label=2;case 2:if(e!==this.ya)return[3,0];t.label=3;case 3:return[2]}})})},KE.prototype.Wa=function(t){for(var e=0,n=this.Sa;e<n.length;e++)if(n[e].Er===t)return!0;return!1},KE.prototype.ja=function(r){var i=this;return this.Qa().then(function(){i.Sa.sort(function(t,e){return t.Aa-e.Aa});for(var t=0,e=i.Sa;t<e.length;t++){var n=e[t];if(n.vr(),"all"!==r&&n.Er===r)break}return i.Qa()})},KE.prototype.Ka=function(t){this.Fa.push(t)},KE.prototype.qa=function(t){var e=this.Sa.indexOf(t);this.Sa.splice(e,1)},KE);function KE(){var t=this;this.ya=Promise.resolve(),this.ba=Promise.resolve(),this.va=!1,this.Sa=[],this.Da=null,this.Ca=!1,this.Fa=[],this.Na=new gw(this,"async_queue_retry"),this.ka=function(){return t.Na.br()};var e=x_.nt().window;e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ka)}function QE(t,e,n,r,i){this.Ra=t,this.Er=e,this.Aa=n,this.op=r,this.ma=i,this.Pa=new yw,this.then=this.Pa.promise.then.bind(this.Pa.promise),this.Pa.promise.catch(function(t){})}function YE(t,e){if(j_("AsyncQueue",e+": "+t),FE(t))return new Sg(Ig.UNAVAILABLE,e+": "+t);throw t}function XE(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=H_(n,i);return 0===s?H_(r,o):s}var JE=(eT.prototype.Ha=function(){return++this.za},eT.prototype.Ya=function(t){var e,n=[t,this.Ha()];this.buffer.size<this.Ga?this.buffer=this.buffer.add(n):XE(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(eT.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),eT),$E={Ja:!1,Xa:0,Za:0,tu:0},ZE=(tT.nu=function(t){return new tT(t,tT.ru,tT.hu)},tT);function tT(t,e,n){this.eu=t,this.su=e,this.iu=n}function eT(t){this.Ga=t,this.buffer=new t_(XE),this.za=0}ZE.ou=-1,ZE.au=1048576,ZE.uu=41943040,ZE.ru=10,ZE.hu=1e3,ZE.cu=new ZE(ZE.uu,ZE.ru,ZE.hu),ZE.DISABLED=new ZE(ZE.ou,0,0);var nT=(aT.prototype.start=function(t){this.$o.du.eu!==ZE.ou&&this.fu(t)},aT.prototype.stop=function(){this.lu&&(this.lu.cancel(),this.lu=null)},Object.defineProperty(aT.prototype,"ho",{get:function(){return null!==this.lu},enumerable:!0,configurable:!0}),aT.prototype.fu=function(n){var t=this,e=this._u?3e5:6e4;U_("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.lu=this.Ra.yr("lru_garbage_collection",e,function(){return zs(t,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:this.lu=null,this._u=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Tu(this.$o)];case 2:return t.sent(),[3,7];case 3:return FE(e=t.sent())?(U_("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,lT(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.fu(n)];case 8:return t.sent(),[2]}})})})},aT),rT=(sT.prototype.Iu=function(t,e){return this.Eu.Oo(t).next(function(t){return Math.floor(e/100*t)})},sT.prototype.wu=function(t,e){var n=this;if(0===e)return Z_.resolve(ow.dr);var r=new JE(e);return this.Eu.js(t,function(t){return r.Ya(t.sequenceNumber)}).next(function(){return n.Eu.Bo(t,function(t){return r.Ya(t)})}).next(function(){return r.maxValue})},sT.prototype.Ah=function(t,e,n){return this.Eu.Ah(t,e,n)},sT.prototype.jo=function(t,e){return this.Eu.jo(t,e)},sT.prototype.Ru=function(e,n){var r=this;return this.du.eu===ZE.ou?(U_("LruGarbageCollector","Garbage collection skipped; disabled"),Z_.resolve($E)):this.Go(e).next(function(t){return t<r.du.eu?(U_("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.du.eu),$E):r.Au(e,n)})},sT.prototype.Go=function(t){return this.Eu.Go(t)},sT.prototype.Au=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Iu(e,this.du.su).next(function(t){return i=t>h.du.iu?(U_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.du.iu+" from "+t),h.du.iu):t,s=Date.now(),h.wu(e,i)}).next(function(t){return r=t,a=Date.now(),h.Ah(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.jo(e,r)}).next(function(t){return c=Date.now(),F_()<=za.DEBUG&&U_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),Z_.resolve({Ja:!0,Xa:i,Za:o,tu:t})})},sT),iT=(oT.prototype.start=function(){return Promise.resolve()},oT.prototype.vu=function(i){return zs(this,void 0,void 0,function(){var e,m,n,r=this;return Ks(this,function(t){switch(t.label){case 0:return e=this.Wn,m=this.yu,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.Wn.ea(y).next(function(t){return g=t,e=r.persistence.Do(i),m=new rw(r.pu,e,r.persistence.ko()),e.ea(y)}).next(function(t){for(var e=[],n=[],r=u_(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Yn(y,r).next(function(t){return{Su:t,Du:e,Cu:n}})})})];case 1:return n=t.sent(),[2,(this.Wn=e,this.yu=m,this.mu.bu(this.yu),n)]}})})},oT.prototype.Fu=function(a){var u,c=this,h=Rg.now(),t=a.reduce(function(t,e){return t.add(e.key)},u_());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.yu.Yn(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.Pt(u.get(i.key));null!=o&&e.push(new qm(i.key,o,function a(t){var u=[];return Xg(t.fields||{},function(t,e){var n=new Hg([t]);if(_m(e)){var r=a(e.mapValue).fields;if(0===r.length)u.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];u.push(n.child(s))}}else u.push(n)}),new Mm(u)}(o.proto.mapValue),Um.exists(!0)))}return c.Wn.Yo(s,h,e,a)})}).then(function(t){var e=t.In(u);return{batchId:t.batchId,Dn:e}})},oT.prototype.Nu=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.pu.Yr({Xr:!0});return i.ku(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.Wn.ra(t)}).next(function(){return i.yu.Yn(t,e)})})},oT.prototype.Mu=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.Wn.Jo(e,t).next(function(t){return B_(null!==t),n=t.keys(),r.Wn.ia(e,t)}).next(function(){return r.Wn.ra(e)}).next(function(){return r.yu.Yn(e,n)})})},oT.prototype.ta=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Wn.ta(t)})},oT.prototype._h=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Jh._h(t)})},oT.prototype.xu=function(u){var c=this,h=u.Ee,l=this.Pu;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.pu.Yr({Xr:!0});l=c.Pu;var s=[];u.as.forEach(function(t,e){var n,r,i=l.get(e);i&&(s.push(c.Jh.bh(o,t.Is,e).next(function(){return c.Jh.ph(o,t.Ts,e)})),0<(n=t.resumeToken).rt()&&(r=i.we(n,h).Ie(o.Oh),l=l.Ae(e,r),oT.$u(i,r,t)&&s.push(c.Jh.Ih(o,r))))});var t,a=n_,n=u_();return u.cs.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.cs.forEach(function(t,e){var n=r.get(t);e instanceof mb&&e.version.isEqual(Og.min())?(i.Mn(t,h),a=a.Ae(t,e)):null==n||0<e.version.S(n.version)||0===e.version.S(n.version)&&n.hasPendingWrites?(i.Nn(e,h),a=a.Ae(t,e)):U_("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u._s.has(t)&&s.push(c.persistence.hh.Ko(o,t))})})),h.isEqual(Og.min())||(t=c.Jh._h(o).next(function(t){return c.Jh.dh(o,o.Oh,h)}),s.push(t)),Z_.vn(s).next(function(){return i.apply(o)}).next(function(){return c.yu.Jn(o,a)})}).then(function(t){return c.Pu=l,t})},oT.$u=function(t,e,n){return B_(0<e.resumeToken.rt()),0===t.resumeToken.rt()||e.Ee.D()-t.Ee.D()>=this.Ou||0<n.Ts.size+n.Es.size+n.Is.size},oT.prototype.Lu=function(h){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Z_.forEach(h,function(e){return Z_.forEach(e.hr,function(t){return c.persistence.hh.yh(n,e.targetId,t)}).next(function(){return Z_.forEach(e.or,function(t){return c.persistence.hh.vh(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!FE(e=t.sent()))throw e;return U_("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=h;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.Pu.get(o),a=s.Ee,u=s.Re(a),this.Pu=this.Pu.Ae(o,u));return[2]}})})},oT.prototype.Bu=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Wn.Zo(t,e)})},oT.prototype.qu=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.yu.Kn(t,e)})},oT.prototype.Uu=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Jh.gh(e,r).next(function(t){return t?(n=t,Z_.resolve(n)):i.Jh.oh(e).next(function(t){return n=new Rb(r,t,0,e.Oh),i.Jh.fh(e,n).next(function(){return n})})})}).then(function(t){var e=i.Pu.get(t.targetId);return(null===e||0<t.Ee.S(e.Ee))&&(i.Pu=i.Pu.Ae(t.targetId,t),i.Vu.set(r,t.targetId)),t})},oT.prototype.gh=function(t,e){var n=this.Vu.get(e);return void 0!==n?Z_.resolve(this.Pu.get(n)):this.Jh.gh(t,e)},oT.prototype.Qu=function(t,e){var n=this,r=this.Pu.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,function(t){return e?Z_.resolve():n.persistence.hh.removeTarget(t,r)}).then(function(){n.Pu=n.Pu.remove(t),n.Vu.delete(r.target)})},oT.prototype.Wu=function(t,n){var r=this,i=Og.min(),o=u_();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.gh(e,t.ee()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Jh.Sh(e,t.targetId).next(function(t){o=t})}).next(function(){return r.mu.Zn(e,t,n?i:Og.min(),n?o:u_())}).next(function(t){return{documents:t,ju:o}})})},oT.prototype.ku=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=Z_.resolve();return n.forEach(function(r){a=a.next(function(){return o.xn(t,r)}).next(function(t){var e=t,n=i.Rn.get(r);B_(null!==n),(!e||e.version.S(n)<0)&&(e=s.at(r,e,i))&&o.Nn(e,i.wn)})}),a.next(function(){return e.Wn.ia(t,s)})},oT.prototype.Tu=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Ru(t,n.Pu)})},oT);function oT(t,e,n){this.persistence=t,this.mu=e,this.Pu=new Kb(H_),this.Vu=new X_(function(t){return t.canonicalId()}),this.gu=Og.min(),this.Wn=t.Do(n),this.pu=t.No(),this.Jh=t.Fo(),this.yu=new rw(this.pu,this.Wn,this.persistence.ko()),this.mu.bu(this.yu)}function sT(t,e){this.Eu=t,this.du=e}function aT(t,e){this.$o=t,this.Ra=e,this._u=!1,this.lu=null}iT.Ou=3e8;var uT,cT=(Gs(hT,uT=iT),hT.prototype.start=function(){return this.Ku()},hT.prototype.Gu=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.Wn.Xo(e,t).next(function(t){return t?n.yu.Yn(e,t):Z_.resolve(null)})})},hT.prototype.zu=function(t){this.Wn.na(t)},hT.prototype.uo=function(t){this.persistence.uo(t)},hT.prototype.So=function(){return this.persistence.So()},hT.prototype.Hu=function(e){var n=this,t=this.Pu.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly",function(t){return n.Jh.si(t,e).next(function(t){return t?t.target:null})})},hT.prototype.Kr=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return r.pu.Kr(t,r.gu)}).then(function(t){var e=t.Gr,n=t.readTime;return r.gu=n,e})},hT.prototype.Ku=function(){return zs(this,void 0,void 0,function(){var e,n=this;return Ks(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.pu.Hr(t)})];case 1:return e.gu=t.sent(),[2]}})})},hT);function hT(t,e,n){var r=this;return(r=uT.call(this,t,e,n)||this).persistence=t,r.Wn=t.Do(n),r.pu=t.No(),r.Jh=t.Fo(),r}function lT(e){return zs(this,void 0,void 0,function(){return Ks(this,function(t){if(e.code!==Ig.FAILED_PRECONDITION||e.message!==ew)throw e;return U_("LocalStore","Unexpectedly lost primary lease"),[2]})})}var fT=(vT.prototype.B=function(){return this.Yu.B()},vT.prototype.yh=function(t,e){var n=new pT(t,e);this.Yu=this.Yu.add(n),this.Xu=this.Xu.add(n)},vT.prototype.tc=function(t,e){var n=this;t.forEach(function(t){return n.yh(t,e)})},vT.prototype.vh=function(t,e){this.ec(new pT(t,e))},vT.prototype.sc=function(t,e){var n=this;t.forEach(function(t){return n.vh(t,e)})},vT.prototype.ic=function(t){var e=this,n=Kg.EMPTY,r=new pT(n,t),i=new pT(n,t+1),o=[];return this.Xu.Ke([r,i],function(t){e.ec(t),o.push(t.key)}),o},vT.prototype.nc=function(){var e=this;this.Yu.forEach(function(t){return e.ec(t)})},vT.prototype.ec=function(t){this.Yu=this.Yu.delete(t),this.Xu=this.Xu.delete(t)},vT.prototype.rc=function(t){var e=Kg.EMPTY,n=new pT(e,t),r=new pT(e,t+1),i=u_();return this.Xu.Ke([n,r],function(t){i=i.add(t.key)}),i},vT.prototype.Ch=function(t){var e=new pT(t,0),n=this.Yu.ze(e);return null!==n&&t.isEqual(n.key)},vT),pT=(dT.Ju=function(t,e){return Kg.N(t.key,e.key)||H_(t.hc,e.hc)},dT.Zu=function(t,e){return H_(t.hc,e.hc)||Kg.N(t.key,e.key)},dT);function dT(t,e){this.key=t,this.hc=e}function vT(){this.Yu=new t_(pT.Ju),this.Xu=new t_(pT.Zu)}function yT(t,e){if(0!==e.length)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+xT(e.length,"argument")+".")}function gT(t,e,n){if(e.length!==n)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires "+xT(n,"argument")+", but was called with "+xT(e.length,"argument")+".")}function mT(t,e,n){if(e.length<n)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires at least "+xT(n,"argument")+", but was called with "+xT(e.length,"argument")+".")}function bT(t,e,n,r){if(e.length<n||e.length>r)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+xT(e.length,"argument")+".")}function _T(t,e,n,r){CT(t,e,DT(n)+" argument",r)}function wT(t,e,n,r){void 0!==r&&_T(t,e,n,r)}function ET(t,e,n,r){CT(t,e,n+" option",r)}function TT(t,e,n,r){void 0!==r&&ET(t,e,n,r)}function IT(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(AT(s))}var a=AT(n);throw new Sg(Ig.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function ST(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid value "+AT(r)+" provided to function "+t+"() for its "+DT(n)+" argument. Acceptable values: "+e.join(", "));return r}function CT(t,e,n,r){if(!("object"===e?NT(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=AT(r);throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function NT(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function AT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":q_();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function kT(t,e,n){if(void 0===n)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+DT(e)+" argument, but it was undefined.")}function RT(n,t,r){Xg(t,function(t,e){if(r.indexOf(t)<0)throw new Sg(Ig.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function OT(t,e,n,r){var i=AT(r);return new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires its "+DT(n)+" argument to be a "+e+", but it was: "+i)}function PT(t,e,n){if(n<=0)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires its "+DT(e)+" argument to be a positive number, but it was: "+n+".")}function DT(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function xT(t,e){return t+" "+e+(1===t?"":"s")}function LT(){if("undefined"==typeof Uint8Array)throw new Sg(Ig.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function MT(){if(!x_.nt().oc)throw new Sg(Ig.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function FT(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Sg(Ig.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(_T("FieldPath","string",e,t[e]),0===t[e].length)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.uc=new Hg(t)}var UT,jT=(BT.fromBase64String=function(t){gT("Blob.fromBase64String",arguments,1),_T("Blob.fromBase64String","string",1,t),MT();try{return new BT($g.fromBase64String(t))}catch(t){throw new Sg(Ig.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},BT.fromUint8Array=function(t){if(gT("Blob.fromUint8Array",arguments,1),LT(),!(t instanceof Uint8Array))throw OT("Blob.fromUint8Array","Uint8Array",1,t);return new BT($g.fromUint8Array(t))},BT.prototype.toBase64=function(){return gT("Blob.toBase64",arguments,0),MT(),this.ac.toBase64()},BT.prototype.toUint8Array=function(){return gT("Blob.toUint8Array",arguments,0),LT(),this.ac.toUint8Array()},BT.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},BT.prototype.isEqual=function(t){return this.ac.isEqual(t.ac)},BT),VT=(Gs(qT,UT=FT),qT.documentId=function(){return qT.cc},qT.prototype.isEqual=function(t){if(!(t instanceof qT))throw OT("isEqual","FieldPath",1,t);return this.uc.isEqual(t.uc)},qT);function qT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return UT.call(this,t)||this}function BT(t){MT(),this.ac=t}VT.cc=new VT(Hg.J().j());var WT,GT,HT,zT,KT,QT,YT,XT=new RegExp("[~\\*/\\[\\]]"),JT=function(){this._c=this},$T=(Gs(bI,YT=JT),bI.prototype.dc=function(t){if(2!==t.fc)throw 1===t.fc?t.Tc(this.lc+"() can only appear at the top level of your update data"):t.Tc(this.lc+"() cannot be used with set() unless you pass {merge:true}");return t.Vt.push(t.path),null},bI.prototype.isEqual=function(t){return t instanceof bI},bI),ZT=(Gs(mI,QT=JT),mI.prototype.dc=function(t){return new Fm(t.path,wm.instance)},mI.prototype.isEqual=function(t){return t instanceof mI},mI),tI=(Gs(gI,KT=JT),gI.prototype.dc=function(t){var e=new wI({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map(function(t){return SI(t,e)}),r=new Tm(n);return new Fm(t.path,r)},gI.prototype.isEqual=function(t){return this===t},gI),eI=(Gs(yI,zT=JT),yI.prototype.dc=function(t){var e=new wI({fc:3,methodName:this.lc,Ic:!0},t.ii,t.serializer,t.ignoreUndefinedProperties),n=this.Ec.map(function(t){return SI(t,e)}),r=new Im(n);return new Fm(t.path,r)},yI.prototype.isEqual=function(t){return this===t},yI),nI=(Gs(vI,HT=JT),vI.prototype.dc=function(t){var e=new wI({fc:3,methodName:this.lc},t.ii,t.serializer,t.ignoreUndefinedProperties),n=SI(this.wc,e),r=new Sm(t.serializer,n);return new Fm(t.path,r)},vI.prototype.isEqual=function(t){return this===t},vI),rI=(Gs(dI,GT=JT),dI.delete=function(){return yT("FieldValue.delete",arguments),new iI(new $T("FieldValue.delete"))},dI.serverTimestamp=function(){return yT("FieldValue.serverTimestamp",arguments),new iI(new ZT("FieldValue.serverTimestamp"))},dI.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mT("FieldValue.arrayUnion",arguments,1),new iI(new tI("FieldValue.arrayUnion",t))},dI.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mT("FieldValue.arrayRemove",arguments,1),new iI(new eI("FieldValue.arrayRemove",t))},dI.increment=function(t){return _T("FieldValue.increment","number",1,t),gT("FieldValue.increment",arguments,1),new iI(new nI("FieldValue.increment",t))},dI),iI=(Gs(pI,WT=rI),pI.prototype.dc=function(t){return this._c.dc(t)},pI.prototype.isEqual=function(t){return t instanceof pI&&this._c.isEqual(t._c)},pI),oI=(Object.defineProperty(fI.prototype,"latitude",{get:function(){return this.Rc},enumerable:!0,configurable:!0}),Object.defineProperty(fI.prototype,"longitude",{get:function(){return this.Ac},enumerable:!0,configurable:!0}),fI.prototype.isEqual=function(t){return this.Rc===t.Rc&&this.Ac===t.Ac},fI.prototype.p=function(t){return H_(this.Rc,t.Rc)||H_(this.Ac,t.Ac)},fI),sI=/^__.*__$/,aI=function(t,e,n){this.mc=t,this.Pc=e,this.Vc=n},uI=(lI.prototype.gc=function(t,e){var n=[];return null!==this.Vt?n.push(new qm(t,this.data,this.Vt,e)):n.push(new Vm(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Bm(t,this.fieldTransforms)),n},lI),cI=(hI.prototype.gc=function(t,e){var n=[new qm(t,this.data,this.Vt,e)];return 0<this.fieldTransforms.length&&n.push(new Bm(t,this.fieldTransforms)),n},hI);function hI(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}function lI(t,e,n){this.data=t,this.Vt=e,this.fieldTransforms=n}function fI(t,e){if(gT("GeoPoint",arguments,2),_T("GeoPoint","number",1,t),_T("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Sg(Ig.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Sg(Ig.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Rc=t,this.Ac=e}function pI(t){var e=this;return(e=WT.call(this)||this)._c=t,e.lc=t.lc,e}function dI(){return null!==GT&&GT.apply(this,arguments)||this}function vI(t,e){var n=this;return(n=HT.call(this)||this).lc=t,n.wc=e,n}function yI(t,e){var n=this;return(n=zT.call(this)||this).lc=t,n.Ec=e,n}function gI(t,e){var n=this;return(n=KT.call(this)||this).lc=t,n.Ec=e,n}function mI(t){var e=this;return(e=QT.call(this)||this).lc=t,e}function bI(t){var e=this;return(e=YT.call(this)||this).lc=t,e}function _I(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw q_()}}var wI=(Object.defineProperty(II.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(II.prototype,"fc",{get:function(){return this.settings.fc},enumerable:!0,configurable:!0}),II.prototype.yc=function(t){return new II(Object.assign(Object.assign({},this.settings),t),this.ii,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Vt)},II.prototype.bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.vc(t),r},II.prototype.Sc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.yc({path:n,Ic:!1});return r.pc(),r},II.prototype.Dc=function(t){return this.yc({path:void 0,Ic:!0})},II.prototype.Tc=function(t){var e=!this.path||this.path.B()?"":" (found in field "+this.path.toString()+")";return new Sg(Ig.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},II.prototype.contains=function(e){return void 0!==this.Vt.find(function(t){return e.q(t)})||void 0!==this.fieldTransforms.find(function(t){return e.q(t.field)})},II.prototype.pc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.vc(this.path.get(t))},II.prototype.vc=function(t){if(0===t.length)throw this.Tc("Document fields must not be empty");if(_I(this.fc)&&sI.test(t))throw this.Tc('Document fields cannot begin and end with "__"')},II),EI=(TI.prototype.Fc=function(t,e,n){void 0===n&&(n={});var r=this.Nc(n.merge||n.mergeFields?2:0,t);AI("Data must be an object, but it was:",r,e);var i,o,s=CI(e,r);if(n.merge)i=new Mm(r.Vt),o=r.fieldTransforms;else if(n.mergeFields){for(var a=[],u=0,c=n.mergeFields;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof FT)l=h.uc;else{if("string"!=typeof h)throw q_();l=RI(t,h)}if(!r.contains(l))throw new Sg(Ig.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");OI(a,l)||a.push(l)}i=new Mm(a),o=r.fieldTransforms.filter(function(t){return i.dt(t.field)})}else i=null,o=r.fieldTransforms;return new uI(new Hm(s),i,o)},TI.prototype.kc=function(o,t){var s=this.Nc(1,o);AI("Data must be an object, but it was:",s,t);var a=[],u=new zm;Xg(t,function(t,e){var n,r=RI(o,t),i=s.Sc(r);e instanceof JT&&e._c instanceof $T?a.push(r):null!=(n=SI(e,i))&&(a.push(r),u.set(r,n))});var e=new Mm(a);return new cI(u.yt(),e,s.fieldTransforms)},TI.prototype.Mc=function(t,e,n,r){var i=this.Nc(1,t),o=[kI(t,e)],s=[n];if(r.length%2!=0)throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(kI(t,r[a])),s.push(r[a+1]);for(var u,c,h,l,f=[],p=new zm,d=o.length-1;0<=d;--d)OI(f,o[d])||(u=o[d],c=s[d],h=i.Sc(u),c instanceof JT&&c._c instanceof $T?f.push(u):null!=(l=SI(c,h))&&(f.push(u),p.set(u,l)));var v=new Mm(f);return new cI(p.yt(),v,i.fieldTransforms)},TI.prototype.Nc=function(t,e){return new wI({fc:t,methodName:e,path:Hg.G,Ic:!1},this.ii,this.serializer,this.ignoreUndefinedProperties)},TI.prototype.xc=function(t,e,n){return void 0===n&&(n=!1),SI(e,this.Nc(n?4:3,t))},TI);function TI(t,e,n){this.ii=t,this.ignoreUndefinedProperties=e,this.serializer=n||x_.nt().Cc(t)}function II(t,e,n,r,i,o){this.settings=t,this.ii=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pc(),this.fieldTransforms=i||[],this.Vt=o||[]}function SI(s,t){if(NI(s))return AI("Unsupported field value:",t,s),CI(s,t);if(s instanceof JT)return function(t,e){if(!_I(e.fc))throw e.Tc(t.lc+"() can only be used with update() and set()");if(!e.path)throw e.Tc(t.lc+"() is not currently supported inside arrays");var n=t.dc(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Vt.push(t.path),s instanceof Array){if(t.settings.Ic&&4!==t.fc)throw t.Tc("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=SI(i[r],t.Dc(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return e.serializer.ai(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Rg.fromDate(t);return{timestampValue:e.serializer.C(n)}}if(t instanceof Rg){var r=new Rg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:e.serializer.C(r)}}if(t instanceof oI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jT)return{bytesValue:e.serializer.ui(t)};if(t instanceof aI){var i=e.ii,o=t.mc;if(!o.isEqual(i))throw e.Tc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:e.serializer._i(t.Pc.path,t.mc)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Tc("Unsupported field value: "+AT(t))}(s,t)}function CI(t,r){var i={};return Jg(t)?r.path&&0<r.path.length&&r.Vt.push(r.path):Xg(t,function(t,e){var n=SI(e,r.bc(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function NI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Rg||t instanceof oI||t instanceof jT||t instanceof aI||t instanceof JT)}function AI(t,e,n){if(!NI(n)||!NT(n)){var r=AT(n);throw"an object"===r?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function kI(t,e){if(e instanceof FT)return e.uc;if("string"==typeof e)return RI(t,e);throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function RI(t,e){try{return function(e){if(0<=e.search(XT))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(VT.bind.apply(VT,Js([void 0],e.split("."))))}catch(t){throw new Sg(Ig.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).uc}catch(e){var n=e instanceof Error?e.message:e.toString();throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function OI(t,e){return t.some(function(t){return t.isEqual(e)})}var PI,DI,xI,LI=(QI.prototype.Uc=function(){return 1===this.state||2===this.state||4===this.state},QI.prototype.Qc=function(){return 2===this.state},QI.prototype.start=function(){3!==this.state?this.auth():this.Wc()},QI.prototype.stop=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.Uc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},QI.prototype.jc=function(){this.state=0,this.Na.reset()},QI.prototype.Kc=function(){var t=this;this.Qc()&&null===this.qc&&(this.qc=this.Tr.yr(this.$c,6e4,function(){return t.Gc()}))},QI.prototype.zc=function(t){this.Hc(),this.stream.send(t)},QI.prototype.Gc=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){return this.Qc()?[2,this.close(0)]:[2]})})},QI.prototype.Hc=function(){this.qc&&(this.qc.cancel(),this.qc=null)},QI.prototype.close=function(e,n){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.Hc(),this.Na.cancel(),this.Bc++,3!==e?this.Na.reset():n&&n.code===Ig.RESOURCE_EXHAUSTED?(j_(n.toString()),j_("Using maximum backoff delay to prevent overloading the backend."),this.Na.Vr()):n&&n.code===Ig.UNAUTHENTICATED&&this.Lc._(),null!==this.stream&&(this.Yc(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Jc(n)];case 1:return t.sent(),[2]}})})},QI.prototype.Yc=function(){},QI.prototype.auth=function(){var n=this;this.state=1;var t=this.Xc(this.Bc),e=this.Bc;this.Lc.getToken().then(function(t){n.Bc===e&&n.Zc(t)},function(e){t(function(){var t=new Sg(Ig.UNKNOWN,"Fetching auth token failed: "+e.message);return n.t_(t)})})},QI.prototype.Zc=function(t){var e=this,n=this.Xc(this.Bc);this.stream=this.e_(t),this.stream.s_(function(){n(function(){return e.state=2,e.listener.s_()})}),this.stream.Jc(function(t){n(function(){return e.t_(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},QI.prototype.Wc=function(){var t=this;this.state=4,this.Na.gr(function(){return zs(t,void 0,void 0,function(){return Ks(this,function(t){return this.state=0,this.start(),[2]})})})},QI.prototype.t_=function(t){return U_("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},QI.prototype.Xc=function(e){var n=this;return function(t){n.Tr.co(function(){return n.Bc===e?t():(U_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},QI),MI=(Gs(KI,xI=LI),KI.prototype.e_=function(t){return this.Oc.i_("Listen",t)},KI.prototype.onMessage=function(t){this.Na.reset();var e=this.serializer.pi(t),n=this.serializer.bi(t);return this.listener.n_(e,n)},KI.prototype.r_=function(t){var e={};e.database=this.serializer.wi,e.addTarget=this.serializer.ee(t);var n=this.serializer.zi(t);n&&(e.labels=n),this.zc(e)},KI.prototype.h_=function(t){var e={};e.database=this.serializer.wi,e.removeTarget=t,this.zc(e)},KI),FI=(Gs(zI,DI=LI),Object.defineProperty(zI.prototype,"a_",{get:function(){return this.o_},enumerable:!0,configurable:!0}),zI.prototype.start=function(){this.o_=!1,this.lastStreamToken=$g.ht,DI.prototype.start.call(this)},zI.prototype.Yc=function(){this.o_&&this.u_([])},zI.prototype.e_=function(t){return this.Oc.i_("Write",t)},zI.prototype.onMessage=function(t){if(B_(!!t.streamToken),this.lastStreamToken=this.serializer.ci(t.streamToken),this.o_){this.Na.reset();var e=this.serializer.$i(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.c_(n,e)}return B_(!t.writeResults||0===t.writeResults.length),this.o_=!0,this.listener.__()},zI.prototype.l_=function(){var t={};t.database=this.serializer.wi,this.zc(t)},zI.prototype.u_=function(t){var e=this,n={streamToken:this.serializer.ui(this.lastStreamToken),writes:t.map(function(t){return e.serializer.vi(t)})};this.zc(n)},zI),UI=(Gs(HI,PI=function(){this.d_=void 0}),HI.prototype.T_=function(){if(this.f_)throw new Sg(Ig.FAILED_PRECONDITION,"The client has already been terminated.")},HI.prototype.E_=function(e,n){var r=this;return this.T_(),this.credentials.getToken().then(function(t){return r.Oc.E_(e,n,t)}).catch(function(t){throw t.code===Ig.UNAUTHENTICATED&&r.credentials._(),t})},HI.prototype.I_=function(e,n){var r=this;return this.T_(),this.credentials.getToken().then(function(t){return r.Oc.I_(e,n,t)}).catch(function(t){throw t.code===Ig.UNAUTHENTICATED&&r.credentials._(),t})},HI),jI=(GI.prototype.V_=function(r){return zs(this,void 0,void 0,function(){var e,n=this;return Ks(this,function(t){switch(t.label){case 0:if(this.g_(),0<this.mutations.length)throw new Sg(Ig.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return zs(this,void 0,void 0,function(){var n,e,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return e={database:(n=s).serializer.wi,documents:a.map(function(t){return n.serializer.fi(t)})},[4,n.I_("BatchGetDocuments",e)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e=n.serializer.gi(t);i.set(e.key.toString(),e)}),o=[],[2,(a.forEach(function(t){var e=i.get(t.toString());B_(!!e),o.push(e)}),o)]}})})}(this.w_,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof mb||t instanceof gb?n.p_(t):q_()}),e)]}})})},GI.prototype.set=function(t,e){this.write(e.gc(t,this.Rt(t))),this.P_.add(t)},GI.prototype.update=function(t,e){try{this.write(e.gc(t,this.y_(t)))}catch(t){this.m_=t}this.P_.add(t)},GI.prototype.delete=function(t){this.write([new Wm(t,this.Rt(t))]),this.P_.add(t)},GI.prototype.commit=function(){return zs(this,void 0,void 0,function(){var e,r=this;return Ks(this,function(t){switch(t.label){case 0:if(this.g_(),this.m_)throw this.m_;return e=this.R_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new Kg(Dg.K(e));r.mutations.push(new Gm(n,r.Rt(n)))}),[4,function(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return n={database:(e=r).serializer.wi,writes:i.map(function(t){return e.serializer.vi(t)})},[4,e.E_("Commit",n)];case 1:return t.sent(),[2]}})})}(this.w_,this.mutations)];case 1:return t.sent(),this.A_=!0,[2]}})})},GI.prototype.p_=function(t){var e;if(t instanceof gb)e=t.version;else{if(!(t instanceof mb))throw q_();e=Og.min()}var n=this.R_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Sg(Ig.ABORTED,"Document version changed between two reads.")}else this.R_.set(t.key.toString(),e)},GI.prototype.Rt=function(t){var e=this.R_.get(t.toString());return!this.P_.has(t)&&e?Um.updateTime(e):Um.ft()},GI.prototype.y_=function(t){var e=this.R_.get(t.toString());if(this.P_.has(t)||!e)return Um.exists(!0);if(e.isEqual(Og.min()))throw new Sg(Ig.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Um.updateTime(e)},GI.prototype.write=function(t){this.g_(),this.mutations=this.mutations.concat(t)},GI.prototype.g_=function(){},GI),VI=(WI.prototype.C_=function(){var t=this;0===this.v_&&(this.F_("Unknown"),this.S_=this.Ra.yr("online_state_timeout",1e4,function(){return t.S_=null,t.N_("Backend didn't respond within 10 seconds."),t.F_("Offline"),Promise.resolve()}))},WI.prototype.k_=function(t){"Online"===this.state?this.F_("Unknown"):(this.v_++,1<=this.v_&&(this.M_(),this.N_("Connection failed 1 times. Most recent error: "+t.toString()),this.F_("Offline")))},WI.prototype.set=function(t){this.M_(),this.v_=0,"Online"===t&&(this.D_=!1),this.F_(t)},WI.prototype.F_=function(t){t!==this.state&&(this.state=t,this.b_(t))},WI.prototype.N_=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.D_?(j_(e),this.D_=!1):U_("OnlineStateTracker",e)},WI.prototype.M_=function(){null!==this.S_&&(this.S_.cancel(),this.S_=null)},WI),qI=(BI.prototype.start=function(){return this.enableNetwork()},BI.prototype.enableNetwork=function(){return this.networkEnabled=!0,this.el()},BI.prototype.el=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.W_()?(this.sl()?this.il():this.K_.set("Unknown"),[4,this.nl()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},BI.prototype.disableNetwork=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Offline"),[2]}})})},BI.prototype.rl=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return[4,this.J_.stop()];case 1:return t.sent(),[4,this.G_.stop()];case 2:return t.sent(),0<this.O_.length&&(U_("RemoteStore","Stopping write stream with "+this.O_.length+" pending writes"),this.O_=[]),this.hl(),[2]}})})},BI.prototype.Vo=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return U_("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.U_.Vo(),this.K_.set("Unknown"),[2]}})})},BI.prototype.listen=function(t){this.L_.has(t.targetId)||(this.L_.set(t.targetId,t),this.sl()?this.il():this.G_.Qc()&&this.ol(t))},BI.prototype.al=function(t){this.L_.delete(t),this.G_.Qc()&&this.ul(t),0===this.L_.size&&(this.G_.Qc()?this.G_.Kc():this.W_()&&this.K_.set("Unknown"))},BI.prototype.si=function(t){return this.L_.get(t)||null},BI.prototype.ei=function(t){return this.cl.ei(t)},BI.prototype.ol=function(t){this.B_.Ns(t.targetId),this.G_.r_(t)},BI.prototype.ul=function(t){this.B_.Ns(t),this.G_.h_(t)},BI.prototype.il=function(){this.B_=new b_(this),this.G_.start(),this.K_.C_()},BI.prototype.sl=function(){return this.W_()&&!this.G_.Uc()&&0<this.L_.size},BI.prototype.W_=function(){return!this.q_&&this.isPrimary&&this.networkEnabled},BI.prototype.hl=function(){this.B_=null},BI.prototype.z_=function(){return zs(this,void 0,void 0,function(){var n=this;return Ks(this,function(t){return this.L_.forEach(function(t,e){n.ol(t)}),[2]})})},BI.prototype.H_=function(e){return zs(this,void 0,void 0,function(){return Ks(this,function(t){return this.hl(),this.sl()?(this.K_.k_(e),this.il()):this.K_.set("Unknown"),[2]})})},BI.prototype.Y_=function(i,o){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:if(this.K_.set("Online"),!(i instanceof f_&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this._l(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),U_("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.ll(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof h_?this.B_.qs(i):i instanceof l_?this.B_.Hs(i):this.B_.Ws(i),o.isEqual(Og.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.x_._h()];case 8:return n=t.sent(),0<=o.S(n)?[4,this.dl(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return U_("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.ll(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},BI.prototype.ll=function(n,r){return zs(this,void 0,void 0,function(){var e=this;return Ks(this,function(t){switch(t.label){case 0:if(!FE(n))throw n;return this.q_=!0,[4,this.rl()];case 1:return t.sent(),this.K_.set("Offline"),r=r||function(){return e.x_._h()},this.Ra.lo(function(){return zs(e,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return U_("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.q_=!1,[4,this.el()];case 2:return t.sent(),[2]}})})}),[2]}})})},BI.prototype.fl=function(e){var n=this;return e().catch(function(t){return n.ll(t,e)})},BI.prototype.dl=function(r){var i=this,t=this.B_.Xs(r);return t.as.forEach(function(t,e){var n;0<t.resumeToken.rt()&&(n=i.L_.get(e))&&i.L_.set(e,n.we(t.resumeToken,r))}),t.us.forEach(function(t){var e,n=i.L_.get(t);n&&(i.L_.set(t,n.we($g.ht,n.Ee)),i.ul(t),e=new Rb(n.target,t,1,n.sequenceNumber),i.ol(e))}),this.cl.xu(t)},BI.prototype._l=function(o){return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.L_.has(i)?[4,this.cl.Tl(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.L_.delete(i),this.B_.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},BI.prototype.nl=function(){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:e=0<this.O_.length?this.O_[this.O_.length-1].batchId:-1,t.label=1;case 1:if(!this.El())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.x_.Bu(e)];case 3:return null===(n=t.sent())?(0===this.O_.length&&this.J_.Kc(),[3,7]):(e=n.batchId,this.Il(n),[3,6]);case 4:return r=t.sent(),[4,this.ll(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.wl()&&this.Rl(),[2]}})})},BI.prototype.El=function(){return this.W_()&&this.O_.length<10},BI.prototype.Al=function(){return this.O_.length},BI.prototype.Il=function(t){this.O_.push(t),this.J_.Qc()&&this.J_.a_&&this.J_.u_(t.mutations)},BI.prototype.wl=function(){return this.W_()&&!this.J_.Uc()&&0<this.O_.length},BI.prototype.Rl=function(){this.J_.start()},BI.prototype.X_=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){return this.J_.l_(),[2]})})},BI.prototype.tl=function(){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){for(e=0,n=this.O_;e<n.length;e++)r=n[e],this.J_.u_(r.mutations);return[2]})})},BI.prototype.c_=function(i,o){return zs(this,void 0,void 0,function(){var e,n,r=this;return Ks(this,function(t){switch(t.label){case 0:return e=this.O_.shift(),n=$_.from(e,i,o),[4,this.fl(function(){return r.cl.ml(n)})];case 1:return t.sent(),[4,this.nl()];case 2:return t.sent(),[2]}})})},BI.prototype.Z_=function(e){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return e&&this.J_.a_?[4,this.Pl(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.wl()&&this.Rl(),[2]}})})},BI.prototype.Pl=function(i){return zs(this,void 0,void 0,function(){var e,n,r=this;return Ks(this,function(t){switch(t.label){case 0:return Hb(n=i.code)&&n!==Ig.ABORTED?(e=this.O_.shift(),this.J_.jc(),[4,this.fl(function(){return r.cl.Vl(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.nl()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},BI.prototype.gl=function(){return new jI(this.w_)},BI.prototype.j_=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.rl()];case 1:return t.sent(),this.K_.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},BI.prototype.pl=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.W_()?(U_("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},BI.prototype.yl=function(e){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:[4,this.rl()];case 3:t.sent(),this.K_.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},BI);function BI(t,e,n,r,i){var o,s,a,u,c,h,l=this;this.x_=t,this.w_=e,this.Ra=n,this.O_=[],this.L_=new Map,this.B_=null,this.networkEnabled=!1,this.isPrimary=!1,this.q_=!1,this.U_=i,this.U_.Q_(function(t){n.co(function(){return zs(l,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.W_()?(U_("RemoteStore","Restarting streams for network reachability change."),[4,this.j_()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.K_=new VI(n,r),this.G_=(u=this.w_,c=n,h={s_:this.z_.bind(this),Jc:this.H_.bind(this),n_:this.Y_.bind(this)},new MI(c,u.Oc,u.credentials,u.serializer,h)),this.J_=(o=this.w_,s=n,a={s_:this.X_.bind(this),Jc:this.Z_.bind(this),__:this.tl.bind(this),c_:this.c_.bind(this)},new FI(s,o.Oc,o.credentials,o.serializer,a))}function WI(t,e){this.Ra=t,this.b_=e,this.state="Unknown",this.v_=0,this.S_=null,this.D_=!0}function GI(t){this.w_=t,this.R_=new Map,this.mutations=[],this.A_=!1,this.m_=null,this.P_=new Set}function HI(t,e,n){var r=this;return(r=PI.call(this)||this).Oc=t,r.credentials=e,r.serializer=n,r.f_=!1,r}function zI(t,e,n,r,i){var o=this;return(o=DI.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.o_=!1,o.lastStreamToken=$g.ht,o}function KI(t,e,n,r,i){var o=this;return(o=xI.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function QI(t,e,n,r,i,o){this.Tr=t,this.$c=n,this.Oc=r,this.Lc=i,this.listener=o,this.state=0,this.Bc=0,this.qc=null,this.stream=null,this.Na=new gw(t,e)}function YI(t,e){return"firestore_clients_"+t+"_"+e}function XI(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function JI(t,e){return"firestore_targets_"+t+"_"+e}function $I(t){this.key=t}function ZI(t){this.key=t}function tS(t,e,n){this.query=t,this.targetId=e,this.view=n}function eS(t){this.key=t,this.Qd=!1}function nS(){this.bf=void 0,this.vf=[]}var rS,iS,oS=(MS.bl=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Sg(r.error.code,r.error.message)),i?new MS(t,e,r.state,o):(j_("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},MS.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},MS),sS=(LS.bl=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Sg(n.error.code,n.error.message)),r?new LS(t,n.state,i):(j_("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},LS.prototype.vl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},LS),aS=(xS.bl=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=c_,o=0;r&&o<n.activeTargetIds.length;++o)r=nm(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new xS(t,i):(j_("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},xS),uS=(DS.bl=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new DS(e.clientId,e.onlineState):(j_("SharedClientState","Failed to parse online state: "+t),null)},DS),cS=(PS.prototype.Sl=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},PS.prototype.Dl=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},PS.prototype.vl=function(){var t={activeTargetIds:this.activeTargetIds.W(),updateTimeMs:Date.now()};return JSON.stringify(t)},PS),hS=(OS.zh=function(t){return!(!t.window||null==t.window.localStorage)},OS.prototype.start=function(){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Ks(this,function(t){switch(t.label){case 0:return[4,this.cl.So()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Cl&&(o=this.getItem(YI(this.persistenceKey,i)))&&(s=aS.bl(i,o))&&(this.kl=this.kl.Ae(s.clientId,s));for(this.Ul(),(a=this.storage.getItem(this.ql))&&(u=this.Ql(a))&&this.Wl(u),c=0,h=this.Ml;c<h.length;c++)l=h[c],this.Nl(l);return this.Ml=[],this.platform.window.addEventListener("unload",function(){return f.Vo()}),this.ho=!0,[2]}})})},OS.prototype.lr=function(t){this.setItem(this.$l,JSON.stringify(t))},OS.prototype.jl=function(){return this.Kl(this.kl)},OS.prototype.Gl=function(n){var r=!1;return this.kl.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},OS.prototype.zl=function(t){this.Hl(t,"pending")},OS.prototype.Yl=function(t,e,n){this.Hl(t,e,n),this.Jl(t)},OS.prototype.Xl=function(t){var e,n,r="not-current";return this.Gl(t)&&(!(e=this.storage.getItem(JI(this.persistenceKey,t)))||(n=sS.bl(t,e))&&(r=n.state)),this.Zl.Sl(t),this.Ul(),r},OS.prototype.td=function(t){this.Zl.Dl(t),this.Ul()},OS.prototype.ed=function(t){return this.Zl.activeTargetIds.has(t)},OS.prototype.sd=function(t){this.removeItem(JI(this.persistenceKey,t))},OS.prototype.nd=function(t,e,n){this.rd(t,e,n)},OS.prototype.vu=function(t,e,n){var r=this;e.forEach(function(t){r.Jl(t)}),this.currentUser=t,n.forEach(function(t){r.zl(t)})},OS.prototype.hd=function(t){this.od(t)},OS.prototype.Vo=function(){this.ho&&(this.platform.window.removeEventListener("storage",this.Fl),this.removeItem(this.xl),this.ho=!1)},OS.prototype.getItem=function(t){var e=this.storage.getItem(t);return U_("SharedClientState","READ",t,e),e},OS.prototype.setItem=function(t,e){U_("SharedClientState","SET",t,e),this.storage.setItem(t,e)},OS.prototype.removeItem=function(t){U_("SharedClientState","REMOVE",t),this.storage.removeItem(t)},OS.prototype.Nl=function(a){var t=this;if(a.storageArea===this.storage){if(U_("SharedClientState","EVENT",a.key,a.newValue),a.key===this.xl)return void j_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Tr.lo(function(){return zs(t,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){if(this.ho){if(null!==a.key)if(this.Ol.test(a.key)){if(null==a.newValue)return e=this.ad(a.key),[2,this.ud(e,null)];if(n=this._d(a.key,a.newValue))return[2,this.ud(n.clientId,n)]}else if(this.Ll.test(a.key)){if(null!==a.newValue&&(r=this.ld(a.key,a.newValue)))return[2,this.dd(r)]}else if(this.Bl.test(a.key)){if(null!==a.newValue&&(i=this.fd(a.key,a.newValue)))return[2,this.Td(i)]}else if(a.key===this.ql){if(null!==a.newValue&&(o=this.Ql(a.newValue)))return[2,this.Wl(o)]}else a.key===this.$l&&(s=function(t){var e=ow.dr;if(null!=t)try{var n=JSON.parse(t);B_("number"==typeof n),e=n}catch(t){j_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==ow.dr&&this.ur(s)}else this.Ml.push(a);return[2]})})})}},Object.defineProperty(OS.prototype,"Zl",{get:function(){return this.kl.get(this.Cl)},enumerable:!0,configurable:!0}),OS.prototype.Ul=function(){this.setItem(this.xl,this.Zl.vl())},OS.prototype.Hl=function(t,e,n){var r=new oS(this.currentUser,t,e,n),i=XI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.vl())},OS.prototype.Jl=function(t){var e=XI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},OS.prototype.od=function(t){var e={clientId:this.Cl,onlineState:t};this.storage.setItem(this.ql,JSON.stringify(e))},OS.prototype.rd=function(t,e,n){var r=JI(this.persistenceKey,t),i=new sS(t,e,n);this.setItem(r,i.vl())},OS.prototype.ad=function(t){var e=this.Ol.exec(t);return e?e[1]:null},OS.prototype._d=function(t,e){var n=this.ad(t);return aS.bl(n,e)},OS.prototype.ld=function(t,e){var n=this.Ll.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return oS.bl(new bg(i),r,e)},OS.prototype.fd=function(t,e){var n=this.Bl.exec(t),r=Number(n[1]);return sS.bl(r,e)},OS.prototype.Ql=function(t){return uS.bl(t)},OS.prototype.dd=function(e){return zs(this,void 0,void 0,function(){return Ks(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.cl.Ed(e.batchId,e.state,e.error)]:(U_("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},OS.prototype.Td=function(t){return this.cl.Id(t.targetId,t.state,t.error)},OS.prototype.ud=function(t,e){var n=this,r=e?this.kl.Ae(t,e):this.kl.remove(t),i=this.Kl(this.kl),o=this.Kl(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.cl.wd(s,a).then(function(){n.kl=r})},OS.prototype.Wl=function(t){this.kl.get(t.clientId)&&this.b_(t.onlineState)},OS.prototype.Kl=function(t){var n=c_;return t.forEach(function(t,e){n=n.He(e.activeTargetIds)}),n},OS),lS=(RS.prototype.zl=function(t){},RS.prototype.Yl=function(t,e,n){},RS.prototype.Xl=function(t){return this.Rd.Sl(t),this.Ad[t]||"not-current"},RS.prototype.nd=function(t,e,n){this.Ad[t]=e},RS.prototype.td=function(t){this.Rd.Dl(t)},RS.prototype.ed=function(t){return this.Rd.activeTargetIds.has(t)},RS.prototype.sd=function(t){delete this.Ad[t]},RS.prototype.jl=function(){return this.Rd.activeTargetIds},RS.prototype.Gl=function(t){return this.Rd.activeTargetIds.has(t)},RS.prototype.start=function(){return this.Rd=new cS,Promise.resolve()},RS.prototype.vu=function(t,e,n){},RS.prototype.hd=function(t){},RS.prototype.Vo=function(){},RS.prototype.lr=function(t){},RS),fS=(Object.defineProperty(kS.prototype,"pd",{get:function(){return this.md},enumerable:!0,configurable:!0}),kS.prototype.yd=function(t,e){var a=this,u=e?e.bd:new d_,c=e?e.gd:this.gd,h=e?e.ns:this.ns,l=c,f=!1,p=this.query.oe()&&c.size===this.query.limit?c.last():null,d=this.query.ae()&&c.size===this.query.limit?c.first():null;if(t.pe(function(t,e){var n=c.get(t),r=(r=e instanceof gb?e:null)&&(a.query.matches(r)?r:null),i=!!n&&a.ns.has(n.key),o=!!r&&(r.At||a.ns.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.vd(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.se(r,p)||d&&a.query.se(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.oe()||this.query.ae())for(;l.size>this.query.limit;){var n=this.query.oe()?l.last():l.first(),l=l.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{gd:l,bd:u,Sd:f,ns:h}},kS.prototype.vd=function(t,e){return t.At&&e.hasCommittedMutations&&!e.At},kS.prototype.Ln=function(t,e,n){var o=this,r=this.gd;this.gd=t.gd,this.ns=t.ns;var i=t.bd.es();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.se(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q_()}}var r,i}),this.Dd(n);var s=e?this.Cd():[],a=0===this.Vd.size&&this.fs?1:0,u=a!==this.Pd;return this.Pd=a,0!==i.length||u?{snapshot:new v_(this.query,t.gd,r,i,t.ns,0==a,u,!1),Fd:s}:{Fd:s}},kS.prototype.Nd=function(t){return this.fs&&"Offline"===t?(this.fs=!1,this.Ln({gd:this.gd,bd:new d_,ns:this.ns,Sd:!1},!1)):{Fd:[]}},kS.prototype.kd=function(t){return!this.md.has(t)&&!!this.gd.has(t)&&!this.gd.get(t).At},kS.prototype.Dd=function(t){var e=this;t&&(t.Ts.forEach(function(t){return e.md=e.md.add(t)}),t.Es.forEach(function(t){}),t.Is.forEach(function(t){return e.md=e.md.delete(t)}),this.fs=t.fs)},kS.prototype.Cd=function(){var e=this;if(!this.fs)return[];var n=this.Vd;this.Vd=u_(),this.gd.forEach(function(t){e.kd(t.key)&&(e.Vd=e.Vd.add(t.key))});var r=[];return n.forEach(function(t){e.Vd.has(t)||r.push(new ZI(t))}),this.Vd.forEach(function(t){n.has(t)||r.push(new $I(t))}),r},kS.prototype.Md=function(t){this.md=t.ju,this.Vd=u_();var e=this.yd(t.documents);return this.Ln(e,!0)},kS.prototype.xd=function(){return v_.os(this.query,this.gd,this.ns,0===this.Pd)},kS),pS=(AS.prototype.Od=function(){this.Ld()},AS.prototype.Ld=function(){var t=this;this.Na.gr(function(){return zs(t,void 0,void 0,function(){var e,n,r=this;return Ks(this,function(t){return e=new jI(this.w_),(n=this.Bd(e))&&n.then(function(t){r.Ra.co(function(){return e.commit().then(function(){r.Pa.resolve(t)}).catch(function(t){r.qd(t)})})}).catch(function(t){r.qd(t)}),[2]})})})},AS.prototype.Bd=function(t){try{var e=this.updateFunction(t);return!tm(e)&&e.catch&&e.then?e:(this.Pa.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Pa.reject(t),null}},AS.prototype.qd=function(t){var e=this;0<this.$d&&this.Ud(t)?(--this.$d,this.Ra.co(function(){return e.Ld(),Promise.resolve()})):this.Pa.reject(t)},AS.prototype.Ud=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Hb(e)},AS),dS=(Object.defineProperty(NS.prototype,"if",{get:function(){return!0},enumerable:!0,configurable:!0}),NS.prototype.subscribe=function(t){this.Gd=t},NS.prototype.listen=function(s){return zs(this,void 0,void 0,function(){var e,n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return this.nf("listen()"),(r=this.zd.get(s))?(e=r.targetId,this.jd.Xl(e),n=r.view.xd(),[3,4]):[3,1];case 1:return[4,this.x_.Uu(s.ee())];case 2:return i=t.sent(),o=this.jd.Xl(i.targetId),e=i.targetId,[4,this.rf(s,e,"current"===o)];case 3:n=t.sent(),this.if&&this.Wd.listen(i),t.label=4;case 4:return[2,n]}})})},NS.prototype.rf=function(a,u,c){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return[4,this.x_.Wu(a,!0)];case 1:return e=t.sent(),n=new fS(a,e.ju),r=n.yd(e.documents),i=g_.ds(u,c&&"Offline"!==this.onlineState),o=n.Ln(r,this.if,i),this.hf(u,o.Fd),s=new tS(a,u,n),[2,(this.zd.set(a,s),this.Hd.has(u)?this.Hd.get(u).push(a):this.Hd.set(u,[a]),o.snapshot)]}})})},NS.prototype.al=function(i){return zs(this,void 0,void 0,function(){var e,n,r=this;return Ks(this,function(t){switch(t.label){case 0:return this.nf("unlisten()"),e=this.zd.get(i),1<(n=this.Hd.get(e.targetId)).length?[2,(this.Hd.set(e.targetId,n.filter(function(t){return!t.isEqual(i)})),void this.zd.delete(i))]:this.if?(this.jd.td(e.targetId),this.jd.Gl(e.targetId)?[3,2]:[4,this.x_.Qu(e.targetId,!1).then(function(){r.jd.sd(e.targetId),r.Wd.al(e.targetId),r.af(e.targetId)}).catch(lT)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.af(e.targetId),[4,this.x_.Qu(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},NS.prototype.write=function(i,o){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:this.nf("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.x_.Fu(i)];case 2:return e=t.sent(),this.jd.zl(e.batchId),this.uf(e.batchId,o),[4,this.cf(e.Dn)];case 3:return t.sent(),[4,this.Wd.nl()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=YE(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},NS.prototype.runTransaction=function(t,e,n){new pS(t,this.w_,e,n).Od()},NS.prototype.xu=function(n){return zs(this,void 0,void 0,function(){var e,r=this;return Ks(this,function(t){switch(t.label){case 0:this.nf("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.x_.xu(n)];case 2:return e=t.sent(),n.as.forEach(function(t,e){var n=r.Xd.get(e);n&&(B_(t.Ts.size+t.Es.size+t.Is.size<=1),0<t.Ts.size?n.Qd=!0:0<t.Es.size?B_(n.Qd):0<t.Is.size&&(B_(n.Qd),n.Qd=!1))}),[4,this.cf(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,lT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},NS.prototype.Nd=function(r,t){this.nf("applyOnlineStateChange()");var i=[];this.zd.forEach(function(t,e){var n=e.view.Nd(r);n.snapshot&&i.push(n.snapshot)}),this.Gd._f(r),this.Gd.n_(i),this.onlineState=r},NS.prototype.Tl=function(a,u){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Ks(this,function(t){switch(t.label){case 0:return this.nf("rejectListens()"),this.jd.nd(a,"rejected",u),e=this.Xd.get(a),(n=e&&e.key)?(r=(r=new Kb(Kg.N)).Ae(n,new mb(n,Og.min())),i=u_().add(n),o=new y_(Og.min(),new Map,new t_(H_),r,i),[4,this.xu(o)]):[3,2];case 1:return t.sent(),this.Jd=this.Jd.remove(n),this.Xd.delete(a),this.lf(),[3,4];case 2:return[4,this.x_.Qu(a,!1).then(function(){return s.af(a,u)}).catch(lT)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},NS.prototype.ml=function(r){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:this.nf("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.x_.Nu(r)];case 2:return n=t.sent(),this.df(e,null),this.ff(e),this.jd.Yl(e,"acknowledged"),[4,this.cf(n)];case 3:return t.sent(),[3,6];case 4:return[4,lT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},NS.prototype.Vl=function(n,r){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:this.nf("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.x_.Mu(n)];case 2:return e=t.sent(),this.df(n,r),this.ff(n),this.jd.Yl(n,"rejected",r),[4,this.cf(e)];case 3:return t.sent(),[3,6];case 4:return[4,lT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},NS.prototype.Tf=function(o){return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:this.Wd.W_()||U_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.x_.ta()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.ef.get(e)||[]).push(o),this.ef.set(e,n),[3,4]);case 3:return r=t.sent(),i=YE(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},NS.prototype.ff=function(t){(this.ef.get(t)||[]).forEach(function(t){t.resolve()}),this.ef.delete(t)},NS.prototype.Ef=function(e){this.ef.forEach(function(t){t.forEach(function(t){t.reject(new Sg(Ig.CANCELLED,e))})}),this.ef.clear()},NS.prototype.uf=function(t,e){var n=this.tf[this.currentUser.s()];n=(n=n||new Kb(H_)).Ae(t,e),this.tf[this.currentUser.s()]=n},NS.prototype.df=function(t,e){var n,r=this.tf[this.currentUser.s()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.tf[this.currentUser.s()]=r)},NS.prototype.af=function(t,e){var n=this;void 0===e&&(e=null),this.jd.td(t);for(var r=0,i=this.Hd.get(t);r<i.length;r++){var o=i[r];this.zd.delete(o),e&&this.Gd.If(o,e)}this.Hd.delete(t),this.if&&this.Zd.ic(t).forEach(function(t){n.Zd.Ch(t)||n.wf(t)})},NS.prototype.wf=function(t){var e=this.Jd.get(t);null!==e&&(this.Wd.al(e),this.Jd=this.Jd.remove(t),this.Xd.delete(e),this.lf())},NS.prototype.hf=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof $I?(this.Zd.yh(i.key,t),this.Rf(i)):i instanceof ZI?(U_("SyncEngine","Document no longer in limbo: "+i.key),this.Zd.vh(i.key,t),this.Zd.Ch(i.key)||this.wf(i.key)):q_()}},NS.prototype.Rf=function(t){var e=t.key;this.Jd.get(e)||(U_("SyncEngine","New document in limbo: "+e),this.Yd.push(e),this.lf())},NS.prototype.lf=function(){for(;0<this.Yd.length&&this.Jd.size<this.Kd;){var t=this.Yd.shift(),e=this.sf.next();this.Xd.set(e,new eS(t)),this.Jd=this.Jd.Ae(t,e),this.Wd.listen(new Rb(wb.Wt(t.path).ee(),e,2,ow.dr))}},NS.prototype.Af=function(){return this.Jd},NS.prototype.mf=function(){return this.Yd},NS.prototype.cf=function(r,u){return zs(this,void 0,void 0,function(){var o,s,e,a=this;return Ks(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.zd.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.yd(r);return n.Sd?a.x_.Wu(i.query,!1).then(function(t){var e=t.documents;return i.view.yd(e,n)}):n}).then(function(t){var e,n=u&&u.as.get(i.targetId),r=i.view.Ln(t,a.if,n);a.hf(i.targetId,r.Fd),r.snapshot&&(a.if&&a.jd.nd(i.targetId,r.snapshot.fromCache?"not-current":"current"),o.push(r.snapshot),e=iw.ar(i.targetId,r.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.Gd.n_(o),[4,this.x_.Lu(s)];case 2:return t.sent(),[2]}})})},NS.prototype.nf=function(t){},NS.prototype.pl=function(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:[4,this.x_.vu(n)];case 1:return e=t.sent(),this.currentUser=n,this.Ef("'waitForPendingWrites' promise is rejected due to a user change."),this.jd.vu(n,e.Du,e.Cu),[4,this.cf(e.Su)];case 2:t.sent(),t.label=3;case 3:return[4,this.Wd.pl()];case 4:return t.sent(),[2]}})})},NS.prototype.enableNetwork=function(){return this.Wd.enableNetwork()},NS.prototype.disableNetwork=function(){return this.Wd.disableNetwork()},NS.prototype.ei=function(t){var e=this.Xd.get(t);if(e&&e.Qd)return u_().add(e.key);var n=u_(),r=this.Hd.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++)var s=o[i],a=this.zd.get(s),n=n.He(a.view.pd);return n},NS),vS=(Gs(CS,rS=dS),Object.defineProperty(CS.prototype,"if",{get:function(){return!0===this.Pf},enumerable:!0,configurable:!0}),CS.prototype.enableNetwork=function(){return this.x_.uo(!0),rS.prototype.enableNetwork.call(this)},CS.prototype.disableNetwork=function(){return this.x_.uo(!1),rS.prototype.disableNetwork.call(this)},CS.prototype.Vf=function(r){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,this.x_.Wu(r.query,!0)];case 1:return e=t.sent(),n=r.view.Md(e),[2,(this.Pf&&this.hf(r.targetId,n.Fd),n)]}})})},CS.prototype.Nd=function(t,e){this.if&&0===e&&(rS.prototype.Nd.call(this,t,e),this.jd.hd(t)),this.if||1!==e||rS.prototype.Nd.call(this,t,e)},CS.prototype.Ed=function(n,r,i){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return this.nf("applyBatchState()"),[4,this.x_.Gu(n)];case 1:return null===(e=t.sent())?[3,6]:"pending"!==r?[3,3]:[4,this.Wd.nl()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.df(n,i||null),this.x_.zu(n)):q_(),t.label=4;case 4:return[4,this.cf(e)];case 5:return t.sent(),[3,7];case 6:U_("SyncEngine","Cannot apply mutation batch with id: "+n),t.label=7;case 7:return[2]}})})},CS.prototype.yl=function(c){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return Ks(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.Pf?[3,3]:(e=this.jd.jl(),[4,this.gf(e.W(),!0)]);case 1:return n=t.sent(),this.Pf=!0,[4,this.Wd.yl(!0)];case 2:for(t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.Wd.listen(o);return[3,7];case 3:return!1!==c||!1===this.Pf?[3,7]:(s=[],a=Promise.resolve(),this.Hd.forEach(function(t,e){u.jd.ed(e)?s.push(e):a=a.then(function(){return u.af(e),u.x_.Qu(e,!0)}),u.Wd.al(e)}),[4,a]);case 4:return t.sent(),[4,this.gf(s,!1)];case 5:return t.sent(),this.pf(),this.Pf=!1,[4,this.Wd.yl(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},CS.prototype.pf=function(){var n=this;this.Xd.forEach(function(t,e){n.Wd.al(e)}),this.Zd.nc(),this.Xd=new Map,this.Jd=new Kb(Kg.N)},CS.prototype.gf=function(d,t){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return Ks(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.Hd.get(o))&&0!==a.length?[4,this.x_.Uu(a[0].ee())]:[3,7]):[3,13];case 2:s=t.sent(),u=0,c=a,t.label=3;case 3:return u<c.length?(h=c[u],l=this.zd.get(h),[4,this.Vf(l)]):[3,6];case 4:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.x_.Hu(o)];case 8:return p=t.sent(),[4,this.x_.Uu(p)];case 9:return s=t.sent(),[4,this.rf(this.yf(p),o,!1)];case 10:t.sent(),t.label=11;case 11:e.push(s),t.label=12;case 12:return r++,[3,1];case 13:return[2,(this.Gd.n_(n),e)]}})})},CS.prototype.yf=function(t){return new wb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},CS.prototype.So=function(){return this.x_.So()},CS.prototype.Id=function(r,i,o){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return this.Pf?(U_("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.Hd.has(r))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.x_.Kr()];case 3:return e=t.sent(),n=y_.ls(r,"current"===i),[4,this.cf(e,n)];case 4:return t.sent(),[3,8];case 5:return[4,this.x_.Qu(r,!0)];case 6:return t.sent(),this.af(r,o),[3,8];case 7:q_(),t.label=8;case 8:return[2]}})})},CS.prototype.wd=function(f,p){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Ks(this,function(t){switch(t.label){case 0:if(!this.Pf)return[3,10];e=0,n=f,t.label=1;case 1:return e<n.length?(r=n[e],this.Hd.has(r)?(U_("SyncEngine","Adding an already active target "+r),[3,5]):[4,this.x_.Hu(r)]):[3,6];case 2:return i=t.sent(),[4,this.x_.Uu(i)];case 3:return o=t.sent(),[4,this.rf(this.yf(i),o.targetId,!1)];case 4:t.sent(),this.Wd.listen(o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Ks(this,function(t){switch(t.label){case 0:return a.Hd.has(e)?[4,a.x_.Qu(e,!1).then(function(){l.Wd.al(e),l.af(e)}).catch(lT)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,s(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},CS),yS=(SS.prototype.listen=function(a){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.Sf.get(e))||(n=!0,r=new nS),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.cl.listen(e)];case 2:return i.bf=t.sent(),[3,4];case 3:return o=t.sent(),s=YE(o,"Initialization of query '"+a.query+"' failed"),[2,void a.onError(s)];case 4:return this.Sf.set(e,r),r.vf.push(a),a.Nd(this.onlineState),r.bf&&a.Cf(r.bf)&&this.Ff(),[2]}})})},SS.prototype.al=function(o){return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){return e=o.query,n=!1,(r=this.Sf.get(e))&&0<=(i=r.vf.indexOf(o))&&(r.vf.splice(i,1),n=0===r.vf.length),n?[2,(this.Sf.delete(e),this.cl.al(e))]:[2]})})},SS.prototype.n_=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Sf.get(o);if(s){for(var a=0,u=s.vf;a<u.length;a++)u[a].Cf(i)&&(e=!0);s.bf=i}}e&&this.Ff()},SS.prototype.If=function(t,e){var n=this.Sf.get(t);if(n)for(var r=0,i=n.vf;r<i.length;r++)i[r].onError(e);this.Sf.delete(t)},SS.prototype._f=function(i){this.onlineState=i;var o=!1;this.Sf.forEach(function(t,e){for(var n=0,r=e.vf;n<r.length;n++)r[n].Nd(i)&&(o=!0)}),o&&this.Ff()},SS.prototype.Nf=function(t){this.Df.add(t),t.next()},SS.prototype.kf=function(t){this.Df.delete(t)},SS.prototype.Ff=function(){this.Df.forEach(function(t){t.next()})},SS),gS=(IS.prototype.Cf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new v_(t.query,t.docs,t.ss,e,t.ns,t.fromCache,t.rs,!0)}var o=!1;return this.xf?this.Of(t)&&(this.Mf.next(t),o=!0):this.Lf(t,this.onlineState)&&(this.Bf(t),o=!0),this.$f=t,o},IS.prototype.onError=function(t){this.Mf.error(t)},IS.prototype.Nd=function(t){this.onlineState=t;var e=!1;return this.$f&&!this.xf&&this.Lf(this.$f,t)&&(this.Bf(this.$f),e=!0),e},IS.prototype.Lf=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.qf&&n||t.docs.B()&&"Offline"!==e)},IS.prototype.Of=function(t){if(0<t.docChanges.length)return!0;var e=this.$f&&this.$f.hasPendingWrites!==t.hasPendingWrites;return!(!t.rs&&!e)&&!0===this.options.includeMetadataChanges},IS.prototype.Bf=function(t){t=v_.os(t.query,t.docs,t.ns,t.fromCache),this.xf=!0,this.Mf.next(t)},IS),mS=(TS.prototype.bu=function(t){this.Uf=t},TS.prototype.Zn=function(e,r,i,o){var s=this;return r.te()||i.isEqual(Og.min())?this.Qf(e,r):this.Uf.Yn(e,o).next(function(t){var n=s.Wf(r,t);return(r.oe()||r.ae())&&s.Sd(r.Bt,n,o,i)?s.Qf(e,r):(F_()<=za.DEBUG&&U_("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Uf.Zn(e,r,i).next(function(e){return n.forEach(function(t){e=e.Ae(t.key,t)}),e}))})},TS.prototype.Wf=function(n,t){var r=new t_(function(t,e){return n.se(t,e)});return t.forEach(function(t,e){e instanceof gb&&n.matches(e)&&(r=r.add(e))}),r},TS.prototype.Sd=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.S(r))},TS.prototype.Qf=function(t,e){return F_()<=za.DEBUG&&U_("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Uf.Zn(t,e,Og.min())},TS),bS=(ES.prototype.Ho=function(t){return Z_.resolve(0===this.Wn.length)},ES.prototype.Yo=function(t,e,n,r){var i=this.jf;this.jf++,0<this.Wn.length&&this.Wn[this.Wn.length-1];var o=new J_(i,e,n,r);this.Wn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Kf=this.Kf.add(new pT(u.key,i)),this.jn.Dr(t,u.key.path.$())}return Z_.resolve(o)},ES.prototype.Jo=function(t,e){return Z_.resolve(this.Gf(e))},ES.prototype.Zo=function(t,e){var n=e+1,r=this.zf(n),i=r<0?0:r;return Z_.resolve(this.Wn.length>i?this.Wn[i]:null)},ES.prototype.ta=function(){return Z_.resolve(0===this.Wn.length?-1:this.jf-1)},ES.prototype.ea=function(t){return Z_.resolve(this.Wn.slice())},ES.prototype.Gn=function(t,e){var n=this,r=new pT(e,0),i=new pT(e,Number.POSITIVE_INFINITY),o=[];return this.Kf.Ke([r,i],function(t){var e=n.Gf(t.hc);o.push(e)}),Z_.resolve(o)},ES.prototype.Xn=function(t,e){var r=this,i=new t_(H_);return e.forEach(function(t){var e=new pT(t,0),n=new pT(t,Number.POSITIVE_INFINITY);r.Kf.Ke([e,n],function(t){i=i.add(t.hc)})}),Z_.resolve(this.Hf(i))},ES.prototype.nr=function(t,e){var n=e.path,r=n.length+1,i=n;Kg.et(i)||(i=i.child(""));var o=new pT(new Kg(i),0),s=new t_(H_);return this.Kf.Ge(function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.hc)),!0)},o),Z_.resolve(this.Hf(s))},ES.prototype.Hf=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Gf(t);null!==e&&r.push(e)}),r},ES.prototype.ia=function(n,r){var i=this;B_(0===this.Yf(r.batchId,"removed")),this.Wn.shift();var o=this.Kf;return Z_.forEach(r.mutations,function(t){var e=new pT(t.key,r.batchId);return o=o.delete(e),i.hh.Uo(n,t.key)}).next(function(){i.Kf=o})},ES.prototype.na=function(t){},ES.prototype.Ch=function(t,e){var n=new pT(e,0),r=this.Kf.ze(n);return Z_.resolve(e.isEqual(r&&r.key))},ES.prototype.ra=function(t){return this.Wn.length,Z_.resolve()},ES.prototype.Yf=function(t,e){return this.zf(t)},ES.prototype.zf=function(t){return 0===this.Wn.length?0:t-this.Wn[0].batchId},ES.prototype.Gf=function(t){var e=this.zf(t);return e<0||e>=this.Wn.length?null:this.Wn[e]},ES),_S=(wS.prototype.Nn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Jf(e);return this.docs=this.docs.Ae(r,{$r:e,size:s,readTime:n}),this.size+=s-o,this.jn.Dr(t,r.path.$())},wS.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},wS.prototype.xn=function(t,e){var n=this.docs.get(e);return Z_.resolve(n?n.$r:null)},wS.prototype.getEntries=function(t,e){var n=this,r=n_;return e.forEach(function(t){var e=n.docs.get(t);r=r.Ae(t,e?e.$r:null)}),Z_.resolve(r)},wS.prototype.Zn=function(t,e,n){for(var r=o_,i=new Kg(e.path.child("")),o=this.docs.ve(i);o.ke();){var s=o.Ne(),a=s.key,u=s.value,c=u.$r,h=u.readTime;if(!e.path.q(a.path))break;h.S(n)<=0||c instanceof gb&&e.matches(c)&&(r=r.Ae(c.key,c))}return Z_.resolve(r)},wS.prototype.Xf=function(t,e){return Z_.forEach(this.docs,function(t){return e(t)})},wS.prototype.Yr=function(t){return new wS.Jr(this)},wS.prototype.Zr=function(t){return Z_.resolve(this.size)},wS);function wS(t,e){this.jn=t,this.Jf=e,this.docs=new Kb(Kg.N),this.size=0}function ES(t,e){this.jn=t,this.hh=e,this.Wn=[],this.jf=1,this.Kf=new t_(pT.Ju)}function TS(){}function IS(t,e,n){this.query=t,this.Mf=e,this.xf=!1,this.$f=null,this.onlineState="Unknown",this.options=n||{}}function SS(t){this.cl=t,this.Sf=new X_(function(t){return t.canonicalId()}),this.onlineState="Unknown",this.Df=new Set,this.cl.subscribe(this)}function CS(t,e,n,r,i,o){var s=this;return(s=rS.call(this,t,e,n,r,i,o)||this).x_=t,s.Pf=void 0,s}function NS(t,e,n,r,i,o){this.x_=t,this.Wd=e,this.w_=n,this.jd=r,this.currentUser=i,this.Kd=o,this.Gd=null,this.zd=new X_(function(t){return t.canonicalId()}),this.Hd=new Map,this.Yd=[],this.Jd=new Kb(Kg.N),this.Xd=new Map,this.Zd=new fT,this.tf={},this.ef=new Map,this.sf=Fw.rh(),this.onlineState="Unknown"}function AS(t,e,n,r){this.Ra=t,this.w_=e,this.updateFunction=n,this.Pa=r,this.$d=5,this.Na=new gw(this.Ra,"transaction_retry")}function kS(t,e){this.query=t,this.md=e,this.Pd=null,this.fs=!1,this.Vd=u_(),this.ns=u_(),this.gd=new p_(t.se.bind(t))}function RS(){this.Rd=new cS,this.Ad={},this.cl=null,this.b_=null,this.ur=null}function OS(t,e,n,r,i){if(this.Tr=t,this.platform=e,this.persistenceKey=n,this.Cl=r,this.cl=null,this.b_=null,this.ur=null,this.Fl=this.Nl.bind(this),this.kl=new Kb(H_),this.ho=!1,this.Ml=[],!OS.zh(this.platform))throw new Sg(Ig.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.xl=YI(this.persistenceKey,this.Cl),this.$l="firestore_sequence_number_"+this.persistenceKey,this.kl=this.kl.Ae(this.Cl,new cS),this.Ol=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ll=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Bl=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ql="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Fl)}function PS(){this.activeTargetIds=c_}function DS(t,e){this.clientId=t,this.onlineState=e}function xS(t,e){this.clientId=t,this.activeTargetIds=e}function LS(t,e,n){this.targetId=t,this.state=e,this.error=n}function MS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function FS(t){var e=this;return(e=iS.call(this)||this).th=t,e}_S.Jr=(Gs(FS,iS=tw),FS.prototype.Ln=function(n){var r=this,i=[];return this.Dn.forEach(function(t,e){e?i.push(r.th.Nn(n,e,r.readTime)):r.th.Mn(t)}),Z_.vn(i)},FS.prototype.$n=function(t,e){return this.th.xn(t,e)},FS.prototype.On=function(t,e){return this.th.getEntries(t,e)},FS);var US,jS,VS=(nC.prototype.js=function(t,n){return this.Zf.forEach(function(t,e){return n(e)}),Z_.resolve()},nC.prototype._h=function(t){return Z_.resolve(this.lastRemoteSnapshotVersion)},nC.prototype.lh=function(t){return Z_.resolve(this.tT)},nC.prototype.oh=function(t){return this.highestTargetId=this.sT.next(),Z_.resolve(this.highestTargetId)},nC.prototype.dh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.tT&&(this.tT=e),Z_.resolve()},nC.prototype.Th=function(t){this.Zf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.sT=new Fw(e),this.highestTargetId=e),t.sequenceNumber>this.tT&&(this.tT=t.sequenceNumber)},nC.prototype.fh=function(t,e){return this.Th(e),this.targetCount+=1,Z_.resolve()},nC.prototype.Ih=function(t,e){return this.Th(e),Z_.resolve()},nC.prototype.wh=function(t,e){return this.Zf.delete(e.target),this.eT.ic(e.targetId),--this.targetCount,Z_.resolve()},nC.prototype.Ah=function(n,r,i){var o=this,s=0,a=[];return this.Zf.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Zf.delete(t),a.push(o.Rh(n,e.targetId)),s++)}),Z_.vn(a).next(function(){return s})},nC.prototype.Vh=function(t){return Z_.resolve(this.targetCount)},nC.prototype.gh=function(t,e){var n=this.Zf.get(e)||null;return Z_.resolve(n)},nC.prototype.ph=function(t,e,n){return this.eT.tc(e,n),Z_.resolve()},nC.prototype.bh=function(e,t,n){this.eT.sc(t,n);var r=this.persistence.hh,i=[];return r&&t.forEach(function(t){i.push(r.Uo(e,t))}),Z_.vn(i)},nC.prototype.Rh=function(t,e){return this.eT.ic(e),Z_.resolve()},nC.prototype.Sh=function(t,e){var n=this.eT.rc(e);return Z_.resolve(n)},nC.prototype.Ch=function(t,e){return Z_.resolve(this.eT.Ch(e))},nC),qS=(eC.prototype.start=function(){return Promise.resolve()},eC.prototype.Vo=function(){return this.Uh=!1,Promise.resolve()},Object.defineProperty(eC.prototype,"ho",{get:function(){return this.Uh},enumerable:!0,configurable:!0}),eC.prototype.oo=function(){},eC.prototype.ko=function(){return this.jn},eC.prototype.Do=function(t){var e=this.iT[t.s()];return e||(e=new bS(this.jn,this.hh),this.iT[t.s()]=e),e},eC.prototype.Fo=function(){return this.Jh},eC.prototype.No=function(){return this.Qn},eC.prototype.runTransaction=function(t,e,n){var r=this;U_("MemoryPersistence","Starting transaction:",t);var i=new BS(this.qh.next());return this.hh.rT(),n(i).next(function(t){return r.hh.hT(i).next(function(){return t})}).yn().then(function(t){return i.Un(),t})},eC.prototype.oT=function(e,n){return Z_.Sn(Object.values(this.iT).map(function(t){return function(){return t.Ch(e,n)}}))},eC),BS=(Gs(tC,jS=nw),tC),WS=(ZS.cT=function(t){return new ZS(t)},Object.defineProperty(ZS.prototype,"_T",{get:function(){if(this.uT)return this.uT;throw q_()},enumerable:!0,configurable:!0}),ZS.prototype.yh=function(t,e,n){return this.aT.yh(n,e),this._T.delete(n),Z_.resolve()},ZS.prototype.vh=function(t,e,n){return this.aT.vh(n,e),this._T.add(n),Z_.resolve()},ZS.prototype.Uo=function(t,e){return this._T.add(e),Z_.resolve()},ZS.prototype.removeTarget=function(t,e){var n=this;this.aT.ic(e.targetId).forEach(function(t){return n._T.add(t)});var r=this.persistence.Fo();return r.Sh(t,e.targetId).next(function(t){t.forEach(function(t){return n._T.add(t)})}).next(function(){return r.wh(t,e)})},ZS.prototype.rT=function(){this.uT=new Set},ZS.prototype.hT=function(t){var n=this,r=this.persistence.No().Yr();return Z_.forEach(this._T,function(e){return n.lT(t,e).next(function(t){t||r.Mn(e)})}).next(function(){return n.uT=null,r.apply(t)})},ZS.prototype.Ko=function(t,e){var n=this;return this.lT(t,e).next(function(t){t?n._T.delete(e):n._T.add(e)})},ZS.prototype.nT=function(t){return 0},ZS.prototype.lT=function(t,e){var n=this;return Z_.Sn([function(){return Z_.resolve(n.aT.Ch(e))},function(){return n.persistence.Fo().Ch(t,e)},function(){return n.persistence.oT(t,e)}])},ZS),GS="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",HS=($S.prototype.initialize=function(n){return zs(this,void 0,void 0,function(){var e=this;return Ks(this,function(t){switch(t.label){case 0:return this.jd=this.dT(n),this.persistence=this.fT(n),[4,this.persistence.start()];case 1:return t.sent(),this.TT=this.ET(n),this.x_=this.IT(n),this.Wd=this.wT(n),this.cl=this.RT(n),this.AT=this.mT(n),this.jd.b_=function(t){return e.cl.Nd(t,1)},this.Wd.cl=this.cl,[4,this.x_.start()];case 2:return t.sent(),[4,this.jd.start()];case 3:return t.sent(),[4,this.Wd.start()];case 4:return t.sent(),[4,this.Wd.yl(this.cl.if)];case 5:return t.sent(),[2]}})})},$S.prototype.mT=function(t){return new yS(this.cl)},$S.prototype.ET=function(t){return null},$S.prototype.IT=function(t){return new iT(this.persistence,new mS,t.PT)},$S.prototype.fT=function(t){if(t.gT.VT)throw new Sg(Ig.FAILED_PRECONDITION,GS);return new qS(WS.cT)},$S.prototype.wT=function(t){var e=this;return new qI(this.x_,t.w_,t.Ra,function(t){return e.cl.Nd(t,0)},t.platform.pT())},$S.prototype.dT=function(t){return new lS},$S.prototype.RT=function(t){return new dS(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd)},$S.prototype.clearPersistence=function(t){throw new Sg(Ig.FAILED_PRECONDITION,GS)},$S),zS=(Gs(JS,US=HS),JS.prototype.initialize=function(e){return zs(this,void 0,void 0,function(){var n=this;return Ks(this,function(t){switch(t.label){case 0:return[4,US.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,this.persistence.ro(function(e){return zs(n,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return[4,this.cl.yl(e)];case 1:return t.sent(),this.TT&&(e&&!this.TT.ho?this.TT.start(this.x_):e||this.TT.stop()),[2]}})})})];case 2:return t.sent(),[2]}})})},JS.prototype.IT=function(t){return new cT(this.persistence,new mS,t.PT)},JS.prototype.RT=function(t){var e=new vS(this.x_,this.Wd,t.w_,this.jd,t.PT,t.Kd);return this.jd instanceof hS&&(this.jd.cl=e),e},JS.prototype.ET=function(t){var e=this.persistence.hh.$o;return new nT(e,t.Ra)},JS.prototype.fT=function(t){var e=Qw.xo(t.yT),n=t.platform.Cc(t.yT.ii);return new Qw(t.gT.synchronizeTabs,e,t.clientId,t.platform,ZE.nu(t.gT.cacheSizeBytes),t.Ra,n,this.jd,t.gT.Bh)},JS.prototype.dT=function(t){if(t.gT.VT&&t.gT.synchronizeTabs){if(!hS.zh(t.platform))throw new Sg(Ig.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=Qw.xo(t.yT);return new hS(t.Ra,t.platform,e,t.clientId,t.PT)}return new lS},JS.prototype.clearPersistence=function(t){var e=Qw.xo(t);return Qw.clearPersistence(e)},JS),KS=(XS.prototype.start=function(e,n){var r=this;this.T_();var i=new yw,o=new yw,s=!1;return this.credentials.l(function(t){return s?void r.Ra.lo(function(){return r.pl(t)}):(s=!0,U_("FirestoreClient","Initializing. user=",t.uid),r.bT(e,n,t,o).then(i.resolve,i.reject))}),this.Ra.co(function(){return i.promise}),o.promise},XS.prototype.enableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue(function(){return t.cl.enableNetwork()})},XS.prototype.bT=function(a,u,c,h){return zs(this,void 0,void 0,function(){var n,r,i,o,s=this;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.platform.vT(this.yT)];case 1:return n=t.sent(),r=this.platform.Cc(this.yT.ii),e=this.credentials,i=new UI(n,e,r),[4,a.initialize({Ra:this.Ra,yT:this.yT,platform:this.platform,w_:i,clientId:this.clientId,PT:c,Kd:100,gT:u})];case 2:return t.sent(),this.persistence=a.persistence,this.jd=a.jd,this.x_=a.x_,this.Wd=a.Wd,this.cl=a.cl,this.TT=a.TT,this.ST=a.AT,this.persistence.oo(function(){return zs(s,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),h.resolve(),[3,4];case 3:if(o=t.sent(),h.reject(o),!this.DT(o))throw o;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),this.bT(new HS,{VT:!1},c,h))];case 4:return[2]}var e})})},XS.prototype.DT=function(t){return"FirebaseError"===t.name?t.code===Ig.FAILED_PRECONDITION||t.code===Ig.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},XS.prototype.T_=function(){if(this.Ra.Ma)throw new Sg(Ig.FAILED_PRECONDITION,"The client has already been terminated.")},XS.prototype.pl=function(t){return this.Ra.Ua(),U_("FirestoreClient","Credential Changed. Current user: "+t.uid),this.cl.pl(t)},XS.prototype.disableNetwork=function(){var t=this;return this.T_(),this.Ra.enqueue(function(){return t.cl.disableNetwork()})},XS.prototype.terminate=function(){var t=this;return this.Ra.Ba(function(){return zs(t,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.TT&&this.TT.stop(),[4,this.Wd.Vo()];case 1:return t.sent(),[4,this.jd.Vo()];case 2:return t.sent(),[4,this.persistence.Vo()];case 3:return t.sent(),this.credentials.T(),[2]}})})})},XS.prototype.waitForPendingWrites=function(){var t=this;this.T_();var e=new yw;return this.Ra.co(function(){return t.cl.Tf(e)}),e.promise},XS.prototype.listen=function(t,e,n){var r=this;this.T_();var i=new gS(t,e,n);return this.Ra.co(function(){return r.ST.listen(i)}),i},XS.prototype.al=function(t){var e=this;this.CT||this.Ra.co(function(){return e.ST.al(t)})},XS.prototype.FT=function(o){return zs(this,void 0,void 0,function(){var i,e=this;return Ks(this,function(t){switch(t.label){case 0:return this.T_(),i=new yw,[4,this.Ra.enqueue(function(){return zs(e,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.x_.qu(o)];case 1:return(e=t.sent())instanceof gb?i.resolve(e):e instanceof mb?i.resolve(null):i.reject(new Sg(Ig.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=YE(n,"Failed to get document '"+o+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})},XS.prototype.NT=function(u){return zs(this,void 0,void 0,function(){var a,e=this;return Ks(this,function(t){switch(t.label){case 0:return this.T_(),a=new yw,[4,this.Ra.enqueue(function(){return zs(e,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.x_.Wu(u,!0)];case 1:return e=t.sent(),n=new fS(u,e.ju),r=n.yd(e.documents),i=n.Ln(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=YE(o,"Failed to execute query '"+u+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})},XS.prototype.write=function(t){var e=this;this.T_();var n=new yw;return this.Ra.co(function(){return e.cl.write(t,n)}),n.promise},XS.prototype.ii=function(){return this.yT.ii},XS.prototype.Nf=function(t){var e=this;this.T_(),this.Ra.co(function(){return e.ST.Nf(t),Promise.resolve()})},XS.prototype.kf=function(t){var e=this;this.CT||this.Ra.co(function(){return e.ST.kf(t),Promise.resolve()})},Object.defineProperty(XS.prototype,"CT",{get:function(){return this.Ra.Ma},enumerable:!0,configurable:!0}),XS.prototype.transaction=function(t){var e=this;this.T_();var n=new yw;return this.Ra.co(function(){return e.cl.runTransaction(e.Ra,t,n),Promise.resolve()}),n.promise},XS),QS=(YS.prototype.next=function(t){this.kT(this.observer.next,t)},YS.prototype.error=function(t){this.kT(this.observer.error,t)},YS.prototype.MT=function(){this.muted=!0},YS.prototype.kT=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},YS);function YS(t){this.observer=t,this.muted=!1}function XS(t,e,n,r){this.platform=t,this.yT=e,this.credentials=n,this.Ra=r,this.clientId=W_.cn()}function JS(){return null!==US&&US.apply(this,arguments)||this}function $S(){}function ZS(t){this.persistence=t,this.aT=new fT,this.uT=null}function tC(t){var e=this;return(e=jS.call(this)||this).Oh=t,e}function eC(t){var e=this;this.iT={},this.qh=new ow(0),this.Uh=!1,this.Uh=!0,this.hh=t(this),this.Jh=new VS(this),this.jn=new Ew,this.Qn=new _S(this.jn,function(t){return e.hh.nT(t)})}function nC(t){this.persistence=t,this.Zf=new X_(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Og.min(),this.highestTargetId=0,this.tT=0,this.eT=new fT,this.targetCount=0,this.sT=Fw.nh()}function rC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var iC,oC,sC,aC,uC=(DC.prototype.OT=function(t){switch(sm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pm(t.integerValue||t.doubleValue);case 3:return this.LT(t.timestampValue);case 4:return this.BT(t);case 5:return t.stringValue;case 6:return new jT(dm(t.bytesValue));case 7:return this.qT(t.referenceValue);case 8:return this.UT(t.geoPointValue);case 9:return this.QT(t.arrayValue);case 10:return this.WT(t.mapValue);default:throw q_()}},DC.prototype.WT=function(t){var n=this,r={};return Xg(t.fields||{},function(t,e){r[t]=n.OT(e)}),r},DC.prototype.UT=function(t){return new oI(pm(t.latitude),pm(t.longitude))},DC.prototype.QT=function(t){var e=this;return(t.values||[]).map(function(t){return e.OT(t)})},DC.prototype.BT=function(t){switch(this.xT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return rm(n)?t(n):n}(t);return null==e?null:this.OT(e);case"estimate":return this.LT(im(t));default:return null}},DC.prototype.LT=function(t){var e=fm(t),n=new Rg(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},DC.prototype.qT=function(t){var e=Dg.K(t);B_(D_(e));var n=new Y_(e.get(1),e.get(3)),r=new Kg(e.M(5));return n.isEqual(this.ii)||j_("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.ii.projectId+"/"+this.ii.database+") instead."),this.$T(r)},DC),cC=ZE.ou,hC=(PC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},PC),lC=(Object.defineProperty(OC.prototype,"tE",{get:function(){return this.eE||(this.eE=new EI(this.mc,this.ZT.ignoreUndefinedProperties)),this.eE},enumerable:!0,configurable:!0}),OC.prototype.settings=function(t){gT("Firestore.settings",arguments,1),_T("Firestore.settings","object",1,t);var e=new hC(t);if(this.zT&&!this.ZT.isEqual(e))throw new Sg(Ig.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.ZT=e).credentials&&(this.JT=function(t){if(!t)return new Cg;switch(t.type){case"gapi":var e=t.sE;return B_(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new kg(e,t.V||"0");case"provider":return t.sE;default:throw new Sg(Ig.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},OC.prototype.enableNetwork=function(){return this.GT(),this.zT.enableNetwork()},OC.prototype.disableNetwork=function(){return this.GT(),this.zT.disableNetwork()},OC.prototype.enablePersistence=function(t){var e,n;if(this.zT)throw new Sg(Ig.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&j_("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Sg(Ig.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.iE(this.XT,{VT:!0,cacheSizeBytes:this.ZT.cacheSizeBytes,synchronizeTabs:r,Bh:i})},OC.prototype.clearPersistence=function(){return zs(this,void 0,void 0,function(){var r,e=this;return Ks(this,function(t){if(void 0!==this.zT&&!this.zT.CT)throw new Sg(Ig.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return r=new yw,[2,(this.KT.xa(function(){return zs(e,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.nE(),[4,this.XT.clearPersistence(e)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return n=t.sent(),r.reject(n),[3,3];case 3:return[2]}})})}),r.promise)]})})},OC.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(OC.prototype,"rE",{get:function(){return this.GT(),this.zT.CT},enumerable:!0,configurable:!0}),OC.prototype.waitForPendingWrites=function(){return this.GT(),this.zT.waitForPendingWrites()},OC.prototype.onSnapshotsInSync=function(t){if(this.GT(),rC(t))return this.hE(t);_T("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.hE(e)},OC.prototype.hE=function(t){var e=this,n=new QS({next:function(){t.next&&t.next()},error:function(t){throw q_()}});return this.zT.Nf(n),function(){n.MT(),e.zT.kf(n)}},OC.prototype.GT=function(){return this.zT||this.iE(new HS,{VT:!1}),this.zT},OC.prototype.nE=function(){return new Q_(this.mc,this.YT,this.ZT.host,this.ZT.ssl,this.ZT.forceLongPolling)},OC.prototype.iE=function(t,e){var n=this.nE();return this.zT=new KS(x_.nt(),n,this.JT,this.KT),this.zT.start(t,e)},OC.HT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Sg(Ig.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Sg(Ig.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Y_(n)},Object.defineProperty(OC.prototype,"app",{get:function(){if(!this.jT)throw new Sg(Ig.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jT},enumerable:!0,configurable:!0}),OC.prototype.collection=function(t){return gT("Firestore.collection",arguments,1),_T("Firestore.collection","non-empty string",1,t),this.GT(),new _C(Dg.K(t),this,null)},OC.prototype.doc=function(t){return gT("Firestore.doc",arguments,1),_T("Firestore.doc","non-empty string",1,t),this.GT(),dC.oE(Dg.K(t),this,null)},OC.prototype.collectionGroup=function(t){if(gT("Firestore.collectionGroup",arguments,1),_T("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.GT(),new mC(new wb(Dg.G,t),this,null)},OC.prototype.runTransaction=function(e){var n=this;return gT("Firestore.runTransaction",arguments,1),_T("Firestore.runTransaction","function",1,e),this.GT().transaction(function(t){return e(new fC(n,t))})},OC.prototype.batch=function(){return this.GT(),new pC(this)},Object.defineProperty(OC,"logLevel",{get:function(){switch(F_()){case za.DEBUG:return"debug";case za.ERROR:return"error";case za.SILENT:return"silent";case za.WARN:return"warn";case za.INFO:return"info";case za.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),OC.setLogLevel=function(t){gT("Firestore.setLogLevel",arguments,1),ST("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),L_.setLogLevel(t)},OC.prototype.aE=function(){return this.ZT.timestampsInSnapshots},OC),fC=(RC.prototype.get=function(t){var n=this;gT("Transaction.get",arguments,1);var r=FC("Transaction.get",t,this.uE);return this.cE.V_([r.Pc]).then(function(t){if(!t||1!==t.length)return q_();var e=t[0];if(e instanceof mb)return new yC(n.uE,r.Pc,null,!1,!1,r.Vc);if(e instanceof gb)return new yC(n.uE,r.Pc,e,!1,!1,r.Vc);throw q_()})},RC.prototype.set=function(t,e,n){bT("Transaction.set",arguments,2,3);var r=FC("Transaction.set",t,this.uE);n=xC("Transaction.set",n);var i=UC(r.Vc,e,"Transaction.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this.cE.set(r.Pc,a),this},RC.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof VT?(mT("Transaction.update",arguments,3),r=FC("Transaction.update",t,this.uE),this.uE.tE.Mc("Transaction.update",e,n,o)):(gT("Transaction.update",arguments,2),r=FC("Transaction.update",t,this.uE),this.uE.tE.kc("Transaction.update",e)),this.cE.update(r.Pc,i),this},RC.prototype.delete=function(t){gT("Transaction.delete",arguments,1);var e=FC("Transaction.delete",t,this.uE);return this.cE.delete(e.Pc),this},RC),pC=(kC.prototype.set=function(t,e,n){bT("WriteBatch.set",arguments,2,3),this.dE();var r=FC("WriteBatch.set",t,this.uE);n=xC("WriteBatch.set",n);var i=UC(r.Vc,e,"WriteBatch.set"),o=i[0],s=i[1],a=this.uE.tE.Fc(s,o,n);return this._E=this._E.concat(a.gc(r.Pc,Um.ft())),this},kC.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.dE(),i="string"==typeof e||e instanceof VT?(mT("WriteBatch.update",arguments,3),r=FC("WriteBatch.update",t,this.uE),this.uE.tE.Mc("WriteBatch.update",e,n,o)):(gT("WriteBatch.update",arguments,2),r=FC("WriteBatch.update",t,this.uE),this.uE.tE.kc("WriteBatch.update",e)),this._E=this._E.concat(i.gc(r.Pc,Um.exists(!0))),this},kC.prototype.delete=function(t){gT("WriteBatch.delete",arguments,1),this.dE();var e=FC("WriteBatch.delete",t,this.uE);return this._E=this._E.concat(new Wm(e.Pc,Um.ft())),this},kC.prototype.commit=function(){return this.dE(),this.lE=!0,0<this._E.length?this.uE.GT().write(this._E):Promise.resolve()},kC.prototype.dE=function(){if(this.lE)throw new Sg(Ig.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},kC),dC=(Gs(AC,aC=aI),AC.oE=function(t,e,n){if(t.length%2!=0)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.j()+" has "+t.length);return new AC(new Kg(t),e,n)},Object.defineProperty(AC.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(AC.prototype,"parent",{get:function(){return new _C(this.Pc.path.$(),this.firestore,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(AC.prototype,"path",{get:function(){return this.Pc.path.j()},enumerable:!0,configurable:!0}),AC.prototype.collection=function(t){if(gT("DocumentReference.collection",arguments,1),_T("DocumentReference.collection","non-empty string",1,t),!t)throw new Sg(Ig.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Dg.K(t);return new _C(this.Pc.path.child(e),this.firestore,null)},AC.prototype.isEqual=function(t){if(!(t instanceof AC))throw OT("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Pc.isEqual(t.Pc)&&this.Vc===t.Vc},AC.prototype.set=function(t,e){bT("DocumentReference.set",arguments,1,2),e=xC("DocumentReference.set",e);var n=UC(this.Vc,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.tE.Fc(i,r,e);return this.zT.write(o.gc(this.Pc,Um.ft()))},AC.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof VT?(mT("DocumentReference.update",arguments,2),this.firestore.tE.Mc("DocumentReference.update",t,e,r)):(gT("DocumentReference.update",arguments,1),this.firestore.tE.kc("DocumentReference.update",t)),this.zT.write(n.gc(this.Pc,Um.exists(!0)))},AC.prototype.delete=function(){return gT("DocumentReference.delete",arguments,0),this.zT.write([new Wm(this.Pc,Um.ft())])},AC.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bT("DocumentReference.onSnapshot",arguments,1,4);var n={includeMetadataChanges:!1},r=0;"object"!=typeof t[r]||rC(t[r])||(RT("DocumentReference.onSnapshot",n=t[r],["includeMetadataChanges"]),TT("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++);var i={includeMetadataChanges:n.includeMetadataChanges},o=rC(t[r])?t[r]:(_T("DocumentReference.onSnapshot","function",r,t[r]),wT("DocumentReference.onSnapshot","function",r+1,t[r+1]),wT("DocumentReference.onSnapshot","function",r+2,t[r+2]),{next:t[r],error:t[r+1],complete:t[r+2]});return this.fE(i,o)},AC.prototype.fE=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new QS({next:function(t){var e;n.next&&(e=t.docs.get(r.Pc),n.next(new yC(r.firestore,r.Pc,e,t.fromCache,t.hasPendingWrites,r.Vc)))},error:e}),o=this.zT.listen(wb.Wt(this.Pc.path),i,t);return function(){i.MT(),r.zT.al(o)}},AC.prototype.get=function(n){var r=this;return bT("DocumentReference.get",arguments,0,1),MC("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.GT().FT(r.Pc).then(function(t){e(new yC(r.firestore,r.Pc,t,!0,t instanceof gb&&t.At,r.Vc))},t):r.TE(e,t,n)})},AC.prototype.TE=function(e,n,r){var i=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new Sg(Ig.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new Sg(Ig.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},AC.prototype.withConverter=function(t){return new AC(this.Pc,this.firestore,t)},AC),vC=(NC.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},NC),yC=(CC.prototype.data=function(t){var e=this;if(bT("DocumentSnapshot.data",arguments,0,1),t=LC("DocumentSnapshot.data",t),this.EE){if(this.Vc){var n=new gC(this.uE,this.Pc,this.EE,this.IE,this.wE,null);return this.Vc.fromFirestore(n,t)}return new uC(this.uE.mc,this.uE.aE(),t.serverTimestamps||"none",function(t){return new dC(t,e.uE,null)}).OT(this.EE.xt())}},CC.prototype.get=function(t,e){var n=this;if(bT("DocumentSnapshot.get",arguments,1,2),e=LC("DocumentSnapshot.get",e),this.EE){var r=this.EE.data().field(kI("DocumentSnapshot.get",t));if(null!==r)return new uC(this.uE.mc,this.uE.aE(),e.serverTimestamps||"none",function(t){return new dC(t,n.uE,n.Vc)}).OT(r)}},Object.defineProperty(CC.prototype,"id",{get:function(){return this.Pc.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(CC.prototype,"ref",{get:function(){return new dC(this.Pc,this.uE,this.Vc)},enumerable:!0,configurable:!0}),Object.defineProperty(CC.prototype,"exists",{get:function(){return null!==this.EE},enumerable:!0,configurable:!0}),Object.defineProperty(CC.prototype,"metadata",{get:function(){return new vC(this.wE,this.IE)},enumerable:!0,configurable:!0}),CC.prototype.isEqual=function(t){if(!(t instanceof CC))throw OT("isEqual","DocumentSnapshot",1,t);return this.uE===t.uE&&this.IE===t.IE&&this.Pc.isEqual(t.Pc)&&(null===this.EE?null===t.EE:this.EE.isEqual(t.EE))&&this.Vc===t.Vc},CC),gC=(Gs(SC,sC=yC),SC.prototype.data=function(t){return sC.prototype.data.call(this,t)},SC),mC=(IC.prototype.AE=function(t,e,n){var r;if(t.Y()){if("array-contains"===e||"array-contains-any"===e)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.mE(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.PE(a))}r={arrayValue:{values:i}}}else r=this.PE(n)}else"in"!==e&&"array-contains-any"!==e||this.mE(n,e),r=this.tE.xc("Query.where",n,"in"===e);var u=Eb.create(t,e,r);return this.VE(u),u},IC.prototype.gE=function(t,e){if(null!==this.RE.startAt)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.RE.endAt)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new kb(t,e);return this.pE(n),n},IC.prototype.yE=function(t,e,n){if(!e)throw new Sg(Ig.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.RE.orderBy;i<o.length;i++){var s=o[i];if(s.field.Y())r.push(vm(this.mc,e.key));else{var a=e.field(s.field);if(rm(a))throw new Sg(Ig.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.j();throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ab(r,n)},IC.prototype.bE=function(t,e,n){var r=this.RE.Lt;if(e.length>r.length)throw new Sg(Ig.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.RE._e()&&-1!==s.indexOf("/"))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.RE.path.child(Dg.K(s));if(!Kg.et(a))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Kg(a);i.push(vm(this.mc,u))}else{var c=this.tE.xc(t,s);i.push(c)}}return new Ab(i,n)},IC.prototype.vE=function(t){if(t.ae()&&0===t.Lt.length)throw new Sg(Ig.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},IC.prototype.PE=function(t){if("string"==typeof t){if(""===t)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.RE._e()&&-1!==t.indexOf("/"))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.RE.path.child(Dg.K(t));if(!Kg.et(e))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return vm(this.mc,new Kg(e))}if(t instanceof aI)return vm(this.mc,t.Pc);throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+AT(t)+".")},IC.prototype.mE=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},IC.prototype.VE=function(t){if(t instanceof Eb){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.ue()){var o=this.RE.jt();if(null!==o&&!o.isEqual(t.field))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.RE.Kt();null!==s&&this.SE(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.RE.ce(n)),null===a&&r&&(a=this.RE.ce(e)),null!=a)throw a===t.op?new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},IC.prototype.pE=function(t){var e;null!==this.RE.Kt()||null!==(e=this.RE.jt())&&this.SE(e,t.field)},IC.prototype.SE=function(t,e){if(!e.isEqual(t))throw new Sg(Ig.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},Gs(TC,oC=IC),TC.prototype.where=function(t,e,n){gT("Query.where",arguments,3),kT("Query.where",3,n);var r=ST("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),i=kI("Query.where",t),o=this.AE(i,r,n);return new TC(this.RE.Gt(o),this.firestore,this.Vc)},TC.prototype.orderBy=function(t,e){var n;if(bT("Query.orderBy",arguments,1,2),wT("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Sg(Ig.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r=kI("Query.orderBy",t),i=this.gE(r,n);return new TC(this.RE.zt(i),this.firestore,this.Vc)},TC.prototype.limit=function(t){return gT("Query.limit",arguments,1),_T("Query.limit","number",1,t),PT("Query.limit",1,t),new TC(this.RE.Ht(t),this.firestore,this.Vc)},TC.prototype.limitToLast=function(t){return gT("Query.limitToLast",arguments,1),_T("Query.limitToLast","number",1,t),PT("Query.limitToLast",1,t),new TC(this.RE.Yt(t),this.firestore,this.Vc)},TC.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mT("Query.startAt",arguments,1);var r=this.DE("Query.startAt",t,e,!0);return new TC(this.RE.Jt(r),this.firestore,this.Vc)},TC.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mT("Query.startAfter",arguments,1);var r=this.DE("Query.startAfter",t,e,!1);return new TC(this.RE.Jt(r),this.firestore,this.Vc)},TC.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mT("Query.endBefore",arguments,1);var r=this.DE("Query.endBefore",t,e,!0);return new TC(this.RE.Xt(r),this.firestore,this.Vc)},TC.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mT("Query.endAt",arguments,1);var r=this.DE("Query.endAt",t,e,!1);return new TC(this.RE.Xt(r),this.firestore,this.Vc)},TC.prototype.isEqual=function(t){if(!(t instanceof TC))throw OT("isEqual","Query",1,t);return this.firestore===t.firestore&&this.RE.isEqual(t.RE)&&this.Vc===t.Vc},TC.prototype.withConverter=function(t){return new TC(this.RE,this.firestore,t)},TC.prototype.DE=function(t,e,n,r){if(kT(t,1,e),e instanceof yC)return gT(t,Js([e],n),1),this.yE(t,e.EE,r);var i=[e].concat(n);return this.bE(t,i,r)},TC.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];bT("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||rC(t[i])||(RT("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),TT("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=rC(t[i])?t[i]:(_T("Query.onSnapshot","function",i,t[i]),wT("Query.onSnapshot","function",i+1,t[i+1]),wT("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.vE(this.RE),this.fE(r,n)},TC.prototype.fE=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new QS({next:function(t){e.next&&e.next(new bC(n.firestore,n.RE,t,n.Vc))},error:r}),o=this.firestore.GT(),s=o.listen(this.RE,i,t);return function(){i.MT(),o.al(s)}},TC.prototype.get=function(n){var r=this;return bT("Query.get",arguments,0,1),MC("Query.get",n),this.vE(this.RE),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.GT().NT(r.RE).then(function(t){e(new bC(r.firestore,r.RE,t,r.Vc))},t):r.TE(e,t,n)})},TC.prototype.TE=function(e,n,r){var i=this.fE({includeMetadataChanges:!0,qf:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new Sg(Ig.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},TC),bC=(Object.defineProperty(EC.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(EC.prototype,"empty",{get:function(){return this.FE.docs.B()},enumerable:!0,configurable:!0}),Object.defineProperty(EC.prototype,"size",{get:function(){return this.FE.docs.size},enumerable:!0,configurable:!0}),EC.prototype.forEach=function(e,n){var r=this;bT("QuerySnapshot.forEach",arguments,1,2),_T("QuerySnapshot.forEach","function",1,e),this.FE.docs.forEach(function(t){e.call(n,r.ME(t))})},Object.defineProperty(EC.prototype,"query",{get:function(){return new mC(this.CE,this.uE,this.Vc)},enumerable:!0,configurable:!0}),EC.prototype.docChanges=function(t){t&&(RT("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),TT("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.FE.hs)throw new Sg(Ig.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.NE&&this.kE===e||(this.NE=function(i,e,o,s){if(o.ss.B()){var n=0;return o.docChanges.map(function(t){var e=new gC(i,t.doc.key,t.doc,o.fromCache,o.ns.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var a=o.ss;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new gC(i,t.doc.key,t.doc,o.fromCache,o.ns.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(n=a.indexOf(t.doc.key),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q_()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.uE,e,this.FE,this.Vc),this.kE=e),this.NE},EC.prototype.isEqual=function(t){if(!(t instanceof EC))throw OT("isEqual","QuerySnapshot",1,t);return this.uE===t.uE&&this.CE.isEqual(t.CE)&&this.FE.isEqual(t.FE)&&this.Vc===t.Vc},EC.prototype.ME=function(t){return new gC(this.uE,t.key,t,this.metadata.fromCache,this.FE.ns.has(t.key),this.Vc)},EC),_C=(Gs(wC,iC=mC),Object.defineProperty(wC.prototype,"id",{get:function(){return this.RE.path.L()},enumerable:!0,configurable:!0}),Object.defineProperty(wC.prototype,"parent",{get:function(){var t=this.RE.path.$();return t.B()?null:new dC(new Kg(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(wC.prototype,"path",{get:function(){return this.RE.path.j()},enumerable:!0,configurable:!0}),wC.prototype.doc=function(t){bT("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=W_.cn()),_T("CollectionReference.doc","non-empty string",1,t);var e=Dg.K(t);return dC.oE(this.RE.path.child(e),this.firestore,this.Vc)},wC.prototype.add=function(t){gT("CollectionReference.add",arguments,1),_T("CollectionReference.add","object",1,this.Vc?this.Vc.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},wC.prototype.withConverter=function(t){return new wC(this.xE,this.firestore,t)},wC);function wC(t,e,n){var r=this;if(((r=iC.call(this,wb.Wt(t),e,n)||this).xE=t).length%2!=1)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.j()+" has "+t.length);return r}function EC(t,e,n,r){this.uE=t,this.CE=e,this.FE=n,this.Vc=r,this.NE=null,this.kE=null,this.metadata=new vC(n.hasPendingWrites,n.fromCache)}function TC(t,e,n){var r=this;return(r=oC.call(this,e.mc,e.tE,t)||this).RE=t,r.firestore=e,r.Vc=n,r}function IC(t,e,n){this.mc=t,this.tE=e,this.RE=n}function SC(){return null!==sC&&sC.apply(this,arguments)||this}function CC(t,e,n,r,i,o){this.uE=t,this.Pc=e,this.EE=n,this.IE=r,this.wE=i,this.Vc=o}function NC(t,e){this.hasPendingWrites=t,this.fromCache=e}function AC(t,e,n){var r=this;return(r=aC.call(this,e.mc,t,n)||this).Pc=t,r.firestore=e,r.Vc=n,r.zT=r.firestore.GT(),r}function kC(t){this.uE=t,this._E=[],this.lE=!1}function RC(t,e){this.uE=t,this.cE=e}function OC(t,e,n){var r=this;if(void 0===n&&(n=new HS),this.jT=null,this.KT=new zE,this.INTERNAL={delete:function(){return zs(r,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return this.GT(),[4,this.zT.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.jT=i,this.mc=OC.HT(i),this.YT=i.name,this.JT=new Ng(e)}else{var o=t;if(!o.projectId)throw new Sg(Ig.INVALID_ARGUMENT,"Must provide projectId");this.mc=new Y_(o.projectId,o.database),this.YT="[DEFAULT]",this.JT=new Cg}this.XT=n,this.ZT=new hC({})}function PC(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Sg(Ig.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else ET("settings","non-empty string","host",t.host),this.host=t.host,TT("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(RT("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),TT("settings","object","credentials",t.credentials),this.credentials=t.credentials,TT("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),TT("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?j_("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&j_("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,TT("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ZE.uu;else{if(t.cacheSizeBytes!==cC&&t.cacheSizeBytes<ZE.au)throw new Sg(Ig.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ZE.au);this.cacheSizeBytes=t.cacheSizeBytes}TT("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function DC(t,e,n,r){this.ii=t,this.timestampsInSnapshots=e,this.xT=n,this.$T=r}function xC(t,e){if(void 0===e)return{merge:!1};if(RT(t,e,["merge","mergeFields"]),TT(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+AT(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new Sg(Ig.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+AT(n[i]))}(t,"mergeFields",n,function(t){return"string"==typeof t||t instanceof VT}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Sg(Ig.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function LC(t,e){return void 0===e?{}:(RT(t,e,["serverTimestamps"]),IT(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function MC(t,e){wT(t,"object",1,e),e&&(RT(t,e,["source"]),IT(t,0,"source",e.source,["default","server","cache"]))}function FC(t,e,n){if(e instanceof aI){if(e.firestore!==n)throw new Sg(Ig.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw OT(t,"DocumentReference",1,e)}function UC(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}function jC(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Sg(Ig.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}var VC,qC=jC(lC,"Use firebase.firestore() instead."),BC=jC(fC,"Use firebase.firestore().runTransaction() instead."),WC=jC(pC,"Use firebase.firestore().batch() instead."),GC=jC(dC,"Use firebase.firestore().doc() instead."),HC=jC(yC),zC=jC(gC),KC=jC(mC),QC=jC(bC),YC=jC(_C,"Use firebase.firestore().collection() instead."),XC=jC(rI,"Use FieldValue.<field>() instead."),JC=jC(jT,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),$C={Firestore:qC,GeoPoint:oI,Timestamp:Rg,Blob:JC,Transaction:BC,WriteBatch:WC,DocumentReference:GC,DocumentSnapshot:HC,Query:KC,QueryDocumentSnapshot:zC,QuerySnapshot:QC,CollectionReference:YC,FieldPath:VT,FieldValue:XC,setLogLevel:lC.setLogLevel,CACHE_SIZE_UNLIMITED:cC},ZC=(uN.prototype.Q_=function(t){},uN.prototype.Vo=function(){},uN),tN=(aN.prototype.Q_=function(t){this.qE.push(t)},aN.prototype.Vo=function(){window.removeEventListener("online",this.$E),window.removeEventListener("offline",this.LE)},aN.prototype.UE=function(){window.addEventListener("online",this.$E),window.addEventListener("offline",this.LE)},aN.prototype.OE=function(){U_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(0)},aN.prototype.BE=function(){U_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.qE;t<e.length;t++)(0,e[t])(1)},aN.zh=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},aN),eN=(sN.prototype.s_=function(t){this.jE=t},sN.prototype.Jc=function(t){this.KE=t},sN.prototype.onMessage=function(t){this.GE=t},sN.prototype.close=function(){this.WE()},sN.prototype.send=function(t){this.QE(t)},sN.prototype.zE=function(){this.jE()},sN.prototype.HE=function(t){this.KE(t)},sN.prototype.YE=function(t){this.GE(t)},sN),nN={BatchGetDocuments:"batchGet",Commit:"commit"},rN="gl-js/ fire/"+mg,iN=(oN.prototype.XE=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=rN},oN.prototype.E_=function(u,r,i){var c=this,h=this.ZE(u);return new Promise(function(o,s){var a=new gg;a.listenOnce(vg.COMPLETE,function(){try{switch(a.getLastErrorCode()){case dg.NO_ERROR:var t=a.getResponseJson();U_("Connection","XHR received:",JSON.stringify(t)),o(t);break;case dg.TIMEOUT:U_("Connection",'RPC "'+u+'" timed out'),s(new Sg(Ig.DEADLINE_EXCEEDED,"Request time out"));break;case dg.HTTP_ERROR:var e,n,r=a.getStatus();U_("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(Ig).indexOf(i)?i:Ig.UNKNOWN,s(new Sg(n,e.message))):s(new Sg(Ig.UNKNOWN,"Server responded with status "+a.getStatus())):(U_("Connection",'RPC "'+u+'" failed'),s(new Sg(Ig.UNAVAILABLE,"Connection failed.")));break;default:q_()}}finally{U_("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);U_("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.XE(n,i),a.send(h,"POST",e,n,15)})},oN.prototype.I_=function(t,e,n){return this.E_(t,e,n)},oN.prototype.i_=function(t,e){var n,r,i=[this.JE,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=pg(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ii.projectId+"/databases/"+this.ii.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.XE(s.initMessageHeaders,e),ca()||ha()||0<=ua().indexOf("Electron/")||0<=(r=ua()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=ua().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}U_("Connection","Creating WebChannel: "+a+" "+s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new eN({QE:function(t){l?U_("Connection","Not sending because WebChannel is closed:",t):(h||(U_("Connection","Opening WebChannel transport."),c.open(),h=!0),U_("Connection","WebChannel sending:",t),c.send(t))},WE:function(){return c.close()}});return u(yg.EventType.OPEN,function(){l||U_("Connection","WebChannel transport opened.")}),u(yg.EventType.CLOSE,function(){l||(l=!0,U_("Connection","WebChannel transport closed"),f.HE())}),u(yg.EventType.ERROR,function(t){l||(l=!0,function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];L_.logLevel<=za.WARN&&(e=n.map(V_),L_.warn.apply(L_,Js(["Firestore ("+mg+"): Connection"],e)))}("Connection","WebChannel transport errored:",t),f.HE(new Sg(Ig.UNAVAILABLE,"The operation could not be completed")))}),u(yg.EventType.MESSAGE,function(t){var e,n,r,i,o,s;l||(B_(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(U_("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=sb[i];if(void 0!==t)return zb(t)}(),s=r.message,void 0===o&&(o=Ig.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.HE(new Sg(o,s)),c.close()):(U_("Connection","WebChannel received:",n),f.YE(n)))}),setTimeout(function(){f.zE()},0),f},oN.prototype.ZE=function(t){var e=nN[t];return this.JE+"/v1/projects/"+this.ii.projectId+"/databases/"+this.ii.database+"/documents:"+e},oN);function oN(t){this.ii=t.ii;var e=t.ssl?"https":"http";this.JE=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function sN(t){this.QE=t.QE,this.WE=t.WE}function aN(){var t=this;this.$E=function(){return t.OE()},this.LE=function(){return t.BE()},this.qE=[],this.UE()}function uN(){}function cN(){this.oc="undefined"!=typeof atob}x_.an((Object.defineProperty(cN.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(cN.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),cN.prototype.vT=function(t){return Promise.resolve(new iN(t))},cN.prototype.pT=function(){return new(tN.zh()?tN:ZC)},cN.prototype.Cc=function(t){return new O_(t,{hi:!0})},cN.prototype.un=function(t){return JSON.stringify(t)},cN.prototype.atob=function(t){return atob(t)},cN.prototype.btoa=function(t){return btoa(t)},cN.prototype._n=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n},new cN)),(VC=zl).INTERNAL.registerComponent(new Fa("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new lC(e,n,new zS);var e,n},"PUBLIC").setServiceProps(Object.assign({},$C))),VC.registerVersion("@firebase/firestore","1.15.4");var hN,lN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fN=(Gs(pN,hN=Error),pN);function pN(t,e,n){var r=hN.call(this,e)||this;return Object.setPrototypeOf(r,pN.prototype),r.code=t,r.details=n,r}function dN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!lN[a])return new fN("internal","internal");r=lN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new fN(r,i,o)}var vN=(yN.prototype.getAuthToken=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},yN.prototype.getInstanceIdToken=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},yN.prototype.getContext=function(){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},yN);function yN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function gN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var mN=(bN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return gN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},bN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?gN(t,function(t){return e.decode(t)}):t},bN);function bN(){}var _N=(Object.defineProperty(wN.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),wN.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},wN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},wN.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},wN.prototype.postJSON=function(r,i,o){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},wN.prototype.call=function(h,l,f){return zs(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return Ks(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new fN("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new fN("cancelled","Firebase Functions instance was deleted.");if(u=dN(a.status,a.json,this.serializer))throw u;if(!a.json)throw new fN("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new fN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},wN);function wN(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new mN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new vN(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function EN(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new _N(n,r,i,e)}var TN;function IN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function SN(n,r,i){var o,t=new Promise(function(t,e){IN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function CN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function NN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return SN(this[n],t,arguments)})})}function AN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function kN(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=SN(t,n,arguments)).then(function(t){if(t)return new ON(t,e.request)});var t,e})})}function RN(t){this._index=t}function ON(t,e){this._cursor=t,this._request=e}function PN(t){this._store=t}function DN(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function xN(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new DN(n)}function LN(t){this._db=t}function MN(t,e,n){var r=SN(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new xN(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new LN(t)})}function FN(t){return SN(indexedDB,"deleteDatabase",[t])}TN={Functions:_N},zl.INTERNAL.registerComponent(new Fa("functions",EN,"PUBLIC").setServiceProps(TN).setMultipleInstances(!0)),zl.registerVersion("@firebase/functions","0.4.46"),CN(RN,"_index",["name","keyPath","multiEntry","unique"]),NN(RN,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),kN(RN,"_index",IDBIndex,["openCursor","openKeyCursor"]),CN(ON,"_cursor",["direction","key","primaryKey","value"]),NN(ON,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(ON.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),IN(e._request).then(function(t){if(t)return new ON(t,e._request)})})})}),PN.prototype.createIndex=function(){return new RN(this._store.createIndex.apply(this._store,arguments))},PN.prototype.index=function(){return new RN(this._store.index.apply(this._store,arguments))},CN(PN,"_store",["name","keyPath","indexNames","autoIncrement"]),NN(PN,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),kN(PN,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),AN(PN,"_store",IDBObjectStore,["deleteIndex"]),DN.prototype.objectStore=function(){return new PN(this._tx.objectStore.apply(this._tx,arguments))},CN(DN,"_tx",["objectStoreNames","mode"]),AN(DN,"_tx",IDBTransaction,["abort"]),xN.prototype.createObjectStore=function(){return new PN(this._db.createObjectStore.apply(this._db,arguments))},CN(xN,"_db",["name","version","objectStoreNames"]),AN(xN,"_db",IDBDatabase,["deleteObjectStore","close"]),LN.prototype.transaction=function(){return new DN(this._db.transaction.apply(this._db,arguments))},CN(LN,"_db",["name","version","objectStoreNames"]),AN(LN,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[PN,RN].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[RN,PN].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var UN,jN=1e4,VN="w:0.4.12",qN="FIS_v2",BN="https://firebaseinstallations.googleapis.com/v1",WN=36e5,GN=((UN={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',UN["not-registered"]="Firebase Installation is not registered.",UN["installation-not-found"]="Firebase Installation not found.",UN["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',UN["app-offline"]="Could not process request. Application offline.",UN["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",UN),HN=new ya("installations","Installations",GN);function zN(t){return t instanceof da&&t.code.includes("request-failed")}function KN(t){var e=t.projectId;return BN+"/projects/"+e+"/installations"}function QN(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function YN(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,HN.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function XN(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function JN(t,e){var n=e.refreshToken,r=XN(t);return r.append("Authorization",qN+" "+n),r}function $N(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function ZN(e){return new Promise(function(t){setTimeout(t,e)})}var tA=/^[cdef][\w-]{21}$/,eA="";function nA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,Xs(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return tA.test(e)?e:eA}catch(t){return eA}}function rA(t){return t.appName+"!"+t.appId}var iA=new Map;function oA(t,e){var n=rA(t);sA(n,e),function(t,e){var n=uA();n&&n.postMessage({key:t,fid:e});cA()}(n,e)}function sA(t,e){var n,r,i=iA.get(t);if(i)try{for(var o=Qs(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var aA=null;function uA(){return!aA&&"BroadcastChannel"in self&&((aA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){sA(t.data.key,t.data.fid)}),aA}function cA(){0===iA.size&&aA&&(aA.close(),aA=null)}var hA,lA,fA="firebase-installations-database",pA=1,dA="firebase-installations-store",vA=null;function yA(){return vA=vA||MN(fA,pA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(dA)}})}function gA(s,a){return zs(this,void 0,void 0,function(){var e,n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return e=rA(s),[4,yA()];case 1:return n=t.sent(),r=n.transaction(dA,"readwrite"),[4,(i=r.objectStore(dA)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||oA(s,a.fid),[2,a]}})})}function mA(i){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return e=rA(i),[4,yA()];case 1:return n=t.sent(),[4,(r=n.transaction(dA,"readwrite")).objectStore(dA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function bA(a,u){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return e=rA(a),[4,yA()];case 1:return n=t.sent(),r=n.transaction(dA,"readwrite"),[4,(i=r.objectStore(dA)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||oA(a,s.fid),[2,s]}})})}function _A(i){return zs(this,void 0,void 0,function(){var r,e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,bA(i,function(t){var e=EA(t||{fid:nA(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:return[4,wA(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,ZN(100)];case 3:return t.sent(),[4,wA(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,_A(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(HN.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return e=KN(a),n=XN(a),r={fid:u,authVersion:qN,appId:a.appId,sdkVersion:VN},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,$N(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:QN(s.authToken)}];case 3:return[4,YN("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,gA(r,e)];case 2:return zN(n=t.sent())&&409===n.serverCode?[4,mA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,gA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==eA?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function wA(t){return bA(t,function(t){if(!t)throw HN.create("installation-not-found");return EA(t)})}function EA(t){return 1===(e=t).registrationStatus&&e.registrationTime+jN<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function TA(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return zs(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Ks(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=KN(e)+"/"+n+"/authTokens:generate",i=JN(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:VN}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,$N(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,QN(c)];case 3:return[4,YN("Generate Auth Token",u)];case 4:throw t.sent()}var e,n})})}function IA(a,u){return void 0===u&&(u=!1),zs(this,void 0,void 0,function(){var s,e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,bA(a.appConfig,function(t){if(!CA(t))throw HN.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+WN}(r)){if(1===i.requestStatus)return s=function(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,SA(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,ZN(100)];case 3:return t.sent(),[4,SA(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,IA(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw HN.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},Hs(Hs({},e),{authToken:n}));return s=function(i,o){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,TA(i,o)];case 1:return e=t.sent(),r=Hs(Hs({},o),{authToken:e}),[4,gA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!zN(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,mA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Hs(Hs({},o),{authToken:{requestStatus:0}}),[4,gA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function SA(t){return bA(t,function(t){if(!CA(t))throw HN.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+jN<Date.now()?Hs(Hs({},t),{authToken:{requestStatus:0}}):t})}function CA(t){return void 0!==t&&2===t.registrationStatus}function NA(e,n){return void 0===n&&(n=!1),zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return[4,function(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,_A(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,IA(e,n)];case 2:return[2,t.sent().token]}})})}function AA(a,u){return zs(this,void 0,void 0,function(){var r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=KN(e)+"/"+n,i=JN(a,u),o={method:"DELETE",headers:i},[4,$N(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,YN("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n})})}function kA(t,r){var i=t.appConfig;return function(t,e){uA();var n=rA(t),r=iA.get(n);r||(r=new Set,iA.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=rA(i),(n=iA.get(e))&&(n.delete(t),0===n.size&&iA.delete(e),cA())}}function RA(t){return HN.create("missing-app-config-values",{valueName:t})}(hA=zl).INTERNAL.registerComponent(new Fa("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw RA("App Configuration");if(!t.name)throw RA("App Name");try{for(var r=Qs(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw RA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return[4,_A(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):IA(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return NA(n,t)},delete:function(){return function(r){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,bA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw HN.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw HN.create("app-offline");case 3:return[4,AA(e,n)];case 4:return t.sent(),[4,mA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return kA(n,t)}}},"PUBLIC")),hA.registerVersion("@firebase/installations","0.4.12");var OA=((lA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',lA["only-available-in-window"]="This method is available in a Window context.",lA["only-available-in-sw"]="This method is available in a service worker context.",lA["permission-default"]="The notification permission was not granted and dismissed instead.",lA["permission-blocked"]="The notification permission was not granted and blocked instead.",lA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",lA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",lA["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",lA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",lA["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",lA["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",lA["token-update-no-token"]="FCM returned no token when updating the user to push.",lA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",lA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",lA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",lA["invalid-vapid-key"]="The public VAPID key must be a string.",lA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",lA),PA=new ya("messaging","Messaging",OA);function DA(t){return PA.create("missing-app-config-values",{valueName:t})}function xA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Xs(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var LA="fcm_token_details_db",MA=5,FA="fcm_token_object_Store";function UA(a){return zs(this,void 0,void 0,function(){var e,s,n=this;return Ks(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(LA))return[2,null];t.label=2;case 2:return s=null,[4,MN(LA,MA,function(o){return zs(n,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(FA)?[4,(e=o.transaction.objectStore(FA)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:xA(r.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:xA(r.auth),p256dh:xA(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:xA(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,FN(LA)];case 4:return t.sent(),[4,FN("fcm_vapid_details_db")];case 5:return t.sent(),[4,FN("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var jA="firebase-messaging-database",VA=1,qA="firebase-messaging-store",BA=null;function WA(){return BA=BA||MN(jA,VA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(qA)}})}function GA(i){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return e=zA(i),[4,WA()];case 1:return[4,t.sent().transaction(qA).objectStore(qA).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,UA(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,HA(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function HA(i,o){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return e=zA(i),[4,WA()];case 1:return n=t.sent(),[4,(r=n.transaction(qA,"readwrite")).objectStore(qA).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function zA(t){return t.appConfig.appId}var KA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",QA="https://fcmregistrations.googleapis.com/v1",YA="FCM_MSG",XA="google.c.a.c_id";function JA(s,a){return zs(this,void 0,void 0,function(){var e,n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return[4,ZA(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($A(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,PA.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),PA.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function $A(t){var e=t.projectId;return QA+"/projects/"+e+"/registrations"}function ZA(t){var n=t.appConfig,r=t.installations;return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function tk(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==KA&&(o.web.applicationPubKey=i),o}var ek,nk;function rk(l,f,p){return zs(this,void 0,void 0,function(){var a,u,c,h;return Ks(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw PA.create("permission-blocked");return[4,function(n,r){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(r)})]}})})}(f,p)];case 1:return a=t.sent(),[4,GA(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:xA(a.getKey("auth")),p256dh:xA(a.getKey("p256dh"))},u?[3,3]:[2,ok(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,JA(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,ok(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return[4,ZA(a)];case 1:e=t.sent(),n=tk(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($A(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),PA.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,PA.create("token-update-failed",{errorInfo:s});if(!i.token)throw PA.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Hs({token:e,createTime:Date.now()},i),[4,HA(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,ik(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s})})}function ik(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,GA(r)];case 1:return(e=t.sent())?[4,JA(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return e=zA(i),[4,WA()];case 1:return n=t.sent(),[4,(r=n.transaction(qA,"readwrite")).objectStore(qA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function ok(r,i){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,function(a,u){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return[4,ZA(a)];case 1:e=t.sent(),n=tk(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch($A(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),PA.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,PA.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw PA.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,HA(r,n)];case 2:return t.sent(),[2,n.token]}})})}function sk(t){return"object"==typeof t&&t&&XA in t}(nk=ek=ek||{}).PUSH_RECEIVED="push-received",nk.NOTIFICATION_CLICKED="notification-clicked";var ak=(Object.defineProperty(uk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),uk.prototype.getToken=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=KA),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw PA.create("permission-blocked");return[2,rk(this.firebaseDependencies,e,this.vapidKey)]}})})},uk.prototype.deleteToken=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,ik(this.firebaseDependencies,e)]}})})},uk.prototype.requestPermission=function(){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?PA.create("permission-blocked"):PA.create("permission-default")}})})},uk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw PA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw PA.create("invalid-vapid-key");this.vapidKey=t},uk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw PA.create("invalid-sw-registration");if(this.swRegistration)throw PA.create("use-sw-after-get-token");this.swRegistration=t},uk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},uk.prototype.setBackgroundMessageHandler=function(){throw PA.create("only-available-in-sw")},uk.prototype.onTokenRefresh=function(){return function(){}},uk.prototype.getServiceWorkerRegistration=function(){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),PA.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},uk.prototype.messageEventListener=function(o){var s;return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===ek.PUSH_RECEIVED&&this.onMessageCallback(r),sk(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},uk.prototype.logEvent=function(n,r){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case ek.NOTIFICATION_CLICKED:return"notification_open";case ek.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[XA],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},uk);function uk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var ck=(Object.defineProperty(hk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),hk.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw PA.create("invalid-bg-handler");this.bgMessageHandler=t},hk.prototype.getToken=function(){var n,r;return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,GA(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:KA,t.label=2;case 2:return[2,rk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},hk.prototype.deleteToken=function(){return ik(this.firebaseDependencies,self.registration)},hk.prototype.requestPermission=function(){throw PA.create("only-available-in-window")},hk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw PA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw PA.create("invalid-vapid-key");this.vapidKey=t},hk.prototype.useServiceWorker=function(){throw PA.create("only-available-in-window")},hk.prototype.onMessage=function(){throw PA.create("only-available-in-window")},hk.prototype.onTokenRefresh=function(){throw PA.create("only-available-in-window")},hk.prototype.onPush=function(i){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,lk()]:[2];case 1:return(n=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=fk(ek.PUSH_RECEIVED,e);try{for(var o=Qs(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Hs({},t.notification);return n.data=Hs(Hs({},t.notification.data),((e={})[YA]=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},hk.prototype.onSubChange=function(n){var r,i;return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,ik(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,GA(this.firebaseDependencies)];case 3:return e=t.sent(),[4,ik(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,rk(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:KA)];case 5:return t.sent(),[2]}})})},hk.prototype.onNotificationClick=function(s){var a,u;return zs(this,void 0,void 0,function(){var n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return!(n=null===(u=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===u?void 0:u[YA])||s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(sk(t.data)?self.location.origin:null)}(n))?[4,function(u){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Ks(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href),[4,lk()];case 1:n=t.sent();try{for(r=Qs(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]:[2]);case 1:return(i=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return i=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,i.focus()];case 5:i=t.sent(),t.label=6;case 6:return i?(o=fk(ek.NOTIFICATION_CLICKED,n),[2,i.postMessage(o)]):[2]}var e})})},hk);function hk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function lk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function fk(t,e){return{firebaseMessaging:{type:t,payload:e}}}var pk={isSupported:dk};function dk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}zl.INTERNAL.registerComponent(new Fa("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw DA("App Configuration Object");if(!t.name)throw DA("App Name");var r=t.options;try{for(var i=Qs(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw DA(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!dk())throw PA.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?ck:ak)(n)},"PUBLIC").setServiceProps(pk));var vk="firebasestorage.googleapis.com",yk=12e4,gk=6e5,mk=(bk.prototype.codeProp=function(){return this.code},bk.prototype.codeEquals=function(t){return wk(t)===this.codeProp()},bk.prototype.serverResponseProp=function(){return this.serverResponse_},bk.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(bk.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(bk.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(bk.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(bk.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),bk);function bk(t,e){this.code_=wk(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var _k={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function wk(t){return"storage/"+t}function Ek(){return new mk(_k.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Tk(){return new mk(_k.CANCELED,"User canceled the upload/download.")}function Ik(){return new mk(_k.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sk(t,e,n){return new mk(_k.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function Ck(){return new mk(_k.APP_DELETED,"The Firebase app was deleted.")}function Nk(t,e){return new mk(_k.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ak(t){throw new mk(_k.INTERNAL_ERROR,"Internal error: "+t)}var kk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Rk(t){switch(t){case kk.RAW:case kk.BASE64:case kk.BASE64URL:case kk.DATA_URL:return;default:throw"Expected one of the event types: ["+kk.RAW+", "+kk.BASE64+", "+kk.BASE64URL+", "+kk.DATA_URL+"]."}}var Ok=function(t,e){this.data=t,this.contentType=e||null};function Pk(t,e){switch(t){case kk.RAW:return new Ok(Dk(e));case kk.BASE64:case kk.BASE64URL:return new Ok(xk(t,e));case kk.DATA_URL:return new Ok((n=new Lk(e)).base64?xk(kk.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Nk(kk.DATA_URL,"Malformed data URL.")}return Dk(e)}(n.rest),new Lk(e).contentType)}var n;throw Ek()}function Dk(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function xk(e,t){switch(e){case kk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Nk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case kk.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw Nk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw Nk(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Lk=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Nk(kk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var Mk,Fk,Uk={STATE_CHANGED:"state_changed"},jk="running",Vk="pausing",qk="paused",Bk="success",Wk="canceling",Gk="canceled",Hk="error",zk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kk(t){switch(t){case jk:case Vk:case Wk:return zk.RUNNING;case qk:return zk.PAUSED;case Bk:return zk.SUCCESS;case Gk:return zk.CANCELED;case Hk:default:return zk.ERROR}}function Qk(t){return null!=t}function Yk(t){return void 0!==t}function Xk(t){return"function"==typeof t}function Jk(t){return"object"==typeof t}function $k(t){return"string"==typeof t||t instanceof String}function Zk(t){return"number"==typeof t||t instanceof Number}function tR(t){return eR()&&t instanceof Blob}function eR(){return"undefined"!=typeof Blob}(Fk=Mk=Mk||{})[Fk.NO_ERROR=0]="NO_ERROR",Fk[Fk.NETWORK_ERROR=1]="NETWORK_ERROR",Fk[Fk.ABORT=2]="ABORT";var nR=(rR.prototype.send=function(t,e,n,r){if(this.sent_)throw Ak("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Qk(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Qk(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},rR.prototype.getErrorCode=function(){if(!this.sent_)throw Ak("cannot .getErrorCode() before sending");return this.errorCode_},rR.prototype.getStatus=function(){if(!this.sent_)throw Ak("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},rR.prototype.getResponseText=function(){if(!this.sent_)throw Ak("cannot .getResponseText() before sending");return this.xhr_.responseText},rR.prototype.abort=function(){this.xhr_.abort()},rR.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},rR.prototype.addUploadProgressListener=function(t){Qk(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},rR.prototype.removeUploadProgressListener=function(t){Qk(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},rR);function rR(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Mk.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=Mk.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Mk.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var iR=(oR.prototype.createXhrIo=function(){return new nR},oR);function oR(){}function sR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(eR())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var aR=(uR.prototype.size=function(){return this.size_},uR.prototype.type=function(){return this.type_},uR.prototype.slice=function(t,e){if(tR(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new uR(r)}var i,o,s;return new uR(new Uint8Array(this.data_.buffer,t,e-t),!0)},uR.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(eR()){var n=t.map(function(t){return t instanceof uR?t.data_:t});return new uR(sR.apply(null,n))}var r=t.map(function(t){return $k(t)?Pk(kk.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new uR(o,!0)},uR.prototype.uploadData=function(){return this.data_},uR);function uR(t,e){var n=0,r="";tR(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var cR=(Object.defineProperty(hR.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(hR.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),hR.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},hR.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},hR.makeFromBucketSpec=function(e){var t,n;try{t=hR.makeFromUrl(e)}catch(t){return new hR(e,"")}if(""===t.path)return t;throw n=e,new mk(_k.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},hR.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o,s=vk.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){e=new hR(h[c.indices.bucket],h[c.indices.path]||""),c.postModify(e);break}}if(null==e)throw o=t,new mk(_k.INVALID_URL,"Invalid URL '"+o+"'.");return e},hR);function hR(t,e){this.bucket=t,this.path_=e}function lR(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return Jk(n=e)&&!Array.isArray(n)?e:null}function fR(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function pR(t){return"https://"+vk+"/v0"+t}function dR(t){var e=encodeURIComponent,n="?";for(var r in t){t.hasOwnProperty(r)&&(n=n+(e(r)+"="+e(t[r]))+"&")}return n=n.slice(0,-1)}function vR(t,e){return e}var yR=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||vR},gR=null;function mR(){if(gR)return gR;var t=[];t.push(new yR("bucket")),t.push(new yR("generation")),t.push(new yR("metageneration")),t.push(new yR("name","fullPath",!0));var e=new yR("name");e.xform=function(t,e){return!$k(n=e)||n.length<2?n:fR(n);var n},t.push(e);var n=new yR("size");return n.xform=function(t,e){return Qk(e)?Number(e):e},t.push(n),t.push(new yR("timeCreated")),t.push(new yR("updated")),t.push(new yR("md5Hash",null,!0)),t.push(new yR("cacheControl",null,!0)),t.push(new yR("contentDisposition",null,!0)),t.push(new yR("contentEncoding",null,!0)),t.push(new yR("contentLanguage",null,!0)),t.push(new yR("contentType",null,!0)),t.push(new yR("metadata","customMetadata",!0)),gR=t}function bR(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new cR(t,e);return i.makeStorageReference(n)}})}function _R(t,e,n){var r=lR(e);if(null===r)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return bR(r,t),r}(t,r,n)}function wR(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function ER(t){if(!Jk(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!Jk(n))throw"Expected object for 'customMetadata' mapping."}else if(Jk(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var TR="maxResults",IR=1e3,SR="pageToken",CR="prefixes",NR="items";function AR(t,e,n){var r=lR(n);if(null===r)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[CR])for(var i=0,o=n[CR];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new cR(e,s));r.prefixes.push(a)}if(n[NR])for(var u=0,c=n[NR];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new cR(e,h.name));r.items.push(a)}return r}(t,e,r)}function kR(t){if(!Jk(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===TR){if(!Zk(n=t[TR])||!Number.isInteger(n)||t[TR]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[TR])throw"Expected maxResults to be less than or equal to "+IR+"."}else{if(e!==SR)throw"Unknown option: "+e;if(t[SR]&&!$k(t[SR]))throw"Expected pageToken to be string."}var n}var RR=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function OR(t){if(!t)throw Ek()}function PR(r,i){return function(t,e){var n=_R(r,e,i);return OR(null!==n),n}}function DR(r,i){return function(t,e){var n=AR(r,i,e);return OR(null!==n),n}}function xR(r,i){return function(t,e){var n=_R(r,e,i);return OR(null!==n),function(r,t){var e=lR(t);if(null===e)return null;if(!$k(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return pR("/b/"+i(e)+"/o/"+i(n))+dR({alt:"media",token:t})})[0]}(n,e)}}function LR(o){return function(t,e){var n,r,i=401===t.getStatus()?new mk(_k.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(r=o.bucket,new mk(_k.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=o.path,new mk(_k.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):e;return i.setServerResponseProp(e.serverResponseProp()),i}}function MR(i){var o=LR(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new mk(_k.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function FR(t,e,n){var r=pR(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new RR(r,"GET",PR(t,n),i);return o.errorHandler=MR(e),o}function UR(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function jR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=UR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wR(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=aR.getBlob(c,r,h);if(null===l)throw Ik();var f={name:u.fullPath},p=pR(o),d=t.maxUploadRetryTime(),v=new RR(p,"POST",PR(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=LR(e),v}var VR=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function qR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){OR(!1)}return OR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function BR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=UR(e,r,i),a={name:s.fullPath},u=pR(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=wR(s,n),l=t.maxUploadRetryTime();var f=new RR(u,"POST",function(t){var e;qR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){OR(!1)}return OR($k(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=LR(e),f}function WR(t,e,n,i){var r=t.maxUploadRetryTime(),o=new RR(n,"POST",function(t){var e=qR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){OR(!1)}n||OR(!1);var r=Number(n);return OR(!isNaN(r)),new VR(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=LR(e),o}function GR(t,s,e,a,n,u,r,i){var c=new VR(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new mk(_k.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw Ik();var v=s.maxUploadRetryTime(),y=new RR(e,"POST",function(t,e){var n=qR(t,["active","final"]),r=c.current+h,i=a.size(),o="final"===n?PR(s,u)(t,e):null;return new VR(r,i,"final"===n,o)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=LR(t),y}var HR=function(t,e,n){var r;Xk(t)||Qk(e)||Qk(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)},zR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function KR(e,t,n){for(var r,i,o,s,a,u,c=t.length,h=t.length,l=0;l<t.length;l++)if(t[l].optional){c=l;break}if(!(c<=n.length&&n.length<=h))throw r=c,i=h,o=e,s=n.length,u=r===i?1===(a=r)?"argument":"arguments":(a="between "+r+" and "+i,"arguments"),new mk(_k.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+o+"`: Expected "+a+" "+u+", received "+s+".");for(l=0;l<n.length;l++)try{t[l].validator(n[l])}catch(t){throw t instanceof Error?Sk(l,e,t.message):Sk(l,e,t)}}var QR=function(e,t){var n=this;this.validator=function(t){n.optional&&!Yk(t)||e(t)},this.optional=!!t};function YR(t,e){function n(t){if(!$k(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new QR(o,e)}function XR(){return new QR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||eR()&&t instanceof Blob))throw"Expected Blob or File."})}function JR(t){return new QR(ER,t)}function $R(){return new QR(function(t){if(!(Zk(t)&&0<=t))throw"Expected a number 0 or greater."})}function ZR(e,t){return new QR(function(t){if(!(null===t||Qk(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function tO(t){return new QR(function(t){if(!(null===t||Xk(t)))throw"Expected a Function."},t)}function eO(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var nO=(rO.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},rO.prototype.shouldDoResumable_=function(t){return 262144<t.size()},rO.prototype.start_=function(){this.state_===jk&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},rO.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case jk:e(t);break;case Wk:n.transition_(Gk);break;case Vk:n.transition_(qk)}})},rO.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=BR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},rO.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=WR(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},rO.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new VR(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=GR(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(Hk)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(Bk)):r.completeTransitions_()},r.errorHandler_)})},rO.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},rO.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=FR(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(Bk)},r.metadataErrorHandler_)})},rO.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=jR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(Bk)},r.errorHandler_)})},rO.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},rO.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Wk:case Vk:this.state_=t,null!==this.request_&&this.request_.cancel();break;case jk:var e=this.state_===qk;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case qk:this.state_=t,this.notifyObservers_();break;case Gk:this.error_=Tk(),this.state_=t,this.notifyObservers_();break;case Hk:case Bk:this.state_=t,this.notifyObservers_()}},rO.prototype.completeTransitions_=function(){switch(this.state_){case Vk:this.transition_(qk);break;case Wk:this.transition_(Gk);break;case jk:this.start_()}},Object.defineProperty(rO.prototype,"snapshot",{get:function(){var t=Kk(this.state_);return new zR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),rO.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=tO(!0).validator,s=ZR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(Yk(t.next)||Yk(t.error)||Yk(t.complete)))throw"";return}catch(t){throw r}}KR("on",[YR(function(){if(t!==Uk.STATE_CHANGED)throw"Expected one of the event types: ["+Uk.STATE_CHANGED+"]."}),ZR(a,!0),tO(!0),tO(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&KR("on",i,arguments);var r=new HR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[ZR(function(t){if(null===t)throw r;a(t)}),tO(!0),tO(!0)];return Yk(e)||Yk(n)||Yk(o)?c(null)(e,n,o):c(h)},rO.prototype.then=function(t,e){return this.promise_.then(t,e)},rO.prototype.catch=function(t){return this.then(null,t)},rO.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},rO.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},rO.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},rO.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Kk(this.state_)){case zk.SUCCESS:eO(this.resolve_.bind(null,this.snapshot))();break;case zk.CANCELED:case zk.ERROR:eO(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},rO.prototype.notifyObserver_=function(t){switch(Kk(this.state_)){case zk.RUNNING:case zk.PAUSED:t.next&&eO(t.next.bind(t,this.snapshot))();break;case zk.SUCCESS:t.complete&&eO(t.complete.bind(t))();break;case zk.CANCELED:case zk.ERROR:t.error&&eO(t.error.bind(t,this.error_))();break;default:t.error&&eO(t.error.bind(t,this.error_))()}},rO.prototype.resume=function(){KR("resume",[],arguments);var t=this.state_===qk||this.state_===Vk;return t&&this.transition_(jk),t},rO.prototype.pause=function(){KR("pause",[],arguments);var t=this.state_===jk;return t&&this.transition_(Vk),t},rO.prototype.cancel=function(){KR("cancel",[],arguments);var t=this.state_===jk||this.state_===Vk;return t&&this.transition_(Wk),t},rO);function rO(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=jk,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(_k.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Hk))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(_k.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(Hk))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var iO=(oO.prototype.toString=function(){return KR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},oO.prototype.newRef=function(t,e){return new oO(t,e)},oO.prototype.mappings=mR,oO.prototype.child=function(t){KR("child",[YR()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new cR(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(oO.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new cR(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(oO.prototype,"root",{get:function(){var t=new cR(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(oO.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(oO.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(oO.prototype,"name",{get:function(){return fR(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(oO.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),oO.prototype.put=function(t,e){return void 0===e&&(e=null),KR("put",[XR(),JR(!0)],arguments),this.throwIfRoot_("put"),new nO(this,this.authWrapper,this.location,this.mappings(),new aR(t),e)},oO.prototype.putString=function(t,e,n){void 0===e&&(e=kk.RAW),KR("putString",[YR(),YR(Rk,!0),JR(!0)],arguments),this.throwIfRoot_("putString");var r=Pk(e,t),i=Object.assign({},n);return!Qk(i.contentType)&&Qk(r.contentType)&&(i.contentType=r.contentType),new nO(this,this.authWrapper,this.location,this.mappings(),new aR(r.data,!0),i)},oO.prototype.delete=function(){var a=this;return KR("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,n=a.location,r=pR(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new RR(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=MR(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},oO.prototype.listAll=function(){KR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},oO.prototype.listAllHelper=function(o,s){return zs(this,void 0,void 0,function(){var e,n,r,i;return Ks(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},oO.prototype.list=function(r){KR("list",[new QR(kR,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=pR(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new RR(s,"GET",DR(t,e.bucket),a);return u.urlParams=o,u.errorHandler=LR(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},oO.prototype.getMetadata=function(){var n=this;return KR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=FR(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},oO.prototype.updateMetadata=function(h){var l=this;return KR("updateMetadata",[JR()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=pR(n.fullServerUrl()),s=wR(r,i),a=e.maxOperationRetryTime(),(u=new RR(o,"PATCH",PR(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=MR(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},oO.prototype.getDownloadURL=function(){var u=this;return KR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.authWrapper,n=u.location,r=u.mappings(),i=pR(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new RR(i,"GET",xR(e,r),o)).errorHandler=MR(n),s);return u.authWrapper.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new mk(_k.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},oO.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new mk(_k.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},oO);function oO(t,e){this.authWrapper=t,this.location=e instanceof cR?e:cR.makeFromUrl(e)}var sO=(aO.prototype.getPromise=function(){return this.promise_},aO.prototype.cancel=function(t){},aO);function aO(t){this.promise_=Promise.reject(t)}var uO=(cO.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},cO.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},cO);function cO(){this.map=new Map,this.id=-9007199254740991}var hO=(lO.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:cR.makeFromBucketSpec(e).bucket},lO.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},lO.prototype.bucket=function(){if(this.deleted_)throw Ck();return this.bucket_},lO.prototype.service=function(){return this.service_},lO.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},lO.prototype.makeRequest=function(t,e){if(this.deleted_)return new sO(Ck());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},lO.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},lO.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},lO.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},lO.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},lO.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},lO);function lO(t,e,n,r,i,o){var s,a;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null===this.app_||Qk(a=this.app_.options)&&(this.bucket_=lO.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null),this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=yk,this.maxUploadRetryTime_=gk,this.requestMap_=new uO}var fO=(pO.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());Yk(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=Ek()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Ck:Tk)()):i(n=new mk(_k.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Js([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new dO(!1,null,!0)):this.backoffId_=(e=function(o,t){var e;function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}t?o(!1,new dO(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e,n,r=t.getErrorCode()===Mk.NO_ERROR,i=t.getStatus();r&&!c.isRetryStatusCode_(i)?(e=-1!==c.successCodes_.indexOf(i),o(!0,new dO(e,t))):(n=t.getErrorCode()===Mk.ABORT,o(!1,new dO(!1,null,n)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},pO.prototype.getPromise=function(){return this.promise_},pO.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},pO.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},pO);function pO(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var dO=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function vO(t,e,n,r){var i,o,s,a,u,c,h=dR(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==zl?zl.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new fO(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var yO=(gO.prototype.ref=function(t){if(KR("ref",[YR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new iO(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},gO.prototype.refFromURL=function(t){return KR("refFromURL",[YR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{cR.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new iO(this.authWrapper_,t)},Object.defineProperty(gO.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),gO.prototype.setMaxUploadRetryTime=function(t){KR("setMaxUploadRetryTime",[$R()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},gO.prototype.setMaxOperationRetryTime=function(t){KR("setMaxOperationRetryTime",[$R()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(gO.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(gO.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),gO);function gO(t,e,n,r){var i;this.bucket_=null,this.authWrapper_=new hO(t,e,function(t,e){return new iO(t,e)},vO,this,n),this.app_=t,null!=r?this.bucket_=cR.makeFromBucketSpec(r):null!=(i=this.authWrapper_.bucket())&&(this.bucket_=new cR(i,"")),this.internals_=new mO(this)}var mO=(bO.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},bO);function bO(t){this.service_=t}var _O,wO;function EO(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new yO(n,r,new iR,e)}wO={TaskState:zk,TaskEvent:Uk,StringFormat:kk,Storage:yO,Reference:iO},(_O=zl).INTERNAL.registerComponent(new Fa("storage",EO,"PUBLIC").setServiceProps(wO).setMultipleInstances(!0)),_O.registerVersion("@firebase/storage","0.3.36");var TO,IO,SO,CO,NO="0.3.7",AO="FB-PERF-TRACE-MEASURE",kO="@firebase/performance/config",RO="@firebase/performance/configexpire",OO="Performance",PO=((TO={})["trace started"]="Trace {$traceName} was started before.",TO["trace stopped"]="Trace {$traceName} is not running.",TO["no window"]="Window is not available.",TO["no app id"]="App id is not available.",TO["no project id"]="Project id is not available.",TO["no api key"]="Api key is not available.",TO["invalid cc log"]="Attempted to queue invalid cc event",TO["FB not default"]="Performance can only start when Firebase app instance is the default one.",TO["RC response not ok"]="RC response is not ok",TO["invalid attribute name"]="Attribute name {$attributeName} is invalid.",TO["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",TO["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",TO["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",TO),DO=new ya("performance",OO,PO),xO=(LO.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},LO.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},LO.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},LO.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},LO.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},LO.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},LO.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},LO.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},LO.getInstance=function(){return void 0===IO&&(IO=new LO(SO)),IO},LO);function LO(t){if(!(this.window=t))throw DO.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function MO(t,e){var n=t.length-e.length;if(n<0||1<n)throw DO.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var FO,UO,jO,VO=(qO.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw DO.create("no app id");return t},qO.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw DO.create("no project id");return t},qO.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw DO.create("no api key");return t},qO.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},qO.getInstance=function(){return void 0===CO&&(CO=new qO),CO},qO);function qO(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=MO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=MO("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(jO=UO=UO||{})[jO.UNKNOWN=0]="UNKNOWN",jO[jO.VISIBLE=1]="VISIBLE",jO[jO.HIDDEN=2]="HIDDEN";var BO=["firebase_","google_","ga_"],WO=new RegExp("^[a-zA-Z]\\w*$");function GO(){switch(xO.getInstance().document.visibilityState){case"visible":return UO.VISIBLE;case"hidden":return UO.HIDDEN;default:return UO.UNKNOWN}}var HO=new tu(OO);HO.logLevel=za.INFO;var zO="0.0.1",KO={loggingEnabled:!0},QO="FIREBASE_INSTALLATIONS_AUTH";function YO(t){var r,e=function(){var t=xO.getInstance().localStorage;if(!t)return;var e=t.getItem(RO);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(kO);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(JO(e),Promise.resolve()):(r=t,function(){var t=VO.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+VO.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+VO.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:QO+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:VO.getInstance().getAppId(),app_version:NO,sdk_version:zO})});return fetch(n).then(function(t){if(t.ok)return t.json();throw DO.create("RC response not ok")})}).catch(function(){HO.info(XO)}).then(JO).then(function(t){var e=xO.getInstance().localStorage;if(!t||!e)return;e.setItem(kO,JSON.stringify(t)),e.setItem(RO,String(Date.now()+60*VO.getInstance().configTimeToLive*60*1e3))},function(){}))}var XO="Could not fetch config, will use default configs";function JO(t){if(!t)return t;var e=VO.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):KO.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=$O(e.tracesSamplingRate),e.logNetworkAfterSampling=$O(e.networkRequestsSamplingRate),t}function $O(t){return Math.random()<=t}var ZO,tP=1;function eP(){return tP=2,ZO=ZO||function(){var n=xO.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=VO.getInstance().installationsService.getId()).then(function(t){FO=t}),t;var t}).then(YO).then(nP,nP)}function nP(){tP=3}var rP,iP=1e4,oP=5500,sP=3,aP=sP,uP=[],cP=!1;function hP(t){setTimeout(function(){if(0!==aP)return uP.length?void function(){var t=Js(uP);uP=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,i){return function(t){var e=VO.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||HO.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=iP;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(uP=Js(i,uP),HO.info("Retry transport request later.")),aP=sP,hP(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:VO.getInstance().logSource,log_event:e},t).catch(function(){uP=Js(t,uP),aP--,HO.info("Tries left: "+aP+"."),hP(iP)})}():hP(iP)},t)}function lP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw DO.create("invalid cc log");uP=Js(uP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function fP(t,e){(rP=rP||lP(vP))(t,e)}function pP(t){var e=VO.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&xO.getInstance().requiredApisAvailable()&&(t.isAuto&&GO()!==UO.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===tP?dP(t):eP().then(function(){return dP(t)},function(){return dP(t)})))}function dP(t){FO&&setTimeout(function(){return fP(t,1)},0)}function vP(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:yP(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:yP(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function yP(){return{google_app_id:VO.getInstance().getAppId(),app_instance_id:FO,web_app_info:{sdk_version:NO,page_url:xO.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=xO.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:GO(),effective_connection_type:function(){var t=xO.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var gP=["_fp","_fcp","_fid"];var mP=(bP.prototype.start=function(){if(1!==this.state)throw DO.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},bP.prototype.stop=function(){if(2!==this.state)throw DO.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),pP(this)},bP.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Hs({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}pP(this)},bP.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},bP.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<gP.indexOf(n))&&n.startsWith("_"))throw DO.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},bP.prototype.getMetric=function(t){return this.counters[t]||0},bP.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||BO.some(function(t){return n.startsWith(t)})||!n.match(WO)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw DO.create("invalid attribute name",{attributeName:t});if(!o)throw DO.create("invalid attribute value",{attributeValue:e})}},bP.prototype.getAttribute=function(t){return this.customAttributes[t]},bP.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},bP.prototype.getAttributes=function(){return Hs({},this.customAttributes)},bP.prototype.setStartTime=function(t){this.startTimeUs=t},bP.prototype.setDuration=function(t){this.durationUs=t},bP.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},bP.createOobTrace=function(t,e,n){var r,i,o,s,a=xO.getInstance().getUrl();a&&(r=new bP("_wt_"+a,!0),i=Math.floor(1e3*xO.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find(function(t){return"first-paint"===t.name}))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find(function(t){return"first-contentful-paint"===t.name}))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),pP(r))},bP.createUserTimingTrace=function(t){pP(new bP(t,!1,t))},bP);function bP(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=xO.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||AO+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function _P(t){var e,n,r,i,o,s,a,u,c,h,l=t;l&&void 0!==l.responseStart&&(e=xO.getInstance().getTimeOrigin(),n=Math.floor(1e3*(l.startTime+e)),r=l.responseStart?Math.floor(1e3*(l.responseStart-l.startTime)):void 0,i=Math.floor(1e3*(l.responseEnd-l.startTime)),o={url:l.name&&l.name.split("?")[0],responsePayloadBytes:l.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},s=o,(h=VO.getInstance()).instrumentationEnabled&&(a=s.url,u=h.logEndPointUrl.split("?")[0],c=h.flTransportEndpointUrl.split("?")[0],a!==u&&a!==c&&h.loggingEnabled&&h.logNetworkAfterSampling&&setTimeout(function(){return fP(s,0)},0)))}var wP=5e3;function EP(){FO&&(setTimeout(function(){var t=xO.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){mP.createOobTrace(e,n),r=void 0},wP),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),mP.createOobTrace(e,n,t))})):mP.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=xO.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){_P(r[n])}t.setupObserver("resource",_P)},0),setTimeout(function(){for(var t=xO.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){TP(r[n])}t.setupObserver("measure",TP)},0))}function TP(t){var e=t.name;e.substring(0,AO.length)!==AO&&mP.createUserTimingTrace(e)}var IP=(SP.prototype.trace=function(t){return new mP(t)},Object.defineProperty(SP.prototype,"instrumentationEnabled",{get:function(){return VO.getInstance().instrumentationEnabled},set:function(t){VO.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(SP.prototype,"dataCollectionEnabled",{get:function(){return VO.getInstance().dataCollectionEnabled},set:function(t){VO.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),SP);function SP(t){this.app=t,xO.getInstance().requiredApisAvailable()?(cP||(hP(oP),cP=!0),eP().then(EP,EP)):HO.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}var CP;function NP(t,e){if("[DEFAULT]"!==t.name)throw DO.create("FB not default");if("undefined"==typeof window)throw DO.create("no window");return SO=window,VO.getInstance().firebaseAppInstance=t,VO.getInstance().installationsService=e,new IP(t)}(CP=zl).INTERNAL.registerComponent(new Fa("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return NP(e,n)},"PUBLIC")),CP.registerVersion("@firebase/performance","0.3.7");var AP,kP,RP,OP,PP="measurementId",DP="firebase_id",xP="origin",LP="https://www.googletagmanager.com/gtag/js";(kP=AP=AP||{}).EVENT="event",kP.SET="set",kP.CONFIG="config",(OP=RP=RP||{}).ADD_SHIPPING_INFO="add_shipping_info",OP.ADD_PAYMENT_INFO="add_payment_info",OP.ADD_TO_CART="add_to_cart",OP.ADD_TO_WISHLIST="add_to_wishlist",OP.BEGIN_CHECKOUT="begin_checkout",OP.CHECKOUT_PROGRESS="checkout_progress",OP.EXCEPTION="exception",OP.GENERATE_LEAD="generate_lead",OP.LOGIN="login",OP.PAGE_VIEW="page_view",OP.PURCHASE="purchase",OP.REFUND="refund",OP.REMOVE_FROM_CART="remove_from_cart",OP.SCREEN_VIEW="screen_view",OP.SEARCH="search",OP.SELECT_CONTENT="select_content",OP.SELECT_ITEM="select_item",OP.SELECT_PROMOTION="select_promotion",OP.SET_CHECKOUT_OPTION="set_checkout_option",OP.SHARE="share",OP.SIGN_UP="sign_up",OP.TIMING_COMPLETE="timing_complete",OP.VIEW_CART="view_cart",OP.VIEW_ITEM="view_item",OP.VIEW_ITEM_LIST="view_item_list",OP.VIEW_PROMOTION="view_promotion",OP.VIEW_SEARCH_RESULTS="view_search_results";var MP,FP=new tu("@firebase/analytics");function UP(t,n,e){var f,p,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=(f=r,p=t,function(t,e,n){if(t===AP.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(AP.EVENT,e,n||{})}).catch(function(t){return FP.error(t)})}else t===AP.CONFIG?(p[e]||Promise.resolve()).then(function(){f(AP.CONFIG,e,n)}).catch(function(t){return FP.error(t)}):f(AP.SET,e)}),{gtagCore:r,wrappedGtag:window[e]}}var jP,VP,qP=((MP={})["no-ga-id"]='"'+PP+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',MP["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",MP["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",MP["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",MP),BP=new ya("analytics","Analytics",qP),WP={},GP="dataLayer",HP="gtag",zP=!1;function KP(t){if(zP)throw BP.create("already-initialized");t.dataLayerName&&(GP=t.dataLayerName),t.gtagName&&(HP=t.gtagName)}function QP(t,e){var n,r,i,o,s,a,u,c=t.options[PP];if(!c)throw BP.create("no-ga-id");if(null!=WP[c])throw BP.create("already-exists",{id:c});return zP||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(LP))return r}}()||(a=GP,(u=document.createElement("script")).src=LP+"?l="+a,u.async=!0,document.head.appendChild(u)),o=GP,s=[],Array.isArray(window[o])?s=window[o]:window[o]=s,r=(n=UP(WP,GP,HP)).wrappedGtag,i=n.gtagCore,VP=r,jP=i,zP=!0),WP[c]=function(r,i,o){return zs(this,void 0,void 0,function(){var e,n;return Ks(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(AP.CONFIG,r.options[PP],((n={})[DP]=e,n[xP]="firebase",n.update=!0,n)),[2]}})})}(t,e,jP),{app:t,logEvent:function(t,e,n){return r=VP,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=Hs(Hs({},s),{send_to:i})),void r(AP.EVENT,o,u||{});var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=VP,r=c,i=t,void((o=e)&&o.global?n(AP.SET,{screen_name:i}):n(AP.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=VP,r=c,i=t,void((o=e)&&o.global?n(AP.SET,{user_id:i}):n(AP.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(AP.SET,i)}else t(AP.CONFIG,e,{update:!0,user_properties:n})}(VP,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var YP,XP="analytics";(YP=zl).INTERNAL.registerComponent(new Fa(XP,function(t){return QP(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:KP,EventName:RP})),YP.INTERNAL.registerComponent(new Fa("analytics-internal",function(t){try{return{logEvent:t.getProvider(XP).getImmediate().logEvent}}catch(t){throw BP.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),YP.registerVersion("@firebase/analytics","0.3.7");var JP,$P=(ZP.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},ZP.prototype.fetch=function(s){return zs(this,void 0,void 0,function(){var e,n,r,i,o;return Ks(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},ZP);function ZP(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var tD=((JP={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",JP["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",JP["registration-api-key"]="Undefined API key. Check Firebase app initialization.",JP["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",JP["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",JP["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",JP["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",JP["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",JP["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",JP["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',JP["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',JP["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",JP["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",JP),eD=new ya("remoteconfig","Remote Config",tD);var nD=(rD.prototype.fetch=function(w){return zs(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,_;return Ks(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),eD.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw _=t.sent(),eD.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw eD.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},rD);function rD(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var iD=(oD.prototype.addEventListener=function(t){this.listeners.push(t)},oD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},oD);function oD(){this.listeners=[]}var sD=["1","true","t","yes","y","on"],aD=(uD.prototype.asString=function(){return this._value},uD.prototype.asBoolean=function(){return"static"!==this._source&&0<=sD.indexOf(this._value.toLowerCase())},uD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},uD.prototype.getSource=function(){return this._source},uD);function uD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var cD=(hD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=za.DEBUG;break;case"silent":this._logger.logLevel=za.SILENT;break;default:this._logger.logLevel=za.ERROR}},Object.defineProperty(hD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(hD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),hD.prototype.activate=function(){return zs(this,void 0,void 0,function(){var e,n,r;return Ks(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},hD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},hD.prototype.fetch=function(){return zs(this,void 0,void 0,function(){var r,i,o,s=this;return Ks(this,function(t){switch(t.label){case 0:r=new iD,setTimeout(function(){return zs(s,void 0,void 0,function(){return Ks(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof da&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},hD.prototype.fetchAndActivate=function(){return zs(this,void 0,void 0,function(){return Ks(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},hD.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Hs(Hs({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},hD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},hD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},hD.prototype.getString=function(t){return this.getValue(t).asString()},hD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new aD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new aD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new aD("static"))},hD);function hD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function lD(t,e){var n=t.target.error||void 0;return eD.create(e,{originalErrorMessage:n&&n.message})}var fD="app_namespace_store",pD="firebase_remote_config",dD=1;var vD=(yD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},yD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},yD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},yD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},yD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},yD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},yD.prototype.getActiveConfig=function(){return this.get("active_config")},yD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},yD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},yD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},yD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},yD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},yD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},yD.prototype.get=function(a){return zs(this,void 0,void 0,function(){var o,s=this;return Ks(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([fD],"readonly").objectStore(fD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(lD(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(eD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},yD.prototype.set=function(a,u){return zs(this,void 0,void 0,function(){var o,s=this;return Ks(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([fD],"readwrite").objectStore(fD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(lD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(eD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},yD.prototype.delete=function(a){return zs(this,void 0,void 0,function(){var o,s=this;return Ks(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([fD],"readwrite").objectStore(fD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(lD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(eD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},yD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},yD);function yD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(pD,dD);t.onerror=function(t){n(lD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(fD,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var gD=(mD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},mD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},mD.prototype.getActiveConfig=function(){return this.activeConfig},mD.prototype.loadFromStorage=function(){return zs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ks(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},mD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},mD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},mD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},mD);function mD(t){this.storage=t}var bD=(_D.prototype.fetch=function(n){return zs(this,void 0,void 0,function(){var e;return Ks(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},_D.prototype.attemptFetch=function(c,t){var h=t.throttleEndTimeMillis,l=t.backoffCount;return zs(this,void 0,void 0,function(){var s,a,u;return Ks(this,function(t){switch(t.label){case 0:return[4,(i=c.signal,o=h,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(eD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(c)];case 3:return s=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,s];case 5:if(!function(t){if(t instanceof da){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(a=t.sent()))throw a;return u={throttleEndTimeMillis:Date.now()+(e=l,n=1e3*Math.pow(2,e),r=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+r)),backoffCount:l+1},[4,this.storage.setThrottleMetadata(u)];case 6:return t.sent(),[2,this.attemptFetch(c,u)];case 7:return[2]}var e,n,r,i,o})})},_D);function _D(t,e){this.client=t,this.storage=e}var wD,ED="@firebase/remote-config";return(wD=zl).INTERNAL.registerComponent(new Fa("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw eD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw eD.create("registration-project-id");if(!s)throw eD.create("registration-api-key");if(!a)throw eD.create("registration-app-id");e=e||"firebase";var u=new vD(a,n.name,e),c=new gD(u),h=new tu(ED);h.logLevel=za.ERROR;var l=new nD(r,wD.SDK_VERSION,e,o,s,a),f=new bD(l,u),p=new $P(f,u,c,h),d=new cD(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),wD.registerVersion(ED,"0.1.23"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),zl.registerVersion("firebase","7.15.4","cdn"),zl});
//# sourceMappingURL=firebase.js.map
